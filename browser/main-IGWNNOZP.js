var Bk=Object.defineProperty,$k=Object.defineProperties;var Hk=Object.getOwnPropertyDescriptors;var qd=Object.getOwnPropertySymbols,zk=Object.getPrototypeOf,sT=Object.prototype.hasOwnProperty,aT=Object.prototype.propertyIsEnumerable,qk=Reflect.get;var oT=(n,e,t)=>e in n?Bk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,k=(n,e)=>{for(var t in e||={})sT.call(e,t)&&oT(n,t,e[t]);if(qd)for(var t of qd(e))aT.call(e,t)&&oT(n,t,e[t]);return n},Q=(n,e)=>$k(n,Hk(e));var sa=(n,e)=>{var t={};for(var r in n)sT.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&qd)for(var r of qd(n))e.indexOf(r)<0&&aT.call(n,r)&&(t[r]=n[r]);return t};var Zi=(n,e,t)=>qk(zk(n),t,e);var _=(n,e,t)=>new Promise((r,i)=>{var o=c=>{try{a(t.next(c))}catch(u){i(u)}},s=c=>{try{a(t.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});var hy;function Gd(){return hy}function xr(n){let e=hy;return hy=n,e}var cT=Symbol("NotFound");function aa(n){return n===cT||n?.name==="\u0275NotFound"}var Wt=null,Wd=!1,fy=1,Gk=null,Kt=Symbol("SIGNAL");function pe(n){let e=Wt;return Wt=n,e}function Jd(){return Wt}var ca={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function la(n){if(Wd)throw new Error("");if(Wt===null)return;Wt.consumerOnSignalRead(n);let e=Wt.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Wt.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Wt.producers,t!==void 0&&t.producer===n)){Wt.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Wt&&(!r||Kk(i,Wt)))return;let o=da(Wt),s={producer:n,consumer:Wt,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Wt.producersTail=s,e!==void 0?e.nextProducer=s:Wt.producers=s,o&&hT(n,s)}function lT(){fy++}function Zd(n){if(!(da(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===fy)){if(!n.producerMustRecompute(n)&&!cl(n)){Yd(n);return}n.producerRecomputeValue(n),Yd(n)}}function py(n){if(n.consumers===void 0)return;let e=Wd;Wd=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||Wk(r)}}finally{Wd=e}}function my(){return Wt?.consumerAllowSignalWrites!==!1}function Wk(n){n.dirty=!0,py(n),n.consumerMarkedDirty?.(n)}function Yd(n){n.dirty=!1,n.lastCleanEpoch=fy}function ua(n){return n&&uT(n),pe(n)}function uT(n){n.producersTail=void 0,n.recomputing=!0}function al(n,e){pe(e),n&&dT(n)}function dT(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(da(n))do t=gy(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function cl(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Zd(t),r!==t.version))return!0}return!1}function ll(n){if(da(n)){let e=n.producers;for(;e!==void 0;)e=gy(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function hT(n,e){let t=n.consumersTail,r=da(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)hT(i.producer,i)}function gy(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!da(e)){let o=e.producers;for(;o!==void 0;)o=gy(o)}return t}function da(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Xd(n){Gk?.(n)}function Kk(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function eh(n,e){return Object.is(n,e)}function th(n,e){let t=Object.create(Qk);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Zd(t),la(t),t.value===sl)throw t.error;return t.value};return r[Kt]=t,Xd(t),r}var Kd=Symbol("UNSET"),Qd=Symbol("COMPUTING"),sl=Symbol("ERRORED"),Qk=Q(k({},ca),{value:Kd,dirty:!0,error:null,equal:eh,kind:"computed",producerMustRecompute(n){return n.value===Kd||n.value===Qd},producerRecomputeValue(n){if(n.value===Qd)throw new Error("");let e=n.value;n.value=Qd;let t=ua(n),r,i=!1;try{r=n.computation(),pe(null),i=e!==Kd&&e!==sl&&r!==sl&&n.equal(e,r)}catch(o){r=sl,n.error=o}finally{al(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function Yk(){throw new Error}var fT=Yk;function pT(n){fT(n)}function yy(n){fT=n}var Jk=null;function vy(n,e){let t=Object.create(nh);t.value=n,e!==void 0&&(t.equal=e);let r=()=>mT(t);return r[Kt]=t,Xd(t),[r,s=>ha(t,s),s=>_y(t,s)]}function mT(n){return la(n),n.value}function ha(n,e){my()||pT(n),n.equal(n.value,e)||(n.value=e,Zk(n))}function _y(n,e){my()||pT(n),ha(n,e(n.value))}var nh=Q(k({},ca),{equal:eh,value:void 0,kind:"signal"});function Zk(n){n.version++,lT(),py(n),Jk?.(n)}function he(n){return typeof n=="function"}function fa(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var rh=fa(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ul(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Et=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(he(r))try{r()}catch(o){e=o instanceof rh?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{gT(o)}catch(s){e=e??[],s instanceof rh?e=[...e,...s.errors]:e.push(s)}}if(e)throw new rh(e)}}add(e){var t;if(e&&e!==this)if(this.closed)gT(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ul(t,e)}remove(e){let{_finalizers:t}=this;t&&ul(t,e),e instanceof n&&e._removeParent(this)}};Et.EMPTY=(()=>{let n=new Et;return n.closed=!0,n})();var Ey=Et.EMPTY;function ih(n){return n instanceof Et||n&&"closed"in n&&he(n.remove)&&he(n.add)&&he(n.unsubscribe)}function gT(n){he(n)?n():n.unsubscribe()}var or={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var pa={setTimeout(n,e,...t){let{delegate:r}=pa;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=pa;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function oh(n){pa.setTimeout(()=>{let{onUnhandledError:e}=or;if(e)e(n);else throw n})}function dl(){}var yT=wy("C",void 0,void 0);function vT(n){return wy("E",void 0,n)}function _T(n){return wy("N",n,void 0)}function wy(n,e,t){return{kind:n,value:e,error:t}}var es=null;function ma(n){if(or.useDeprecatedSynchronousErrorHandling){let e=!es;if(e&&(es={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=es;if(es=null,t)throw r}}else n()}function ET(n){or.useDeprecatedSynchronousErrorHandling&&es&&(es.errorThrown=!0,es.error=n)}var ts=class extends Et{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ih(e)&&e.add(this)):this.destination=tF}static create(e,t,r){return new ga(e,t,r)}next(e){this.isStopped?by(_T(e),this):this._next(e)}error(e){this.isStopped?by(vT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?by(yT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Xk=Function.prototype.bind;function Iy(n,e){return Xk.call(n,e)}var Cy=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){sh(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){sh(r)}else sh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){sh(t)}}},ga=class extends ts{constructor(e,t,r){super();let i;if(he(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&or.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Iy(e.next,o),error:e.error&&Iy(e.error,o),complete:e.complete&&Iy(e.complete,o)}):i=e}this.destination=new Cy(i)}};function sh(n){or.useDeprecatedSynchronousErrorHandling?ET(n):oh(n)}function eF(n){throw n}function by(n,e){let{onStoppedNotification:t}=or;t&&pa.setTimeout(()=>t(n,e))}var tF={closed:!0,next:dl,error:eF,complete:dl};var ya=typeof Symbol=="function"&&Symbol.observable||"@@observable";function An(n){return n}function Ty(...n){return Dy(n)}function Dy(n){return n.length===0?An:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var le=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=rF(t)?t:new ga(t,r,i);return ma(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=wT(r),new r((i,o)=>{let s=new ga({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ya](){return this}pipe(...t){return Dy(t)(this)}toPromise(t){return t=wT(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function wT(n){var e;return(e=n??or.Promise)!==null&&e!==void 0?e:Promise}function nF(n){return n&&he(n.next)&&he(n.error)&&he(n.complete)}function rF(n){return n&&n instanceof ts||nF(n)&&ih(n)}function Sy(n){return he(n?.lift)}function Re(n){return e=>{if(Sy(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Se(n,e,t,r,i){return new Ay(n,e,t,r,i)}var Ay=class extends ts{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function va(){return Re((n,e)=>{let t=null;n._refCount++;let r=Se(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var _a=class extends le{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Sy(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Et;let t=this.getSubject();e.add(this.source.subscribe(Se(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Et.EMPTY)}return e}refCount(){return va()(this)}};var IT=fa(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ct=(()=>{class n extends le{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new ah(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new IT}next(t){ma(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ma(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ma(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Ey:(this.currentObservers=null,o.push(t),new Et(()=>{this.currentObservers=null,ul(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new le;return t.source=this,t}}return n.create=(e,t)=>new ah(e,t),n})(),ah=class extends ct{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Ey}};var Ye=class extends ct{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var mn=new le(n=>n.complete());function bT(n){return n&&he(n.schedule)}function CT(n){return n[n.length-1]}function ch(n){return he(CT(n))?n.pop():void 0}function Xi(n){return bT(CT(n))?n.pop():void 0}function DT(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{u(r.next(h))}catch(p){s(p)}}function c(h){try{u(r.throw(h))}catch(p){s(p)}}function u(h){h.done?o(h.value):i(h.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}function TT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ns(n){return this instanceof ns?(this.v=n,this):new ns(n)}function ST(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(I){return Promise.resolve(I).then(y,p)}}function a(y,I){r[y]&&(i[y]=function(P){return new Promise(function(A,F){o.push([y,P,A,F])>1||c(y,P)})},I&&(i[y]=I(i[y])))}function c(y,I){try{u(r[y](I))}catch(P){m(o[0][3],P)}}function u(y){y.value instanceof ns?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){c("next",y)}function p(y){c("throw",y)}function m(y,I){y(I),o.shift(),o.length&&c(o[0][0],o[0][1])}}function AT(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof TT=="function"?TT(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var lh=n=>n&&typeof n.length=="number"&&typeof n!="function";function uh(n){return he(n?.then)}function dh(n){return he(n[ya])}function hh(n){return Symbol.asyncIterator&&he(n?.[Symbol.asyncIterator])}function fh(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function iF(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ph=iF();function mh(n){return he(n?.[ph])}function gh(n){return ST(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ns(t.read());if(i)return yield ns(void 0);yield yield ns(r)}}finally{t.releaseLock()}})}function yh(n){return he(n?.getReader)}function wt(n){if(n instanceof le)return n;if(n!=null){if(dh(n))return oF(n);if(lh(n))return sF(n);if(uh(n))return aF(n);if(hh(n))return MT(n);if(mh(n))return cF(n);if(yh(n))return lF(n)}throw fh(n)}function oF(n){return new le(e=>{let t=n[ya]();if(he(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function sF(n){return new le(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function aF(n){return new le(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,oh)})}function cF(n){return new le(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function MT(n){return new le(e=>{uF(n,e).catch(t=>e.error(t))})}function lF(n){return MT(gh(n))}function uF(n,e){var t,r,i,o;return DT(this,void 0,void 0,function*(){try{for(t=AT(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function gn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function vh(n,e=0){return Re((t,r)=>{t.subscribe(Se(r,i=>gn(r,n,()=>r.next(i),e),()=>gn(r,n,()=>r.complete(),e),i=>gn(r,n,()=>r.error(i),e)))})}function _h(n,e=0){return Re((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function RT(n,e){return wt(n).pipe(_h(e),vh(e))}function NT(n,e){return wt(n).pipe(_h(e),vh(e))}function PT(n,e){return new le(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function xT(n,e){return new le(t=>{let r;return gn(t,e,()=>{r=n[ph](),gn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>he(r?.return)&&r.return()})}function Eh(n,e){if(!n)throw new Error("Iterable cannot be null");return new le(t=>{gn(t,e,()=>{let r=n[Symbol.asyncIterator]();gn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function OT(n,e){return Eh(gh(n),e)}function kT(n,e){if(n!=null){if(dh(n))return RT(n,e);if(lh(n))return PT(n,e);if(uh(n))return NT(n,e);if(hh(n))return Eh(n,e);if(mh(n))return xT(n,e);if(yh(n))return OT(n,e)}throw fh(n)}function We(n,e){return e?kT(n,e):wt(n)}function ne(...n){let e=Xi(n);return We(n,e)}function Ea(n,e){let t=he(n)?n:()=>n,r=i=>i.error(t());return new le(e?i=>e.schedule(r,0,i):r)}function My(n){return!!n&&(n instanceof le||he(n.lift)&&he(n.subscribe))}var si=fa(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function me(n,e){return Re((t,r)=>{let i=0;t.subscribe(Se(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:dF}=Array;function hF(n,e){return dF(e)?n(...e):n(e)}function wh(n){return me(e=>hF(n,e))}var{isArray:fF}=Array,{getPrototypeOf:pF,prototype:mF,keys:gF}=Object;function Ih(n){if(n.length===1){let e=n[0];if(fF(e))return{args:e,keys:null};if(yF(e)){let t=gF(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function yF(n){return n&&typeof n=="object"&&pF(n)===mF}function bh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function hl(...n){let e=Xi(n),t=ch(n),{args:r,keys:i}=Ih(n);if(r.length===0)return We([],e);let o=new le(vF(r,e,i?s=>bh(i,s):An));return t?o.pipe(wh(t)):o}function vF(n,e,t=An){return r=>{FT(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)FT(e,()=>{let u=We(n[c],e),h=!1;u.subscribe(Se(r,p=>{o[c]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function FT(n,e,t){n?gn(t,n,e):e()}function LT(n,e,t,r,i,o,s,a){let c=[],u=0,h=0,p=!1,m=()=>{p&&!c.length&&!u&&e.complete()},y=P=>u<r?I(P):c.push(P),I=P=>{o&&e.next(P),u++;let A=!1;wt(t(P,h++)).subscribe(Se(e,F=>{i?.(F),o?y(F):e.next(F)},()=>{A=!0},void 0,()=>{if(A)try{for(u--;c.length&&u<r;){let F=c.shift();s?gn(e,s,()=>I(F)):I(F)}m()}catch(F){e.error(F)}}))};return n.subscribe(Se(e,y,()=>{p=!0,m()})),()=>{a?.()}}function lt(n,e,t=1/0){return he(e)?lt((r,i)=>me((o,s)=>e(r,o,i,s))(wt(n(r,i))),t):(typeof e=="number"&&(t=e),Re((r,i)=>LT(r,i,n,t)))}function eo(n=1/0){return lt(An,n)}function VT(){return eo(1)}function wa(...n){return VT()(We(n,Xi(n)))}function fl(n){return new le(e=>{wt(n()).subscribe(e)})}function Ry(...n){let e=ch(n),{args:t,keys:r}=Ih(n),i=new le(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let h=0;h<s;h++){let p=!1;wt(t[h]).subscribe(Se(o,m=>{p||(p=!0,u--),a[h]=m},()=>c--,void 0,()=>{(!c||!p)&&(u||o.next(r?bh(r,a):a),o.complete())}))}});return e?i.pipe(wh(e)):i}function Qt(n,e){return Re((t,r)=>{let i=0;t.subscribe(Se(r,o=>n.call(e,o,i++)&&r.next(o)))})}function ai(n){return Re((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Se(t,void 0,void 0,s=>{o=wt(n(s,ai(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function UT(n,e,t,r,i){return(o,s)=>{let a=t,c=e,u=0;o.subscribe(Se(s,h=>{let p=u++;c=a?n(c,h,p):(a=!0,h),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Or(n,e){return he(e)?lt(n,e,1):lt(n,1)}function to(n){return Re((e,t)=>{let r=!1;e.subscribe(Se(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ci(n){return n<=0?()=>mn:Re((e,t)=>{let r=0;e.subscribe(Se(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Ch(n=_F){return Re((e,t)=>{let r=!1;e.subscribe(Se(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function _F(){return new si}function rs(n){return Re((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function li(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Qt((i,o)=>n(i,o,r)):An,ci(1),t?to(e):Ch(()=>new si))}function Ia(n){return n<=0?()=>mn:Re((e,t)=>{let r=[];e.subscribe(Se(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Ny(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Qt((i,o)=>n(i,o,r)):An,Ia(1),t?to(e):Ch(()=>new si))}function Py(n,e){return Re(UT(n,e,arguments.length>=2,!0))}function xy(...n){let e=Xi(n);return Re((t,r)=>{(e?wa(n,t,e):wa(n,t)).subscribe(r)})}function $t(n,e){return Re((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Se(r,c=>{i?.unsubscribe();let u=0,h=o++;wt(n(c,h)).subscribe(i=Se(r,p=>r.next(e?e(c,p,h,u++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Th(n){return Re((e,t)=>{wt(n).subscribe(Se(t,()=>t.complete(),dl)),!t.closed&&e.subscribe(t)})}function Pt(n,e,t){let r=he(n)||e||t?{next:n,error:e,complete:t}:n;return r?Re((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Se(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):An}function jT(n){let e=pe(null);try{return n()}finally{pe(e)}}var Mh="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",U=class extends Error{code;constructor(e,t){super(fi(e,t)),this.code=e}};function EF(n){return`NG0${Math.abs(n)}`}function fi(n,e){return`${EF(n)}${e?": "+e:""}`}var pi=globalThis;function ke(n){for(let e in n)if(n[e]===ke)return e;throw Error("")}function HT(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function di(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(di).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function qy(n,e){return n?e?`${n} ${e}`:n:e||""}var wF=ke({__forward_ref__:ke});function ar(n){return n.__forward_ref__=ar,n.toString=function(){return di(this())},n}function Ht(n){return Gy(n)?n():n}function Gy(n){return typeof n=="function"&&n.hasOwnProperty(wF)&&n.__forward_ref__===ar}function H(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Rn(n){return{providers:n.providers||[],imports:n.imports||[]}}function yl(n){return IF(n,Rh)}function Wy(n){return yl(n)!==null}function IF(n,e){return n.hasOwnProperty(e)&&n[e]||null}function bF(n){let e=n?.[Rh]??null;return e||null}function ky(n){return n&&n.hasOwnProperty(Sh)?n[Sh]:null}var Rh=ke({\u0275prov:ke}),Sh=ke({\u0275inj:ke}),q=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=H({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Ky(n){return n&&!!n.\u0275providers}var Qy=ke({\u0275cmp:ke}),Yy=ke({\u0275dir:ke}),Jy=ke({\u0275pipe:ke}),Zy=ke({\u0275mod:ke}),ml=ke({\u0275fac:ke}),cs=ke({__NG_ELEMENT_ID__:ke}),BT=ke({__NG_ENV_ID__:ke});function vl(n){return typeof n=="string"?n:n==null?"":String(n)}function zT(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():vl(n)}var qT=ke({ngErrorCode:ke}),CF=ke({ngErrorMessage:ke}),TF=ke({ngTokenPath:ke});function Xy(n,e){return GT("",-200,e)}function Nh(n,e){throw new U(-201,!1)}function GT(n,e,t){let r=new U(e,n);return r[qT]=e,r[CF]=n,t&&(r[TF]=t),r}function DF(n){return n[qT]}var Fy;function WT(){return Fy}function dn(n){let e=Fy;return Fy=n,e}function ev(n,e,t){let r=yl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Nh(n,"Injector")}var SF={},is=SF,AF="__NG_DI_FLAG__",Ly=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=os(t)||0;try{return this.injector.get(e,r&8?null:is,r)}catch(i){if(aa(i))return i;throw i}}};function MF(n,e=0){let t=Gd();if(t===void 0)throw new U(-203,!1);if(t===null)return ev(n,void 0,e);{let r=RF(e),i=t.retrieve(n,r);if(aa(i)){if(r.optional)return null;throw i}return i}}function Z(n,e=0){return(WT()||MF)(Ht(n),e)}function V(n,e){return Z(n,os(e))}function os(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function RF(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Vy(n){let e=[];for(let t=0;t<n.length;t++){let r=Ht(n[t]);if(Array.isArray(r)){if(r.length===0)throw new U(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=NF(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(Z(i,o))}else e.push(Z(r))}return e}function NF(n){return n[AF]}function no(n,e){let t=n.hasOwnProperty(ml);return t?n[ml]:null}function KT(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function QT(n){return n.flat(Number.POSITIVE_INFINITY)}function Ph(n,e){n.forEach(t=>Array.isArray(t)?Ph(t,e):e(t))}function tv(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function _l(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function YT(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function JT(n,e,t){let r=Ca(n,e);return r>=0?n[r|1]=t:(r=~r,YT(n,r,e,t)),r}function xh(n,e){let t=Ca(n,e);if(t>=0)return n[t|1]}function Ca(n,e){return PF(n,e,1)}function PF(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var io={},Mn=[],oo=new q(""),nv=new q("",-1),rv=new q(""),gl=class{get(e,t=is){if(t===is){let i=GT("",-201);throw i.name="\u0275NotFound",i}return t}};function iv(n){return n[Zy]||null}function mi(n){return n[Qy]||null}function ov(n){return n[Yy]||null}function ZT(n){return n[Jy]||null}function ls(n){return{\u0275providers:n}}function XT(...n){return{\u0275providers:sv(!0,n),\u0275fromNgModule:!0}}function sv(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Ph(e,s=>{let a=s;Ah(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&eD(i,o),t}function eD(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];av(i,o=>{e(o,r)})}}function Ah(n,e,t,r){if(n=Ht(n),!n)return!1;let i=null,o=ky(n),s=!o&&mi(n);if(!o&&!s){let c=n.ngModule;if(o=ky(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)Ah(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{Ph(o.imports,h=>{Ah(h,e,t,r)&&(u||=[],u.push(h))})}finally{}u!==void 0&&eD(u,e)}if(!a){let u=no(i)||(()=>new i);e({provide:i,useFactory:u,deps:Mn},i),e({provide:rv,useValue:i,multi:!0},i),e({provide:oo,useValue:()=>Z(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=n;av(c,h=>{e(h,u)})}}else return!1;return i!==n&&n.providers!==void 0}function av(n,e){for(let t of n)Ky(t)&&(t=t.\u0275providers),Array.isArray(t)?av(t,e):e(t)}var xF=ke({provide:String,useValue:ke});function tD(n){return n!==null&&typeof n=="object"&&xF in n}function OF(n){return!!(n&&n.useExisting)}function kF(n){return!!(n&&n.useFactory)}function ss(n){return typeof n=="function"}function nD(n){return!!n.useClass}var El=new q(""),Dh={},$T={},Oy;function wl(){return Oy===void 0&&(Oy=new gl),Oy}var ut=class{},as=class extends ut{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,jy(e,s=>this.processProvider(s)),this.records.set(nv,ba(void 0,this)),i.has("environment")&&this.records.set(ut,ba(void 0,this));let o=this.records.get(El);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(rv,Mn,{self:!0}))}retrieve(e,t){let r=os(t)||0;try{return this.get(e,is,r)}catch(i){if(aa(i))return i;throw i}}destroy(){pl(this),this._destroyed=!0;let e=pe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),pe(e)}}onDestroy(e){return pl(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){pl(this);let t=xr(this),r=dn(void 0),i;try{return e()}finally{xr(t),dn(r)}}get(e,t=is,r){if(pl(this),e.hasOwnProperty(BT))return e[BT](this);let i=os(r),o,s=xr(this),a=dn(void 0);try{if(!(i&4)){let u=this.records.get(e);if(u===void 0){let h=jF(e)&&yl(e);h&&this.injectableDefInScope(h)?u=ba(Uy(e),Dh):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,i)}let c=i&2?wl():this.parent;return t=i&8&&t===is?null:t,c.get(e,t)}catch(c){let u=DF(c);throw u===-200||u===-201?new U(u,null):c}finally{dn(a),xr(s)}}resolveInjectorInitializers(){let e=pe(null),t=xr(this),r=dn(void 0),i;try{let o=this.get(oo,Mn,{self:!0});for(let s of o)s()}finally{xr(t),dn(r),pe(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(di(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ht(e);let t=ss(e)?e:Ht(e&&e.provide),r=LF(e);if(!ss(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ba(void 0,Dh,!0),i.factory=()=>Vy(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=pe(null);try{if(t.value===$T)throw Xy(di(e));return t.value===Dh&&(t.value=$T,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&UF(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{pe(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ht(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Uy(n){let e=yl(n),t=e!==null?e.factory:no(n);if(t!==null)return t;if(n instanceof q)throw new U(204,!1);if(n instanceof Function)return FF(n);throw new U(204,!1)}function FF(n){if(n.length>0)throw new U(204,!1);let t=bF(n);return t!==null?()=>t.factory(n):()=>new n}function LF(n){if(tD(n))return ba(void 0,n.useValue);{let e=cv(n);return ba(e,Dh)}}function cv(n,e,t){let r;if(ss(n)){let i=Ht(n);return no(i)||Uy(i)}else if(tD(n))r=()=>Ht(n.useValue);else if(kF(n))r=()=>n.useFactory(...Vy(n.deps||[]));else if(OF(n))r=(i,o)=>Z(Ht(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Ht(n&&(n.useClass||n.provide));if(VF(n))r=()=>new i(...Vy(n.deps));else return no(i)||Uy(i)}return r}function pl(n){if(n.destroyed)throw new U(205,!1)}function ba(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function VF(n){return!!n.deps}function UF(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function jF(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function jy(n,e){for(let t of n)Array.isArray(t)?jy(t,e):t&&Ky(t)?jy(t.\u0275providers,e):e(t)}function Ot(n,e){let t;n instanceof as?(pl(n),t=n):t=new Ly(n);let r,i=xr(t),o=dn(void 0);try{return e()}finally{xr(i),dn(o)}}function rD(){return WT()!==void 0||Gd()!=null}var cr=0,ae=1,ce=2,xt=3,jn=4,Bn=5,Il=6,Ta=7,Yt=8,so=9,kr=10,it=11,Da=12,lv=13,us=14,$n=15,ao=16,ds=17,Fr=18,bl=19,uv=20,ui=21,Oh=22,Cl=23,Nn=24,hs=25,Tl=26,Jt=27,iD=1;var co=7,Dl=8,fs=9,hn=10;function Lr(n){return Array.isArray(n)&&typeof n[iD]=="object"}function lr(n){return Array.isArray(n)&&n[iD]===!0}function dv(n){return(n.flags&4)!==0}function lo(n){return n.componentOffset>-1}function Sl(n){return(n.flags&1)===1}function Vr(n){return!!n.template}function Sa(n){return(n[ce]&512)!==0}function ps(n){return(n[ce]&256)===256}var oD="svg",sD="math";function Hn(n){for(;Array.isArray(n);)n=n[cr];return n}function hv(n,e){return Hn(e[n])}function ur(n,e){return Hn(e[n.index])}function kh(n,e){return n.data[e]}function fv(n,e){return n[e]}function pv(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function zn(n,e){let t=e[n];return Lr(t)?t:t[cr]}function aD(n){return(n[ce]&4)===4}function Fh(n){return(n[ce]&128)===128}function cD(n){return lr(n[xt])}function Al(n,e){return e==null?null:n[e]}function mv(n){n[ds]=0}function gv(n){n[ce]&1024||(n[ce]|=1024,Fh(n)&&Aa(n))}function lD(n,e){for(;n>0;)e=e[us],n--;return e}function Ml(n){return!!(n[ce]&9216||n[Nn]?.dirty)}function Lh(n){n[kr].changeDetectionScheduler?.notify(8),n[ce]&64&&(n[ce]|=1024),Ml(n)&&Aa(n)}function Aa(n){n[kr].changeDetectionScheduler?.notify(0);let e=ro(n);for(;e!==null&&!(e[ce]&8192||(e[ce]|=8192,!Fh(e)));)e=ro(e)}function yv(n,e){if(ps(n))throw new U(911,!1);n[ui]===null&&(n[ui]=[]),n[ui].push(e)}function uD(n,e){if(n[ui]===null)return;let t=n[ui].indexOf(e);t!==-1&&n[ui].splice(t,1)}function ro(n){let e=n[xt];return lr(e)?e[xt]:e}function vv(n){return n[Ta]??=[]}function _v(n){return n.cleanup??=[]}function dD(n,e,t,r){let i=vv(e);i.push(t),n.firstCreatePass&&_v(n).push(r,i.length-1)}var Ee={lFrame:SD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var By=!1;function hD(){return Ee.lFrame.elementDepthCount}function fD(){Ee.lFrame.elementDepthCount++}function pD(){Ee.lFrame.elementDepthCount--}function Ev(){return Ee.bindingsEnabled}function mD(){return Ee.skipHydrationRootTNode!==null}function gD(n){return Ee.skipHydrationRootTNode===n}function yD(){Ee.skipHydrationRootTNode=null}function Ne(){return Ee.lFrame.lView}function Zt(){return Ee.lFrame.tView}function Ie(n){return Ee.lFrame.contextLView=n,n[Yt]}function be(n){return Ee.lFrame.contextLView=null,n}function zt(){let n=wv();for(;n!==null&&n.type===64;)n=n.parent;return n}function wv(){return Ee.lFrame.currentTNode}function vD(){let n=Ee.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ma(n,e){let t=Ee.lFrame;t.currentTNode=n,t.isParent=e}function Iv(){return Ee.lFrame.isParent}function _D(){Ee.lFrame.isParent=!1}function bv(){return By}function Cv(n){let e=By;return By=n,e}function Vh(){let n=Ee.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function ED(n){return Ee.lFrame.bindingIndex=n}function Rl(){return Ee.lFrame.bindingIndex++}function wD(n){let e=Ee.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function ID(){return Ee.lFrame.inI18n}function bD(n,e){let t=Ee.lFrame;t.bindingIndex=t.bindingRootIndex=n,Uh(e)}function CD(){return Ee.lFrame.currentDirectiveIndex}function Uh(n){Ee.lFrame.currentDirectiveIndex=n}function TD(n){let e=Ee.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Tv(){return Ee.lFrame.currentQueryIndex}function jh(n){Ee.lFrame.currentQueryIndex=n}function BF(n){let e=n[ae];return e.type===2?e.declTNode:e.type===1?n[Bn]:null}function Dv(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=BF(o),i===null||(o=o[us],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Ee.lFrame=DD();return r.currentTNode=e,r.lView=n,!0}function Bh(n){let e=DD(),t=n[ae];Ee.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function DD(){let n=Ee.lFrame,e=n===null?null:n.child;return e===null?SD(n):e}function SD(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function AD(){let n=Ee.lFrame;return Ee.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Sv=AD;function $h(){let n=AD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function MD(n){return(Ee.lFrame.contextLView=lD(n,Ee.lFrame.contextLView))[Yt]}function ms(){return Ee.lFrame.selectedIndex}function uo(n){Ee.lFrame.selectedIndex=n}function Hh(){let n=Ee.lFrame;return kh(n.tView,n.selectedIndex)}function RD(){return Ee.lFrame.currentNamespace}var ND=!0;function zh(){return ND}function qh(n){ND=n}function $y(n,e=null,t=null,r){let i=Av(n,e,t,r);return i.resolveInjectorInitializers(),i}function Av(n,e=null,t=null,r,i=new Set){let o=[t||Mn,XT(n)];return r=r||(typeof n=="object"?void 0:di(n)),new as(o,e||wl(),r||null,i)}var yn=class n{static THROW_IF_NOT_FOUND=is;static NULL=new gl;static create(e,t){if(Array.isArray(e))return $y({name:""},t,e,"");{let r=e.name??"";return $y({name:r},e.parent,e.providers,r)}}static \u0275prov=H({token:n,providedIn:"any",factory:()=>Z(nv)});static __NG_ELEMENT_ID__=-1},Je=new q(""),dr=(()=>{class n{static __NG_ELEMENT_ID__=$F;static __NG_ENV_ID__=t=>t}return n})(),Hy=class extends dr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return ps(this._lView)}onDestroy(e){let t=this._lView;return yv(t,e),()=>uD(t,e)}};function $F(){return new Hy(Ne())}var sr=class{_console=console;handleError(e){this._console.error("ERROR",e)}},vn=new q("",{providedIn:"root",factory:()=>{let n=V(ut),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(sr),e.handleError(t))}}}),PD={provide:oo,useValue:()=>void V(sr),multi:!0};function Mv(n){return typeof n=="function"&&n[Kt]!==void 0}function hr(n,e){let[t,r,i]=vy(n,e?.equal),o=t,s=o[Kt];return o.set=r,o.update=i,o.asReadonly=xD.bind(o),o}function xD(){let n=this[Kt];if(n.readonlyFn===void 0){let e=()=>this();e[Kt]=n,n.readonlyFn=e}return n.readonlyFn}function Rv(n){return Mv(n)&&typeof n.set=="function"}var Gh=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=HF}return n})();function HF(){return new Gh(Ne(),zt())}var hi=class{},Wh=new q("",{providedIn:"root",factory:()=>!1});var Nv=new q(""),Pv=new q(""),Ur=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ye(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new le(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),Kh=(()=>{class n{internalPendingTasks=V(Ur);scheduler=V(hi);errorHandler=V(vn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})();function Nl(...n){}var xv=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>new zy})}return n})(),zy=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function Ul(n){return{toString:n}.toString()}function JF(n){return typeof n=="function"}var nf=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function hS(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var _i=(()=>{let n=()=>fS;return n.ngInherit=!0,n})();function fS(n){return n.type.prototype.ngOnChanges&&(n.setInput=XF),ZF}function ZF(){let n=mS(this),e=n?.current;if(e){let t=n.previous;if(t===io)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function XF(n,e,t,r,i){let o=this.declaredInputs[r],s=mS(n)||eL(n,{previous:io,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new nf(u&&u.currentValue,t,c===io),hS(n,e,i,t)}var pS="__ngSimpleChanges__";function mS(n){return n[pS]||null}function eL(n,e){return n[pS]=e}var OD=[];var je=function(n,e=null,t){for(let r=0;r<OD.length;r++){let i=OD[r];i(n,e,t)}};function tL(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=fS(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function gS(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Zh(n,e,t){yS(n,e,3,t)}function Xh(n,e,t,r){(n[ce]&3)===t&&yS(n,e,t,r)}function Ov(n,e){let t=n[ce];(t&3)===e&&(t&=16383,t+=1,n[ce]=t)}function yS(n,e,t,r){let i=r!==void 0?n[ds]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[ds]+=65536),(a<o||o==-1)&&(nL(n,t,e,c),n[ds]=(n[ds]&4294901760)+c+2),c++}function kD(n,e){je(4,n,e);let t=pe(null);try{e.call(n)}finally{pe(t),je(5,n,e)}}function nL(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ce]>>14<n[ds]>>16&&(n[ce]&3)===e&&(n[ce]+=16384,kD(a,o)):kD(a,o)}var Na=-1,ys=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function rL(n){return(n.flags&8)!==0}function iL(n){return(n.flags&16)!==0}function oL(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];sL(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function vS(n){return n===3||n===4||n===6}function sL(n){return n.charCodeAt(0)===64}function Ol(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?FD(n,t,i,null,e[++r]):FD(n,t,i,null,null))}}return n}function FD(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function _S(n){return n!==Na}function rf(n){return n&32767}function aL(n){return n>>16}function of(n,e){let t=aL(n),r=e;for(;t>0;)r=r[us],t--;return r}var qv=!0;function sf(n){let e=qv;return qv=n,e}var cL=256,ES=cL-1,wS=5,lL=0,jr={};function uL(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(cs)&&(r=t[cs]),r==null&&(r=t[cs]=lL++);let i=r&ES,o=1<<i;e.data[n+(i>>wS)]|=o}function af(n,e){let t=IS(n,e);if(t!==-1)return t;let r=e[ae];r.firstCreatePass&&(n.injectorIndex=e.length,kv(r.data,n),kv(e,null),kv(r.blueprint,null));let i=g_(n,e),o=n.injectorIndex;if(_S(i)){let s=rf(i),a=of(i,e),c=a[ae].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function kv(n,e){n.push(0,0,0,0,0,0,0,0,e)}function IS(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function g_(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=SS(i),r===null)return Na;if(t++,i=i[us],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Na}function Gv(n,e,t){uL(n,e,t)}function dL(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(vS(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function bS(n,e,t){if(t&8||n!==void 0)return n;Nh(e,"NodeInjector")}function CS(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[so],o=dn(void 0);try{return i?i.get(e,r,t&8):ev(e,r,t&8)}finally{dn(o)}}return bS(r,e,t)}function TS(n,e,t,r=0,i){if(n!==null){if(e[ce]&2048&&!(r&2)){let s=mL(n,e,t,r,jr);if(s!==jr)return s}let o=DS(n,e,t,r,jr);if(o!==jr)return o}return CS(e,t,r,i)}function DS(n,e,t,r,i){let o=fL(t);if(typeof o=="function"){if(!Dv(e,n,r))return r&1?bS(i,t,r):CS(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Nh(t);else return s}finally{Sv()}}else if(typeof o=="number"){let s=null,a=IS(n,e),c=Na,u=r&1?e[$n][Bn]:null;for((a===-1||r&4)&&(c=a===-1?g_(n,e):e[a+8],c===Na||!VD(r,!1)?a=-1:(s=e[ae],a=rf(c),e=of(c,e)));a!==-1;){let h=e[ae];if(LD(o,a,h.data)){let p=hL(a,e,t,s,r,u);if(p!==jr)return p}c=e[a+8],c!==Na&&VD(r,e[ae].data[a+8]===u)&&LD(o,a,e)?(s=h,a=rf(c),e=of(c,e)):a=-1}}return i}function hL(n,e,t,r,i,o){let s=e[ae],a=s.data[n+8],c=r==null?lo(a)&&qv:r!=s&&(a.type&3)!==0,u=i&1&&o===a,h=ef(a,s,t,c,u);return h!==null?kl(e,s,h,a,i):jr}function ef(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,u=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:u;for(let y=p;y<m;y++){let I=s[y];if(y<c&&t===I||y>=c&&I.type===t)return y}if(i){let y=s[c];if(y&&Vr(y)&&y.type===t)return c}return null}function kl(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof ys){let a=o;if(a.resolving){let y=zT(s[t]);throw Xy(y)}let c=sf(a.canSeeViewProviders);a.resolving=!0;let u=s[t].type||s[t],h,p=a.injectImpl?dn(a.injectImpl):null,m=Dv(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&tL(t,s[t],e)}finally{p!==null&&dn(p),sf(c),a.resolving=!1,Sv()}}return o}function fL(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(cs)?n[cs]:void 0;return typeof e=="number"?e>=0?e&ES:pL:e}function LD(n,e,t){let r=1<<n;return!!(t[e+(n>>wS)]&r)}function VD(n,e){return!(n&2)&&!(n&1&&e)}var gs=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return TS(this._tNode,this._lView,e,os(r),t)}};function pL(){return new gs(zt(),Ne())}function Ei(n){return Ul(()=>{let e=n.prototype.constructor,t=e[ml]||Wv(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[ml]||Wv(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Wv(n){return Gy(n)?()=>{let e=Wv(Ht(n));return e&&e()}:no(n)}function mL(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ce]&2048&&!Sa(s);){let a=DS(o,s,t,r|2,jr);if(a!==jr)return a;let c=o.parent;if(!c){let u=s[uv];if(u){let h=u.get(t,jr,r);if(h!==jr)return h}c=SS(s),s=s[us]}o=c}return i}function SS(n){let e=n[ae],t=e.type;return t===2?e.declTNode:t===1?n[Bn]:null}function jl(n){return dL(zt(),n)}function gL(){return ka(zt(),Ne())}function ka(n,e){return new Xt(ur(n,e))}var Xt=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=gL}return n})();function yL(n){return n instanceof Xt?n.nativeElement:n}function vL(){return this._results[Symbol.iterator]()}var cf=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new ct}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=QT(e);(this._changesDetected=!KT(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=vL};function AS(n){return(n.flags&128)===128}var y_=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(y_||{}),MS=new Map,_L=0;function EL(){return _L++}function wL(n){MS.set(n[bl],n)}function Kv(n){MS.delete(n[bl])}var UD="__ngContext__";function Pa(n,e){Lr(e)?(n[UD]=e[bl],wL(e)):n[UD]=e}function RS(n){return PS(n[Da])}function NS(n){return PS(n[jn])}function PS(n){for(;n!==null&&!lr(n);)n=n[jn];return n}var Qv;function v_(n){Qv=n}function xS(){if(Qv!==void 0)return Qv;if(typeof document<"u")return document;throw new U(210,!1)}var Ef=new q("",{providedIn:"root",factory:()=>IL}),IL="ng",wf=new q(""),Bl=new q("",{providedIn:"platform",factory:()=>"unknown"});var If=new q(""),bf=new q("",{providedIn:"root",factory:()=>xS().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var bL="h",CL="b";var OS=!1,kS=new q("",{providedIn:"root",factory:()=>OS});var __=new q("");var TL=(n,e,t,r)=>{};function DL(n,e,t,r){TL(n,e,t,r)}function E_(n){return(n.flags&32)===32}var SL=()=>null;function FS(n,e,t=!1){return SL(n,e,t)}function LS(n,e){let t=n.contentQueries;if(t!==null){let r=pe(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];jh(o),a.contentQueries(2,e[s],s)}}}finally{pe(r)}}}function Yv(n,e,t){jh(0);let r=pe(null);try{e(n,t)}finally{pe(r)}}function VS(n,e,t){if(dv(e)){let r=pe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{pe(r)}}}var gi=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(gi||{});var Qh;function AL(){if(Qh===void 0&&(Qh=null,pi.trustedTypes))try{Qh=pi.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Qh}function jD(n){return AL()?.createScriptURL(n)||n}var lf=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Mh})`}};function $l(n){return n instanceof lf?n.changingThisBreaksApplicationSecurity:n}function w_(n,e){let t=US(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Mh})`)}return t===e}function US(n){return n instanceof lf&&n.getTypeName()||null}var ML=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function jS(n){return n=String(n),n.match(ML)?n:"unsafe:"+n}var Cf=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Cf||{});function po(n){let e=$S();return e?e.sanitize(Cf.URL,n)||"":w_(n,"URL")?$l(n):jS(vl(n))}function BS(n){let e=$S();if(e)return jD(e.sanitize(Cf.RESOURCE_URL,n)||"");if(w_(n,"ResourceURL"))return jD($l(n));throw new U(904,!1)}function RL(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?BS:po}function I_(n,e,t){return RL(e,t)(n)}function $S(){let n=Ne();return n&&n[kr].sanitizer}function HS(n){return n instanceof Function?n():n}function NL(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var zS="ng-template";function PL(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&NL(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(b_(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function b_(n){return n.type===4&&n.value!==zS}function xL(n,e,t){let r=n.type===4&&!t?zS:n.value;return e===r}function OL(n,e,t){let r=4,i=n.attrs,o=i!==null?LL(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!fr(r)&&!fr(c))return!1;if(s&&fr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!xL(n,c,t)||c===""&&e.length===1){if(fr(r))return!1;s=!0}}else if(r&8){if(i===null||!PL(n,i,c,t)){if(fr(r))return!1;s=!0}}else{let u=e[++a],h=kL(c,i,b_(n),t);if(h===-1){if(fr(r))return!1;s=!0;continue}if(u!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&u!==p){if(fr(r))return!1;s=!0}}}}return fr(r)||s}function fr(n){return(n&1)===0}function kL(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return VL(e,n)}function FL(n,e,t=!1){for(let r=0;r<e.length;r++)if(OL(n,e[r],t))return!0;return!1}function LL(n){for(let e=0;e<n.length;e++){let t=n[e];if(vS(t))return e}return n.length}function VL(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function BD(n,e){return n?":not("+e.trim()+")":e}function UL(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!fr(s)&&(e+=BD(o,i),i=""),r=s,o=o||!fr(r);t++}return i!==""&&(e+=BD(o,i)),e}function jL(n){return n.map(UL).join(",")}function BL(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!fr(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var wi={};function $L(n,e){return n.createText(e)}function HL(n,e,t){n.setValue(e,t)}function qS(n,e,t){return n.createElement(e,t)}function uf(n,e,t,r,i){n.insertBefore(e,t,r,i)}function GS(n,e,t){n.appendChild(e,t)}function $D(n,e,t,r,i){r!==null?uf(n,e,t,r,i):GS(n,e,t)}function zL(n,e,t,r){n.removeChild(null,e,t,r)}function qL(n,e,t){n.setAttribute(e,"style",t)}function GL(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function WS(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&oL(n,e,r),i!==null&&GL(n,e,i),o!==null&&qL(n,e,o)}function C_(n,e,t,r,i,o,s,a,c,u,h){let p=Jt+r,m=p+i,y=WL(p,m),I=typeof u=="function"?u():u;return y[ae]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:I,incompleteFirstPass:!1,ssrId:h}}function WL(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:wi);return t}function KL(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=C_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function T_(n,e,t,r,i,o,s,a,c,u,h){let p=e.blueprint.slice();return p[cr]=i,p[ce]=r|4|128|8|64|1024,(u!==null||n&&n[ce]&2048)&&(p[ce]|=2048),mv(p),p[xt]=p[us]=n,p[Yt]=t,p[kr]=s||n&&n[kr],p[it]=a||n&&n[it],p[so]=c||n&&n[so]||null,p[Bn]=o,p[bl]=EL(),p[Il]=h,p[uv]=u,p[$n]=e.type==2?n[$n]:p,p}function QL(n,e,t){let r=ur(e,n),i=KL(t),o=n[kr].rendererFactory,s=D_(n,T_(n,i,null,KS(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function KS(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function QS(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function D_(n,e){return n[Da]?n[lv][jn]=e:n[Da]=e,n[lv]=e,e}function O(n=1){YS(Zt(),Ne(),ms()+n,!1)}function YS(n,e,t,r){if(!r)if((e[ce]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Zh(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Xh(e,o,0,t)}uo(t)}var Tf=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Tf||{});function Jv(n,e,t,r){let i=pe(null);try{let[o,s,a]=n.inputs[t],c=null;(s&Tf.SignalBased)!==0&&(c=e[o][Kt]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):hS(e,c,o,r)}finally{pe(i)}}var Br=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Br||{}),YL;function S_(n,e){return YL(n,e)}var xa=new Set,Df=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Df||{}),ws=new q(""),HD=new Set;function mo(n){HD.has(n)||(HD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var JS=!1,Zv=class extends ct{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,rD()&&(this.destroyRef=V(dr,{optional:!0})??void 0,this.pendingTasks=V(Ur,{optional:!0})??void 0)}emit(e){let t=pe(null);try{super.next(e)}finally{pe(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Et&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},dt=Zv;function ZS(n){let e,t;function r(){n=Nl;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function zD(n){return queueMicrotask(()=>n()),()=>{n=Nl}}var A_="isAngularZone",df=A_+"_ID",JL=0,nt=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new dt(!1);onMicrotaskEmpty=new dt(!1);onStable=new dt(!1);onError=new dt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=JS}=e;if(typeof Zone>"u")throw new U(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,eV(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(A_)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new U(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new U(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,ZL,Nl,Nl);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},ZL={};function M_(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function XL(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){ZS(()=>{n.callbackScheduled=!1,Xv(n),n.isCheckStableRunning=!0,M_(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Xv(n)}function eV(n){let e=()=>{XL(n)},t=JL++;n._inner=n._inner.fork({name:"angular",properties:{[A_]:!0,[df]:t,[df+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(tV(c))return r.invokeTask(o,s,a,c);try{return qD(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),GD(n)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return qD(n),r.invoke(o,s,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!nV(c)&&e(),GD(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Xv(n),M_(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Xv(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function qD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function GD(n){n._nesting--,M_(n)}var hf=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new dt;onMicrotaskEmpty=new dt;onStable=new dt;onError=new dt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function tV(n){return XS(n,"__ignore_ng_zone__")}function nV(n){return XS(n,"__scheduler_tick__")}function XS(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var R_=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),eA=[0,1,2,3],tA=(()=>{class n{ngZone=V(nt);scheduler=V(hi);errorHandler=V(sr,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){V(ws,{optional:!0})}execute(){let t=this.sequences.size>0;t&&je(16),this.executing=!0;for(let r of eA)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&je(17)}register(t){let{view:r}=t;r!==void 0?((r[hs]??=[]).push(t),Aa(r),r[ce]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Df.AFTER_NEXT_RENDER,t):t()}static \u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}return n})(),ff=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[hs];e&&(this.view[hs]=e.filter(t=>t!==this))}};function Hl(n,e){let t=e?.injector??V(yn);return mo("NgAfterNextRender"),iV(n,t,e,!0)}function rV(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function iV(n,e,t,r){let i=e.get(R_);i.impl??=e.get(tA);let o=e.get(ws,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(dr):null,a=e.get(Gh,null,{optional:!0}),c=new ff(i.impl,rV(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(c),c}var oV=new q("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function nA(n,e,t){let r=n.get(oV);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function sV(n,e){for(let[t,r]of e)nA(n,r.animateFns)}function WD(n,e,t,r){let i=n?.[Tl]?.enter;e!==null&&i&&i.has(t.index)&&sV(r,i)}function Ra(n,e,t,r,i,o,s,a){if(i!=null){let c,u=!1;lr(i)?c=i:Lr(i)&&(u=!0,i=i[cr]);let h=Hn(i);n===0&&r!==null?(WD(a,r,o,t),s==null?GS(e,r,h):uf(e,r,h,s||null,!0)):n===1&&r!==null?(WD(a,r,o,t),uf(e,r,h,s||null,!0)):n===2?KD(a,o,t,p=>{zL(e,h,u,p)}):n===3&&KD(a,o,t,()=>{e.destroyNode(h)}),c!=null&&_V(e,n,t,c,o,r,s)}}function aV(n,e){rA(n,e),e[cr]=null,e[Bn]=null}function cV(n,e,t,r,i,o){r[cr]=i,r[Bn]=e,Sf(n,r,t,1,i,o)}function rA(n,e){e[kr].changeDetectionScheduler?.notify(9),Sf(n,e,e[it],2,null,null)}function lV(n){let e=n[Da];if(!e)return Fv(n[ae],n);for(;e;){let t=null;if(Lr(e))t=e[Da];else{let r=e[hn];r&&(t=r)}if(!t){for(;e&&!e[jn]&&e!==n;)Lr(e)&&Fv(e[ae],e),e=e[xt];e===null&&(e=n),Lr(e)&&Fv(e[ae],e),t=e&&e[jn]}e=t}}function N_(n,e){let t=n[fs],r=t.indexOf(e);t.splice(r,1)}function iA(n,e){if(ps(e))return;let t=e[it];t.destroyNode&&Sf(n,e,t,3,null,null),lV(e)}function Fv(n,e){if(ps(e))return;let t=pe(null);try{e[ce]&=-129,e[ce]|=256,e[Nn]&&ll(e[Nn]),hV(n,e),dV(n,e),e[ae].type===1&&e[it].destroy();let r=e[ao];if(r!==null&&lr(e[xt])){r!==e[xt]&&N_(r,e);let i=e[Fr];i!==null&&i.detachView(n)}Kv(e)}finally{pe(t)}}function KD(n,e,t,r){let i=n?.[Tl];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&xa.add(n),nA(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let u=s.animateFns[c],{promise:h}=u();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),uV(n,r)}else n&&xa.delete(n),r(!1)},i)}function uV(n,e){let t=n[Tl]?.running;if(t){t.then(()=>{n[Tl].running=void 0,xa.delete(n),e(!0)});return}e(!1)}function dV(n,e){let t=n.cleanup,r=e[Ta];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Ta]=null);let i=e[ui];if(i!==null){e[ui]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Cl];if(o!==null){e[Cl]=null;for(let s of o)s.destroy()}}function hV(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ys)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];je(4,a,c);try{c.call(a)}finally{je(5,a,c)}}else{je(4,i,o);try{o.call(i)}finally{je(5,i,o)}}}}}function fV(n,e,t){return pV(n,e.parent,t)}function pV(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[cr];if(lo(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===gi.None||i===gi.Emulated)return null}return ur(r,t)}function mV(n,e,t){return yV(n,e,t)}function gV(n,e,t){return n.type&40?ur(n,t):null}var yV=gV,QD;function P_(n,e,t,r){let i=fV(n,r,e),o=e[it],s=r.parent||e[Bn],a=mV(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)$D(o,i,t[c],a,!1);else $D(o,i,t,a,!1);QD!==void 0&&QD(o,r,e,t,i)}function Pl(n,e){if(e!==null){let t=e.type;if(t&3)return ur(e,n);if(t&4)return e_(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Pl(n,r);{let i=n[e.index];return lr(i)?e_(-1,i):Hn(i)}}else{if(t&128)return Pl(n,e.next);if(t&32)return S_(e,n)()||Hn(n[e.index]);{let r=oA(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ro(n[$n]);return Pl(i,r)}else return Pl(n,e.next)}}}return null}function oA(n,e){if(e!==null){let r=n[$n][Bn],i=e.projection;return r.projection[i]}return null}function e_(n,e){let t=hn+n+1;if(t<e.length){let r=e[t],i=r[ae].firstChild;if(i!==null)return Pl(r,i)}return e[co]}function x_(n,e,t,r,i,o,s){for(;t!=null;){let a=r[so];if(t.type===128){t=t.next;continue}let c=r[t.index],u=t.type;if(s&&e===0&&(c&&Pa(Hn(c),r),t.flags|=2),!E_(t))if(u&8)x_(n,e,t.child,r,i,o,!1),Ra(e,n,a,i,c,t,o,r);else if(u&32){let h=S_(t,r),p;for(;p=h();)Ra(e,n,a,i,p,t,o,r);Ra(e,n,a,i,c,t,o,r)}else u&16?vV(n,e,r,t,i,o):Ra(e,n,a,i,c,t,o,r);t=s?t.projectionNext:t.next}}function Sf(n,e,t,r,i,o){x_(t,r,n.firstChild,e,i,o,!1)}function vV(n,e,t,r,i,o){let s=t[$n],c=s[Bn].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let h=c[u];Ra(e,n,t[so],i,h,r,o,t)}else{let u=c,h=s[xt];AS(r)&&(u.flags|=128),x_(n,e,u,h,i,o,!0)}}function _V(n,e,t,r,i,o,s){let a=r[co],c=Hn(r);a!==c&&Ra(e,n,t,o,a,i,s);for(let u=hn;u<r.length;u++){let h=r[u];Sf(h[ae],h,n,e,o,a)}}function EV(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Br.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Br.Important),n.setStyle(t,r,i,o))}}function sA(n,e,t,r,i){let o=ms(),s=r&2;try{uo(-1),s&&e.length>Jt&&YS(n,e,Jt,!1),je(s?2:0,i,t),t(r,i)}finally{uo(o),je(s?3:1,i,t)}}function O_(n,e,t){SV(n,e,t),(t.flags&64)===64&&AV(n,e,t)}function aA(n,e,t=ur){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function wV(n,e,t,r){let o=r.get(kS,OS)||t===gi.ShadowDom,s=n.selectRootElement(e,o);return IV(s),s}function IV(n){bV(n)}var bV=()=>null;function CV(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function cA(n,e,t,r,i,o){let s=e[ae];if(k_(n,s,e,t,r)){lo(n)&&DV(e,n.index);return}n.type&3&&(t=CV(t)),TV(n,e,t,r,i,o)}function TV(n,e,t,r,i,o){if(n.type&3){let s=ur(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function DV(n,e){let t=zn(e,n);t[ce]&16||(t[ce]|=64)}function SV(n,e,t){let r=t.directiveStart,i=t.directiveEnd;lo(t)&&QL(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||af(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=kl(e,n,s,t);if(Pa(c,e),o!==null&&PV(e,s-r,c,a,t,o),Vr(a)){let u=zn(t.index,e);u[Yt]=kl(e,n,s,t)}}}function AV(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=CD();try{uo(o);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];Uh(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&MV(c,u)}}finally{uo(-1),Uh(s)}}function MV(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function lA(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];FL(e,o.selectors,!1)&&(r??=[],Vr(o)?r.unshift(o):r.push(o))}return r}function RV(n,e,t,r,i,o){let s=ur(n,e);NV(e[it],s,o,n.value,t,r,i)}function NV(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?vl(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function PV(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],u=s[a+1];Jv(r,t,c,u)}}function xV(n,e,t,r,i){let o=Jt+t,s=e[ae],a=i(s,e,n,r,t);e[o]=a,Ma(n,!0);let c=n.type===2;return c?(WS(e[it],a,n),(hD()===0||Sl(n))&&Pa(a,e),fD()):Pa(a,e),zh()&&(!c||!E_(n))&&P_(s,e,a,n),n}function OV(n){let e=n;return Iv()?_D():(e=e.parent,Ma(e,!1)),e}function kV(n,e){let t=n[so];if(!t)return;let r;try{r=t.get(vn,null)}catch{r=null}r?.(e)}function k_(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let u=s[c],h=s[c+1],p=e.data[u];Jv(p,t[u],h,i),a=!0}if(o)for(let c of o){let u=t[c],h=e.data[c];Jv(h,u,r,i),a=!0}return a}function FV(n,e){let t=zn(e,n),r=t[ae];LV(r,t);let i=t[cr];i!==null&&t[Il]===null&&(t[Il]=FS(i,t[so])),je(18),F_(r,t,t[Yt]),je(19,t[Yt])}function LV(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function F_(n,e,t){Bh(e);try{let r=n.viewQuery;r!==null&&Yv(1,r,t);let i=n.template;i!==null&&sA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Fr]?.finishViewCreation(n),n.staticContentQueries&&LS(n,e),n.staticViewQueries&&Yv(2,n.viewQuery,t);let o=n.components;o!==null&&VV(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ce]&=-5,$h()}}function VV(n,e){for(let t=0;t<e.length;t++)FV(n,e[t])}function UV(n,e,t,r){let i=pe(null);try{let o=e.tView,a=n[ce]&4096?4096:16,c=T_(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[ao]=u;let h=n[Fr];return h!==null&&(c[Fr]=h.createEmbeddedView(o)),F_(o,c,t),c}finally{pe(i)}}function YD(n,e){return!e||e.firstChild===null||AS(n)}function Fl(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Hn(o)),lr(o)&&uA(o,r);let s=t.type;if(s&8)Fl(n,e,t.child,r);else if(s&32){let a=S_(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=oA(e,t);if(Array.isArray(a))r.push(...a);else{let c=ro(e[$n]);Fl(c[ae],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function uA(n,e){for(let t=hn;t<n.length;t++){let r=n[t],i=r[ae].firstChild;i!==null&&Fl(r[ae],r,i,e)}n[co]!==n[cr]&&e.push(n[co])}function dA(n){if(n[hs]!==null){for(let e of n[hs])e.impl.addSequence(e);n[hs].length=0}}var hA=[];function jV(n){return n[Nn]??BV(n)}function BV(n){let e=hA.pop()??Object.create(HV);return e.lView=n,e}function $V(n){n.lView[Nn]!==n&&(n.lView=null,hA.push(n))}var HV=Q(k({},ca),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Aa(n.lView)},consumerOnSignalRead(){this.lView[Nn]=this}});function zV(n){let e=n[Nn]??Object.create(qV);return e.lView=n,e}var qV=Q(k({},ca),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=ro(n.lView);for(;e&&!fA(e[ae]);)e=ro(e);e&&gv(e)},consumerOnSignalRead(){this.lView[Nn]=this}});function fA(n){return n.type!==2}function pA(n){if(n[Cl]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Cl])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ce]&8192)}}var GV=100;function mA(n,e=0){let r=n[kr].rendererFactory,i=!1;i||r.begin?.();try{WV(n,e)}finally{i||r.end?.()}}function WV(n,e){let t=bv();try{Cv(!0),t_(n,e);let r=0;for(;Ml(n);){if(r===GV)throw new U(103,!1);r++,t_(n,1)}}finally{Cv(t)}}function KV(n,e,t,r){if(ps(e))return;let i=e[ce],o=!1,s=!1;Bh(e);let a=!0,c=null,u=null;o||(fA(n)?(u=jV(e),c=ua(u)):Jd()===null?(a=!1,u=zV(e),c=ua(u)):e[Nn]&&(ll(e[Nn]),e[Nn]=null));try{mv(e),ED(n.bindingStartIndex),t!==null&&sA(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Zh(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Xh(e,y,0,null),Ov(e,0)}if(s||QV(e),pA(e),gA(e,0),n.contentQueries!==null&&LS(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Zh(e,y)}else{let y=n.contentHooks;y!==null&&Xh(e,y,1),Ov(e,1)}JV(n,e);let p=n.components;p!==null&&vA(e,p,0);let m=n.viewQuery;if(m!==null&&Yv(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Zh(e,y)}else{let y=n.viewHooks;y!==null&&Xh(e,y,2),Ov(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Oh]){for(let y of e[Oh])y();e[Oh]=null}o||(dA(e),e[ce]&=-73)}catch(h){throw o||Aa(e),h}finally{u!==null&&(al(u,c),a&&$V(u)),$h()}}function gA(n,e){for(let t=RS(n);t!==null;t=NS(t))for(let r=hn;r<t.length;r++){let i=t[r];yA(i,e)}}function QV(n){for(let e=RS(n);e!==null;e=NS(e)){if(!(e[ce]&2))continue;let t=e[fs];for(let r=0;r<t.length;r++){let i=t[r];gv(i)}}}function YV(n,e,t){je(18);let r=zn(e,n);yA(r,t),je(19,r[Yt])}function yA(n,e){Fh(n)&&t_(n,e)}function t_(n,e){let r=n[ae],i=n[ce],o=n[Nn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&cl(o)),s||=!1,o&&(o.dirty=!1),n[ce]&=-9217,s)KV(r,n,r.template,n[Yt]);else if(i&8192){let a=pe(null);try{pA(n),gA(n,1);let c=r.components;c!==null&&vA(n,c,1),dA(n)}finally{pe(a)}}}function vA(n,e,t){for(let r=0;r<e.length;r++)YV(n,e[r],t)}function JV(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)uo(~i);else{let o=i,s=t[++r],a=t[++r];bD(s,o);let c=e[o];je(24,c),a(2,c),je(25,c)}}}finally{uo(-1)}}function L_(n,e){let t=bv()?64:1088;for(n[kr].changeDetectionScheduler?.notify(e);n;){n[ce]|=t;let r=ro(n);if(Sa(n)&&!r)return n;n=r}return null}function _A(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function ZV(n,e,t,r=!0){let i=e[ae];if(XV(i,e,n,t),r){let s=e_(t,n),a=e[it],c=a.parentNode(n[co]);c!==null&&cV(i,n[Bn],a,e,c,s)}let o=e[Il];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function n_(n,e){if(n.length<=hn)return;let t=hn+e,r=n[t];if(r){let i=r[ao];i!==null&&i!==n&&N_(i,r),e>0&&(n[t-1][jn]=r[jn]);let o=_l(n,hn+e);aV(r[ae],r);let s=o[Fr];s!==null&&s.detachView(o[ae]),r[xt]=null,r[jn]=null,r[ce]&=-129}return r}function XV(n,e,t,r){let i=hn+r,o=t.length;r>0&&(t[i-1][jn]=e),r<o-hn?(e[jn]=t[i],tv(t,hn+r,e)):(t.push(e),e[jn]=null),e[xt]=t;let s=e[ao];s!==null&&t!==s&&EA(s,e);let a=e[Fr];a!==null&&a.insertView(n),Lh(e),e[ce]|=128}function EA(n,e){let t=n[fs],r=e[xt];if(Lr(r))n[ce]|=2;else{let i=r[xt][$n];e[$n]!==i&&(n[ce]|=2)}t===null?n[fs]=[e]:t.push(e)}var ho=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[ae];return Fl(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Yt]}set context(e){this._lView[Yt]=e}get destroyed(){return ps(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[xt];if(lr(e)){let t=e[Dl],r=t?t.indexOf(this):-1;r>-1&&(n_(e,r),_l(t,r))}this._attachedToViewContainer=!1}iA(this._lView[ae],this._lView)}onDestroy(e){yv(this._lView,e)}markForCheck(){L_(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ce]&=-129}reattach(){Lh(this._lView),this._lView[ce]|=128}detectChanges(){this._lView[ce]|=1024,mA(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new U(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Sa(this._lView),t=this._lView[ao];t!==null&&!e&&N_(t,this._lView),rA(this._lView[ae],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new U(902,!1);this._appRef=e;let t=Sa(this._lView),r=this._lView[ao];r!==null&&!t&&EA(r,this._lView),Lh(this._lView)}};var fo=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=e2;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=UV(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new ho(o)}}return n})();function e2(){return V_(zt(),Ne())}function V_(n,e){return n.type&4?new fo(e,n,ka(n,e)):null}function U_(n,e,t,r,i){let o=n.data[e];if(o===null)o=t2(n,e,t,r,i),ID()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=vD();o.injectorIndex=s===null?-1:s.injectorIndex}return Ma(o,!0),o}function t2(n,e,t,r,i){let o=wv(),s=Iv(),a=s?o:o&&o.parent,c=n.data[e]=r2(n,a,t,e,r,i);return n2(n,c,o,s),c}function n2(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function r2(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return mD()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var qY=new RegExp(`^(\\d+)*(${CL}|${bL})*(.*)`);var i2=()=>null;function JD(n,e){return i2(n,e)}var wA=class{},Af=class{},r_=class{resolveComponentFactory(e){throw new U(917,!1)}},zl=class{static NULL=new r_},yi=class{},qn=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>o2()}return n})();function o2(){let n=Ne(),e=zt(),t=zn(e.index,n);return(Lr(t)?t:n)[it]}var IA=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>null})}return n})();var tf={},i_=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,tf,r);return i!==tf||t===tf?i:this.parentInjector.get(e,t,r)}};function ZD(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=qy(i,a);else if(o==2){let c=a,u=e[++s];r=qy(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function B(n,e=0){let t=Ne();if(t===null)return Z(n,e);let r=zt();return TS(r,t,Ht(n),e)}function j_(){let n="invalid";throw new Error(n)}function bA(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,c=null,u=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,c,u]=h.resolveHostDirectives(s);break}c2(n,e,t,a,o,c,u)}o!==null&&r!==null&&s2(t,r,o)}function s2(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new U(-301,!1);r.push(e[i],o)}}function a2(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function c2(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let m=0;m<a;m++){let y=r[m];!c&&Vr(y)&&(c=!0,a2(n,t,m)),Gv(af(t,e),n,y.type)}p2(t,n.data.length,a);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let u=!1,h=!1,p=QS(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(t.mergedAttrs=Ol(t.mergedAttrs,y.hostAttrs),u2(n,t,e,p,y),f2(p,y,i),s!==null&&s.has(y)){let[P,A]=s.get(y);t.directiveToIndex.set(y.type,[p,P+t.directiveStart,A+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let I=y.type.prototype;!u&&(I.ngOnChanges||I.ngOnInit||I.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!h&&(I.ngOnChanges||I.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}l2(n,t,o)}function l2(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))XD(0,e,i,r),XD(1,e,i,r),tS(e,r,!1);else{let o=t.get(i);eS(0,e,o,r),eS(1,e,o,r),tS(e,r,!0)}}}function XD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),CA(e,o)}}function eS(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),CA(e,s)}}function CA(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function tS(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||b_(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let u=i[c];for(let h of u)if(h===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let u=o[c];for(let h=0;h<u.length;h+=2)if(u[h]===e){s??=[],s.push(u[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function u2(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=no(i.type,!0)),s=new ys(o,Vr(i),B,null);n.blueprint[r]=s,t[r]=s,d2(n,e,r,QS(n,t,i.hostVars,wi),i)}function d2(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;h2(s)!=a&&s.push(a),s.push(t,r,o)}}function h2(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function f2(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Vr(e)&&(t[""]=n)}}function p2(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function TA(n,e,t,r,i,o,s,a){let c=e[ae],u=c.consts,h=Al(u,s),p=U_(c,n,t,r,h);return o&&bA(c,e,p,Al(u,a),i),p.mergedAttrs=Ol(p.mergedAttrs,p.attrs),p.attrs!==null&&ZD(p,p.attrs,!1),p.mergedAttrs!==null&&ZD(p,p.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,p),p}function DA(n,e){gS(n,e),dv(e)&&n.queries.elementEnd(e)}function B_(n){return AA(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function SA(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function AA(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function $_(n,e,t){return n[e]=t}function vi(n,e,t){if(t===wi)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function MA(n,e,t,r){let i=vi(n,e,t);return vi(n,e+1,r)||i}function m2(n,e,t,r,i){let o=MA(n,e,t,r);return vi(n,e+2,i)||o}function Lv(n,e,t){return function r(i){let o=lo(n)?zn(n.index,e):e;L_(o,5);let s=e[Yt],a=nS(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=nS(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function nS(n,e,t,r){let i=pe(null);try{return je(6,e,t),t(r)!==!1}catch(o){return kV(n,o),!1}finally{je(7,e,t),pe(i)}}function g2(n,e,t,r,i,o,s,a){let c=Sl(n),u=!1,h=null;if(!r&&c&&(h=v2(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,u=!0}else{let p=ur(n,t),m=r?r(p):p;DL(t,m,o,a);let y=i.listen(m,o,a);if(!y2(o)){let I=r?P=>r(Hn(P[n.index])):n.index;RA(I,e,t,o,a,y,!1)}}return u}function y2(n){return n.startsWith("animation")||n.startsWith("transition")}function v2(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Ta],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function RA(n,e,t,r,i,o,s){let a=e.firstCreatePass?_v(e):null,c=vv(t),u=c.length;c.push(i,o),a&&a.push(r,n,u,(u+1)*(s?-1:1))}function rS(n,e,t,r,i,o){let s=e[t],a=e[ae],u=a.data[t].outputs[r],p=s[u].subscribe(o);RA(n.index,a,e,i,o,p,!0)}var o_=Symbol("BINDING");var pf=class extends zl{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=mi(e);return new vs(t,this.ngModule)}};function _2(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Tf.SignalBased)!==0};return i&&(o.transform=i),o})}function E2(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function w2(n,e,t){let r=e instanceof ut?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new i_(t,r):t}function I2(n){let e=n.get(yi,null);if(e===null)throw new U(407,!1);let t=n.get(IA,null),r=n.get(hi,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function b2(n,e){let t=NA(n);return qS(e,t,t==="svg"?oD:t==="math"?sD:null)}function NA(n){return(n.selectors[0][0]||"div").toLowerCase()}var vs=class extends Af{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=_2(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=E2(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=jL(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){je(22);let a=pe(null);try{let c=this.componentDef,u=C2(r,c,s,o),h=w2(c,i||this.ngModule,e),p=I2(h),m=p.rendererFactory.createRenderer(null,c),y=r?wV(m,r,c.encapsulation,h):b2(c,m),I=s?.some(iS)||o?.some(F=>typeof F!="function"&&F.bindings.some(iS)),P=T_(null,u,null,512|KS(c),null,null,p,m,h,null,FS(y,h,!0));P[Jt]=y,Bh(P);let A=null;try{let F=TA(Jt,P,2,"#host",()=>u.directiveRegistry,!0,0);WS(m,y,F),Pa(y,P),O_(u,P,F),VS(u,F,P),DA(u,F),t!==void 0&&D2(F,this.ngContentSelectors,t),A=zn(F.index,P),P[Yt]=A[Yt],F_(u,P,null)}catch(F){throw A!==null&&Kv(A),Kv(P),F}finally{je(23),$h()}return new mf(this.componentType,P,!!I)}finally{pe(a)}}};function C2(n,e,t,r){let i=n?["ng-version","20.3.14"]:BL(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[o_].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){a+=m[o_].requiredVars;let y=h+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let c=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=ov(p);c.push(m)}return C_(0,null,T2(o,s),1,a,c,null,null,null,[i],null)}function T2(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function iS(n){let e=n[o_].kind;return e==="input"||e==="twoWay"}var mf=class extends wA{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=kh(t[ae],Jt),this.location=ka(this._tNode,t),this.instance=zn(this._tNode.index,t)[Yt],this.hostView=this.changeDetectorRef=new ho(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=k_(r,i[ae],i,e,t);this.previousInputValues.set(e,t);let s=zn(r.index,i);L_(s,1)}get injector(){return new gs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function D2(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ii=(()=>{class n{static __NG_ELEMENT_ID__=S2}return n})();function S2(){let n=zt();return xA(n,Ne())}var A2=Ii,PA=class extends A2{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ka(this._hostTNode,this._hostLView)}get injector(){return new gs(this._hostTNode,this._hostLView)}get parentInjector(){let e=g_(this._hostTNode,this._hostLView);if(_S(e)){let t=of(e,this._hostLView),r=rf(e),i=t[ae].data[r+8];return new gs(i,t)}else return new gs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=oS(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-hn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=JD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,YD(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let c=e&&!JF(e),u;if(c)u=t;else{let A=t||{};u=A.index,r=A.injector,i=A.projectableNodes,o=A.environmentInjector||A.ngModuleRef,s=A.directives,a=A.bindings}let h=c?e:new vs(mi(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let F=(c?p:this.parentInjector).get(ut,null);F&&(o=F)}let m=mi(h.componentType??{}),y=JD(this._lContainer,m?.id??null),I=y?.firstChild??null,P=h.create(p,i,I,o,s,a);return this.insertImpl(P.hostView,u,YD(this._hostTNode,y)),P}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(cD(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[xt],u=new PA(c,c[Bn],c[xt]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return ZV(s,i,o,r),e.attachToViewContainerRef(),tv(Vv(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=oS(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=n_(this._lContainer,t);r&&(_l(Vv(this._lContainer),t),iA(r[ae],r))}detach(e){let t=this._adjustIndex(e,-1),r=n_(this._lContainer,t);return r&&_l(Vv(this._lContainer),t)!=null?new ho(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function oS(n){return n[Dl]}function Vv(n){return n[Dl]||(n[Dl]=[])}function xA(n,e){let t,r=e[n.index];return lr(r)?t=r:(t=_A(r,e,null,n),e[n.index]=t,D_(e,t)),R2(t,e,n,r),new PA(t,n,e)}function M2(n,e){let t=n[it],r=t.createComment(""),i=ur(e,n),o=t.parentNode(i);return uf(t,o,r,t.nextSibling(i),!1),r}var R2=x2,N2=()=>!1;function P2(n,e,t){return N2(n,e,t)}function x2(n,e,t,r){if(n[co])return;let i;t.type&8?i=Hn(r):i=M2(e,t),n[co]=i}var s_=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},a_=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)H_(e,t).matches!==null&&this.queries[t].setDirty()}},c_=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=B2(e):this.predicate=e}},l_=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},u_=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,O2(t,o)),this.matchTNodeWithReadOption(e,t,ef(t,e,o,!1,!1))}else r===fo?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ef(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Xt||i===Ii||i===fo&&t.type&4)this.addMatch(t.index,-2);else{let o=ef(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function O2(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function k2(n,e){return n.type&11?ka(n,e):n.type&4?V_(n,e):null}function F2(n,e,t,r){return t===-1?k2(e,n):t===-2?L2(n,e,r):kl(n,n[ae],t,e)}function L2(n,e,t){if(t===Xt)return ka(e,n);if(t===fo)return V_(e,n);if(t===Ii)return xA(e,n)}function OA(n,e,t,r){let i=e[Fr].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let h=o[u];a.push(F2(e,h,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function d_(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=OA(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let u=o[a+1],h=e[-c];for(let p=hn;p<h.length;p++){let m=h[p];m[ao]===m[xt]&&d_(m[ae],m,u,r)}if(h[fs]!==null){let p=h[fs];for(let m=0;m<p.length;m++){let y=p[m];d_(y[ae],y,u,r)}}}}}return r}function V2(n,e){return n[Fr].queries[e].queryList}function U2(n,e,t){let r=new cf((t&4)===4);return dD(n,e,r,r.destroy),(e[Fr]??=new a_).queries.push(new s_(r))-1}function j2(n,e,t,r){let i=Zt();if(i.firstCreatePass){let o=zt();$2(i,new c_(e,t,r),o.index),H2(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return U2(i,Ne(),t)}function B2(n){return n.split(",").map(e=>e.trim())}function $2(n,e,t){n.queries===null&&(n.queries=new l_),n.queries.track(new u_(e,t))}function H2(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function H_(n,e){return n.queries.getByIndex(e)}function z2(n,e){let t=n[ae],r=H_(t,e);return r.crossesNgTemplate?d_(t,n,e,[]):OA(t,n,r,e)}var _s=class{},Mf=class{};var gf=class extends _s{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new pf(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=iv(e);this._bootstrapComponents=HS(o.bootstrap),this._r3Injector=Av(e,t,[{provide:_s,useValue:this},{provide:zl,useValue:this.componentFactoryResolver},...r],di(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},yf=class extends Mf{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new gf(this.moduleType,e,[])}};var Ll=class extends _s{injector;componentFactoryResolver=new pf(this);instance=null;constructor(e){super();let t=new as([...e.providers,{provide:_s,useValue:this},{provide:zl,useValue:this.componentFactoryResolver}],e.parent||wl(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Fa(n,e,t=null){return new Ll({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var q2=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=sv(!1,t.type),i=r.length>0?Fa([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=H({token:n,providedIn:"environment",factory:()=>new n(Z(ut))})}return n})();function Ke(n){return Ul(()=>{let e=kA(n),t=Q(k({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===y_.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(q2).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||gi.Emulated,styles:n.styles||Mn,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&mo("NgStandalone"),FA(t);let r=n.dependencies;return t.directiveDefs=sS(r,G2),t.pipeDefs=sS(r,ZT),t.id=Q2(t),t})}function G2(n){return mi(n)||ov(n)}function Gn(n){return Ul(()=>({type:n.type,bootstrap:n.bootstrap||Mn,declarations:n.declarations||Mn,imports:n.imports||Mn,exports:n.exports||Mn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function W2(n,e){if(n==null)return io;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=Tf.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function K2(n){if(n==null)return io;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Ze(n){return Ul(()=>{let e=kA(n);return FA(e),e})}function Rf(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function kA(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||io,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Mn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:W2(n.inputs,e),outputs:K2(n.outputs),debugInfo:null}}function FA(n){n.features?.forEach(e=>e(n))}function sS(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function Q2(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Y2(n){return Object.getPrototypeOf(n.prototype).constructor}function Wn(n){let e=Y2(n.type),t=!0,r=[n];for(;e;){let i;if(Vr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new U(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Uv(n.inputs),s.declaredInputs=Uv(n.declaredInputs),s.outputs=Uv(n.outputs);let a=i.hostBindings;a&&tU(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&X2(n,c),u&&eU(n,u),J2(n,i),HT(n.outputs,i.outputs),Vr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Wn&&(t=!1)}}e=Object.getPrototypeOf(e)}Z2(r)}function J2(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function Z2(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ol(i.hostAttrs,t=Ol(t,i.hostAttrs))}}function Uv(n){return n===io?{}:n===Mn?[]:n}function X2(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function eU(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function tU(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function nU(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=Ol(n.mergedAttrs,n.attrs);let h=n.tView=C_(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Ma(n,!1);let c=iU(t,e,n,r);zh()&&P_(t,e,c,n),Pa(c,e);let u=_A(c,e,c,n);e[r+Jt]=u,D_(e,u),P2(u,n,e)}function rU(n,e,t,r,i,o,s,a,c,u,h){let p=t+Jt,m;return e.firstCreatePass?(m=U_(e,p,4,s||null,a||null),Ev()&&bA(e,n,m,Al(e.consts,u),lA),gS(e,m)):m=e.data[p],nU(m,n,e,t,r,i,o,c),Sl(m)&&O_(e,n,m),u!=null&&aA(n,m,h),m}function Ce(n,e,t,r,i,o,s,a){let c=Ne(),u=Zt(),h=Al(u.consts,o);return rU(c,u,n,e,t,r,i,h,void 0,s,a),Ce}var iU=oU;function oU(n,e,t,r){return qh(!0),e[it].createComment("")}var z_=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var q_=new q("");function go(n){return!!n&&typeof n.then=="function"}function G_(n){return!!n&&typeof n.subscribe=="function"}var W_=new q("");function Nf(n){return ls([{provide:W_,multi:!0,useValue:n}])}var K_=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=V(W_,{optional:!0})??[];injector=V(yn);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=Ot(this.injector,i);if(go(o))t.push(o);else if(G_(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ql=new q("");function LA(){yy(()=>{let n="";throw new U(600,n)})}function VA(n){return n.isBoundToModule}var sU=10;var bi=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=V(vn);afterRenderManager=V(R_);zonelessEnabled=V(Wh);rootEffectScheduler=V(xv);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ct;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=V(Ur);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(me(t=>!t))}constructor(){V(ws,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=V(ut);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=yn.NULL){return this._injector.get(nt).run(()=>{je(10);let s=t instanceof Af;if(!this._injector.get(K_).done){let I="";throw new U(405,I)}let c;s?c=t:c=this._injector.get(zl).resolveComponentFactory(t),this.componentTypes.push(c.componentType);let u=VA(c)?void 0:this._injector.get(_s),h=r||c.selector,p=c.create(i,[],h,u),m=p.location.nativeElement,y=p.injector.get(q_,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),xl(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),je(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){je(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Df.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new U(101,!1);let t=pe(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,pe(t),this.afterTick.next(),je(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(yi,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<sU;)je(14),this.synchronizeOnce(),je(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Ml(i))continue;let o=r&&!this.zonelessEnabled?0:1;mA(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Ml(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;xl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(ql,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>xl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new U(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Gl(n,e,t,r){let i=Ne(),o=Rl();if(vi(i,o,e)){let s=Zt(),a=Hh();RV(a,i,n,e,t,r)}return Gl}var ZY=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function Y(n,e,t){let r=Ne(),i=Rl();if(vi(r,i,e)){let o=Zt(),s=Hh();cA(s,r,n,e,r[it],t)}return Y}function aS(n,e,t,r,i){k_(e,n,t,i?"class":"style",r)}function T(n,e,t,r){let i=Ne(),o=i[ae],s=n+Jt,a=o.firstCreatePass?TA(s,i,2,e,lA,Ev(),t,r):o.data[s];if(xV(a,i,n,e,aU),Sl(a)){let c=i[ae];O_(c,i,a),VS(c,a,i)}return r!=null&&aA(i,a),T}function b(){let n=Zt(),e=zt(),t=OV(e);return n.firstCreatePass&&DA(n,t),gD(t)&&yD(),pD(),t.classesWithoutHost!=null&&rL(t)&&aS(n,t,Ne(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&iL(t)&&aS(n,t,Ne(),t.stylesWithoutHost,!1),b}function ot(n,e,t,r){return T(n,e,t,r),b(),ot}var aU=(n,e,t,r,i)=>(qh(!0),qS(e[it],r,RD()));function ht(){return Ne()}var Yh=void 0;function cU(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var lU=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Yh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Yh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Yh,"{1} 'at' {0}",Yh],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",cU],jv={};function Pn(n){let e=uU(n),t=cS(e);if(t)return t;let r=e.split("-")[0];if(t=cS(r),t)return t;if(r==="en")return lU;throw new U(701,!1)}function cS(n){return n in jv||(jv[n]=pi.ng&&pi.ng.common&&pi.ng.common.locales&&pi.ng.common.locales[n]),jv[n]}var ft=(function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n})(ft||{});function uU(n){return n.toLowerCase().replace(/_/g,"-")}var Wl="en-US";var dU=Wl;function UA(n){typeof n=="string"&&(dU=n.toLowerCase().replace(/_/g,"-"))}function ye(n,e,t){let r=Ne(),i=Zt(),o=zt();return jA(i,r,r[it],o,n,e,t),ye}function jA(n,e,t,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=Lv(r,e,o),g2(r,n,e,s,t,i,o,c)&&(a=!1)),a){let u=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],y=h[p+1];c??=Lv(r,e,o),rS(r,e,m,y,i,c)}if(u&&u.length)for(let p of u)c??=Lv(r,e,o),rS(r,e,p,i,i,c)}}function X(n=1){return MD(n)}function Q_(n,e,t,r){j2(n,e,t,r)}function Y_(n){let e=Ne(),t=Zt(),r=Tv();jh(r+1);let i=H_(t,r);if(n.dirty&&aD(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=z2(e,r);n.reset(o,yL),n.notifyOnChanges()}return!0}return!1}function J_(){return V2(Ne(),Tv())}function Jh(n,e){return n<<17|e<<2}function Es(n){return n>>17&32767}function hU(n){return(n&2)==2}function fU(n,e){return n&131071|e<<17}function h_(n){return n|2}function Oa(n){return(n&131068)>>2}function Bv(n,e){return n&-131069|e<<2}function pU(n){return(n&1)===1}function f_(n){return n|1}function mU(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Es(s),c=Oa(s);n[r]=t;let u=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||Ca(p,h)>0)&&(u=!0)}else h=t;if(i)if(c!==0){let m=Es(n[a+1]);n[r+1]=Jh(m,a),m!==0&&(n[m+1]=Bv(n[m+1],r)),n[a+1]=fU(n[a+1],r)}else n[r+1]=Jh(a,0),a!==0&&(n[a+1]=Bv(n[a+1],r)),a=r;else n[r+1]=Jh(c,0),a===0?a=r:n[c+1]=Bv(n[c+1],r),c=r;u&&(n[r+1]=h_(n[r+1])),lS(n,h,r,!0),lS(n,h,r,!1),gU(e,h,n,r,o),s=Jh(a,c),o?e.classBindings=s:e.styleBindings=s}function gU(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Ca(o,e)>=0&&(t[r+1]=f_(t[r+1]))}function lS(n,e,t,r){let i=n[t+1],o=e===null,s=r?Es(i):Oa(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],u=n[s+1];yU(c,e)&&(a=!0,n[s+1]=r?f_(u):h_(u)),s=r?Es(u):Oa(u)}a&&(n[t+1]=r?h_(i):f_(i))}function yU(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ca(n,e)>=0:!1}function en(n,e){return vU(n,e,null,!0),en}function vU(n,e,t,r){let i=Ne(),o=Zt(),s=wD(2);if(o.firstUpdatePass&&EU(o,n,s,r),e!==wi&&vi(i,s,e)){let a=o.data[ms()];TU(o,a,i,i[it],n,i[s+1]=DU(e,t),r,s)}}function _U(n,e){return e>=n.expandoStartIndex}function EU(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[ms()],s=_U(n,t);SU(o,r)&&e===null&&!s&&(e=!1),e=wU(i,o,e,r),mU(i,o,e,t,s,r)}}function wU(n,e,t,r){let i=TD(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=$v(null,n,e,t,r),t=Vl(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=$v(i,n,e,t,r),o===null){let c=IU(n,e,r);c!==void 0&&Array.isArray(c)&&(c=$v(null,n,e,c[1],r),c=Vl(c,e.attrs,r),bU(n,e,r,c))}else o=CU(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function IU(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Oa(r)!==0)return n[Es(r)]}function bU(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Es(i)]=r}function CU(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Vl(r,s,t)}return Vl(r,e.attrs,t)}function $v(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Vl(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Vl(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),JT(n,s,t?!0:e[++o]))}return n===void 0?null:n}function TU(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],h=pU(u)?uS(c,e,t,i,Oa(u),s):void 0;if(!vf(h)){vf(o)||hU(u)&&(o=uS(c,null,t,i,a,s));let p=hv(ms(),t);EV(r,s,p,i,o)}}function uS(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),h=u?c[1]:c,p=h===null,m=t[i+1];m===wi&&(m=p?Mn:void 0);let y=p?xh(m,r):h===r?m:void 0;if(u&&!vf(y)&&(y=xh(c,r)),vf(y)&&(a=y,s))return a;let I=n[i+1];i=s?Es(I):Oa(I)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=xh(c,r))}return a}function vf(n){return n!==void 0}function DU(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=di($l(n)))),n}function SU(n,e){return(n.flags&(e?8:16))!==0}function N(n,e=""){let t=Ne(),r=Zt(),i=n+Jt,o=r.firstCreatePass?U_(r,i,1,e,null):r.data[i],s=AU(r,t,o,e,n);t[i]=s,zh()&&P_(r,t,s,o),Ma(o,!1)}var AU=(n,e,t,r,i)=>(qh(!0),$L(e[it],r));function MU(n,e,t,r=""){return vi(n,Rl(),t)?e+vl(t)+r:wi}function Te(n){return xe("",n),Te}function xe(n,e,t){let r=Ne(),i=MU(r,n,e,t);return i!==wi&&RU(r,ms(),i),xe}function RU(n,e,t){let r=hv(e,n);HL(n[it],r,t)}function Fe(n,e,t){Rv(e)&&(e=e());let r=Ne(),i=Rl();if(vi(r,i,e)){let o=Zt(),s=Hh();cA(s,r,n,e,r[it],t)}return Fe}function Be(n,e){let t=Rv(n);return t&&n.set(e),t}function Le(n,e){let t=Ne(),r=Zt(),i=zt();return jA(r,t,t[it],i,n,e),Le}function NU(n,e,t){let r=Zt();if(r.firstCreatePass){let i=Vr(n);p_(t,r.data,r.blueprint,i,!0),p_(e,r.data,r.blueprint,i,!1)}}function p_(n,e,t,r,i){if(n=Ht(n),Array.isArray(n))for(let o=0;o<n.length;o++)p_(n[o],e,t,r,i);else{let o=Zt(),s=Ne(),a=zt(),c=ss(n)?n:Ht(n.provide),u=cv(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(ss(n)||!n.multi){let y=new ys(u,i,B,null),I=zv(c,e,i?h:h+m,p);I===-1?(Gv(af(a,s),o,c),Hv(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[I]=y,s[I]=y)}else{let y=zv(c,e,h+m,p),I=zv(c,e,h,h+m),P=y>=0&&t[y],A=I>=0&&t[I];if(i&&!A||!i&&!P){Gv(af(a,s),o,c);let F=OU(i?xU:PU,t.length,i,r,u,n);!i&&A&&(t[I].providerFactory=F),Hv(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(F),s.push(F)}else{let F=BA(t[i?I:y],u,!i&&r);Hv(o,n,y>-1?y:I,F)}!i&&r&&A&&t[I].componentProviders++}}}function Hv(n,e,t,r){let i=ss(e),o=nD(e);if(i||o){let c=(o?Ht(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=u.indexOf(t);h===-1?u.push(t,[r,c]):u[h+1].push(r,c)}else u.push(t,c)}}}function BA(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function zv(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function PU(n,e,t,r,i){return m_(this.multi,[])}function xU(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=kl(r,r[ae],this.providerFactory.index,i);s=c.slice(0,a),m_(o,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],m_(o,s);return s}function m_(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function OU(n,e,t,r,i,o){let s=new ys(n,t,B,null);return s.multi=[],s.index=e,s.componentProviders=0,BA(s,i,r&&!t),s}function yo(n,e=[]){return t=>{t.providersResolver=(r,i)=>NU(r,i?i(n):n,e)}}function Ci(n,e,t,r){return kU(Ne(),Vh(),n,e,t,r)}function Z_(n,e){let t=n[e];return t===wi?void 0:t}function kU(n,e,t,r,i,o){let s=e+t;return vi(n,s,i)?$_(n,s+1,o?r.call(o,i):r(i)):Z_(n,s+1)}function FU(n,e,t,r,i,o,s){let a=e+t;return MA(n,a,i,o)?$_(n,a+2,s?r.call(s,i,o):r(i,o)):Z_(n,a+2)}function LU(n,e,t,r,i,o,s,a){let c=e+t;return m2(n,c,i,o,s)?$_(n,c+3,a?r.call(a,i,o,s):r(i,o,s)):Z_(n,c+3)}function Kn(n,e){let t=Zt(),r,i=n+Jt;t.firstCreatePass?(r=VU(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=no(r.type,!0)),s,a=dn(B);try{let c=sf(!1),u=o();return sf(c),pv(t,Ne(),i,u),u}finally{dn(a)}}function VU(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function pr(n,e,t,r){let i=n+Jt,o=Ne(),s=fv(o,i);return $A(o,i)?FU(o,Vh(),e,s.transform,t,r,s):s.transform(t,r)}function X_(n,e,t,r,i){let o=n+Jt,s=Ne(),a=fv(s,o);return $A(s,o)?LU(s,Vh(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function $A(n,e){return n[ae].data[e].pure}var _f=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},eE=(()=>{class n{compileModuleSync(t){return new yf(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=iv(t),o=HS(i.declarations).reduce((s,a)=>{let c=mi(a);return c&&s.push(new vs(c)),s},[]);return new _f(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var UU=(()=>{class n{zone=V(nt);changeDetectionScheduler=V(hi);applicationRef=V(bi);applicationErrorHandler=V(vn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function HA({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new nt(Q(k({},zA()),{scheduleInRootZone:t})),[{provide:nt,useFactory:n},{provide:oo,multi:!0,useFactory:()=>{let r=V(UU,{optional:!0});return()=>r.initialize()}},{provide:oo,multi:!0,useFactory:()=>{let r=V(jU);return()=>{r.initialize()}}},e===!0?{provide:Nv,useValue:!0}:[],{provide:Pv,useValue:t??JS},{provide:vn,useFactory:()=>{let r=V(nt),i=V(ut),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(sr),o.handleError(s))})}}}]}function zA(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var jU=(()=>{class n{subscription=new Et;initialized=!1;zone=V(nt);pendingTasks=V(Ur);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{nt.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{nt.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var qA=(()=>{class n{applicationErrorHandler=V(vn);appRef=V(bi);taskService=V(Ur);ngZone=V(nt);zonelessEnabled=V(Wh);tracing=V(ws,{optional:!0});disableScheduling=V(Nv,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Et;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(df):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(V(Pv,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof hf||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?zD:ZS;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(df+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,zD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function BU(){return typeof $localize<"u"&&$localize.locale||Wl}var Kl=new q("",{providedIn:"root",factory:()=>V(Kl,{optional:!0,skipSelf:!0})||BU()});function kt(n){return jT(n)}function La(n,e){return th(n,e?.equal)}var GA=class{[Kt];constructor(e){this[Kt]=e}destroy(){this[Kt].destroy()}};var ZA=Symbol("InputSignalNode#UNSET"),XU=Q(k({},nh),{transformFn:void 0,applyValueToInputSignal(n,e){ha(n,e)}});function XA(n,e){let t=Object.create(XU);t.value=n,t.transformFn=e?.transform;function r(){if(la(t),t.value===ZA){let i=null;throw new U(-950,i)}return t.value}return r[Kt]=t,r}var xf=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>jl(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},ej=new q("");ej.__NG_ELEMENT_ID__=n=>{let e=zt();if(e===null)throw new U(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new U(204,!1)};function WA(n,e){return XA(n,e)}function tj(n){return XA(ZA,n)}var eM=(WA.required=tj,WA);var tE=new q(""),nj=new q("");function Ql(n){return!n.moduleRef}function rj(n){let e=Ql(n)?n.r3Injector:n.moduleRef.injector,t=e.get(nt);return t.run(()=>{Ql(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(vn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Ql(n)){let o=()=>e.destroy(),s=n.platformInjector.get(tE);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(tE);s.add(o),n.moduleRef.onDestroy(()=>{xl(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return oj(r,t,()=>{let o=e.get(Ur),s=o.add(),a=e.get(K_);return a.runInitializers(),a.donePromise.then(()=>{let c=e.get(Kl,Wl);if(UA(c||Wl),!e.get(nj,!0))return Ql(n)?e.get(bi):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Ql(n)){let h=e.get(bi);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return ij?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var ij;function oj(n,e,t){try{let r=t();return go(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Pf=null;function sj(n=[],e){return yn.create({name:e,providers:[{provide:El,useValue:"platform"},{provide:tE,useValue:new Set([()=>Pf=null])},...n]})}function aj(n=[]){if(Pf)return Pf;let e=sj(n);return Pf=e,LA(),cj(e),e}function cj(n){let e=n.get(wf,null);Ot(n,()=>{e?.forEach(t=>t())})}var Ti=(()=>{class n{static __NG_ELEMENT_ID__=lj}return n})();function lj(n){return uj(zt(),Ne(),(n&16)===16)}function uj(n,e,t){if(lo(n)&&!t){let r=zn(n.index,e);return new ho(r,r)}else if(n.type&175){let r=e[$n];return new ho(r,e)}return null}var nE=class{constructor(){}supports(e){return B_(e)}create(e){return new rE(e)}},dj=(n,e)=>e,rE=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||dj}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<KA(r,i,o)?t:r,a=KA(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,h=c-i;if(u!=h){for(let m=0;m<u;m++){let y=m<o.length?o[m]:o[m]=0,I=y+m;h<=I&&I<u&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!B_(e))throw new U(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,SA(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new iE(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Of),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Of),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},iE=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},oE=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Of=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new oE,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function KA(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function QA(){return new sE([new nE])}var sE=(()=>{class n{factories;static \u0275prov=H({token:n,providedIn:"root",factory:QA});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=V(n,{optional:!0,skipSelf:!0});return n.create(t,r||QA())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new U(901,!1)}}return n})();function tM(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;je(8);try{let o=i?.injector??aj(r),s=[HA({}),{provide:hi,useExisting:qA},PD,...t||[]],a=new Ll({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return rj({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{je(9)}}function Is(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function nM(n){let e=mi(n);if(!e)return null;let t=new vs(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var oM=null;function Qn(){return oM}function aE(n){oM??=n}var Yl=class{},Jl=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>V(sM),providedIn:"platform"})}return n})(),cE=new q(""),sM=(()=>{class n extends Jl{_location;_history;_doc=V(Je);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Qn().getBaseHref(this._doc)}onPopState(t){let r=Qn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Qn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function kf(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function rM(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function gr(n){return n&&n[0]!=="?"?`?${n}`:n}var yr=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>V(Lf),providedIn:"root"})}return n})(),Ff=new q(""),Lf=(()=>{class n extends yr{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??V(Je).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return kf(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+gr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+gr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+gr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Z(Jl),Z(Ff,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vo=(()=>{class n{_subject=new ct;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=pj(rM(iM(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+gr(r))}normalize(t){return n.stripTrailingSlash(fj(this._basePath,iM(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+gr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+gr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=gr;static joinWithSlash=kf;static stripTrailingSlash=rM;static \u0275fac=function(r){return new(r||n)(Z(yr))};static \u0275prov=H({token:n,factory:()=>hj(),providedIn:"root"})}return n})();function hj(){return new vo(Z(yr))}function fj(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function iM(n){return n.replace(/\/index.html$/,"")}function pj(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var fE=(()=>{class n extends yr{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=kf(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+gr(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+gr(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(Z(Jl),Z(Ff,8))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();var tn=(function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n})(tn||{}),He=(function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n})(He||{}),_n=(function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n})(_n||{}),Si={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function dM(n){return Pn(n)[ft.LocaleId]}function hM(n,e,t){let r=Pn(n),i=[r[ft.DayPeriodsFormat],r[ft.DayPeriodsStandalone]],o=Yn(i,e);return Yn(o,t)}function fM(n,e,t){let r=Pn(n),i=[r[ft.DaysFormat],r[ft.DaysStandalone]],o=Yn(i,e);return Yn(o,t)}function pM(n,e,t){let r=Pn(n),i=[r[ft.MonthsFormat],r[ft.MonthsStandalone]],o=Yn(i,e);return Yn(o,t)}function mM(n,e){let r=Pn(n)[ft.Eras];return Yn(r,e)}function Zl(n,e){let t=Pn(n);return Yn(t[ft.DateFormat],e)}function Xl(n,e){let t=Pn(n);return Yn(t[ft.TimeFormat],e)}function eu(n,e){let r=Pn(n)[ft.DateTimeFormat];return Yn(r,e)}function tu(n,e){let t=Pn(n),r=t[ft.NumberSymbols][e];if(typeof r>"u"){if(e===Si.CurrencyDecimal)return t[ft.NumberSymbols][Si.Decimal];if(e===Si.CurrencyGroup)return t[ft.NumberSymbols][Si.Group]}return r}function gM(n){if(!n[ft.ExtraData])throw new U(2303,!1)}function yM(n){let e=Pn(n);return gM(e),(e[ft.ExtraData][2]||[]).map(r=>typeof r=="string"?lE(r):[lE(r[0]),lE(r[1])])}function vM(n,e,t){let r=Pn(n);gM(r);let i=[r[ft.ExtraData][0],r[ft.ExtraData][1]],o=Yn(i,e)||[];return Yn(o,t)||[]}function Yn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new U(2304,!1)}function lE(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var mj=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Vf={},gj=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function _M(n,e,t,r){let i=Tj(n);e=Di(t,e)||e;let s=[],a;for(;e;)if(a=gj.exec(e),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=wM(r,c),i=Cj(i,r));let u="";return s.forEach(h=>{let p=Ij(h);u+=p?p(i,t,c):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function Hf(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Di(n,e){let t=dM(n);if(Vf[t]??={},Vf[t][e])return Vf[t][e];let r="";switch(e){case"shortDate":r=Zl(n,_n.Short);break;case"mediumDate":r=Zl(n,_n.Medium);break;case"longDate":r=Zl(n,_n.Long);break;case"fullDate":r=Zl(n,_n.Full);break;case"shortTime":r=Xl(n,_n.Short);break;case"mediumTime":r=Xl(n,_n.Medium);break;case"longTime":r=Xl(n,_n.Long);break;case"fullTime":r=Xl(n,_n.Full);break;case"short":let i=Di(n,"shortTime"),o=Di(n,"shortDate");r=Uf(eu(n,_n.Short),[i,o]);break;case"medium":let s=Di(n,"mediumTime"),a=Di(n,"mediumDate");r=Uf(eu(n,_n.Medium),[s,a]);break;case"long":let c=Di(n,"longTime"),u=Di(n,"longDate");r=Uf(eu(n,_n.Long),[c,u]);break;case"full":let h=Di(n,"fullTime"),p=Di(n,"fullDate");r=Uf(eu(n,_n.Full),[h,p]);break}return r&&(Vf[t][e]=r),r}function Uf(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function vr(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function yj(n,e){return vr(n,3).substring(0,e)}function It(n,e,t=0,r=!1,i=!1){return function(o,s){let a=vj(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return yj(a,e);let c=tu(s,Si.MinusSign);return vr(a,e,c,r,i)}}function vj(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new U(2301,!1)}}function qe(n,e,t=tn.Format,r=!1){return function(i,o){return _j(i,o,n,e,t,r)}}function _j(n,e,t,r,i,o){switch(t){case 2:return pM(e,i,r)[n.getMonth()];case 1:return fM(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let u=yM(e),h=vM(e,i,r),p=u.findIndex(m=>{if(Array.isArray(m)){let[y,I]=m,P=s>=y.hours&&a>=y.minutes,A=s<I.hours||s===I.hours&&a<I.minutes;if(y.hours<I.hours){if(P&&A)return!0}else if(P||A)return!0}else if(m.hours===s&&m.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return hM(e,i,r)[s<12?0:1];case 3:return mM(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new U(2302,!1)}}function jf(n){return function(e,t,r){let i=-1*r,o=tu(t,Si.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+vr(s,2,o)+vr(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+vr(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+vr(s,2,o)+":"+vr(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+vr(s,2,o)+":"+vr(Math.abs(i%60),2,o);default:throw new U(2310,!1)}}}var Ej=0,$f=4;function wj(n){let e=Hf(n,Ej,1).getDay();return Hf(n,0,1+(e<=$f?$f:$f+7)-e)}function EM(n){let e=n.getDay(),t=e===0?-3:$f-e;return Hf(n.getFullYear(),n.getMonth(),n.getDate()+t)}function uE(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=EM(t),s=wj(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return vr(i,n,tu(r,Si.MinusSign))}}function Bf(n,e=!1){return function(t,r){let o=EM(t).getFullYear();return vr(o,n,tu(r,Si.MinusSign),e)}}var dE={};function Ij(n){if(dE[n])return dE[n];let e;switch(n){case"G":case"GG":case"GGG":e=qe(3,He.Abbreviated);break;case"GGGG":e=qe(3,He.Wide);break;case"GGGGG":e=qe(3,He.Narrow);break;case"y":e=It(0,1,0,!1,!0);break;case"yy":e=It(0,2,0,!0,!0);break;case"yyy":e=It(0,3,0,!1,!0);break;case"yyyy":e=It(0,4,0,!1,!0);break;case"Y":e=Bf(1);break;case"YY":e=Bf(2,!0);break;case"YYY":e=Bf(3);break;case"YYYY":e=Bf(4);break;case"M":case"L":e=It(1,1,1);break;case"MM":case"LL":e=It(1,2,1);break;case"MMM":e=qe(2,He.Abbreviated);break;case"MMMM":e=qe(2,He.Wide);break;case"MMMMM":e=qe(2,He.Narrow);break;case"LLL":e=qe(2,He.Abbreviated,tn.Standalone);break;case"LLLL":e=qe(2,He.Wide,tn.Standalone);break;case"LLLLL":e=qe(2,He.Narrow,tn.Standalone);break;case"w":e=uE(1);break;case"ww":e=uE(2);break;case"W":e=uE(1,!0);break;case"d":e=It(2,1);break;case"dd":e=It(2,2);break;case"c":case"cc":e=It(7,1);break;case"ccc":e=qe(1,He.Abbreviated,tn.Standalone);break;case"cccc":e=qe(1,He.Wide,tn.Standalone);break;case"ccccc":e=qe(1,He.Narrow,tn.Standalone);break;case"cccccc":e=qe(1,He.Short,tn.Standalone);break;case"E":case"EE":case"EEE":e=qe(1,He.Abbreviated);break;case"EEEE":e=qe(1,He.Wide);break;case"EEEEE":e=qe(1,He.Narrow);break;case"EEEEEE":e=qe(1,He.Short);break;case"a":case"aa":case"aaa":e=qe(0,He.Abbreviated);break;case"aaaa":e=qe(0,He.Wide);break;case"aaaaa":e=qe(0,He.Narrow);break;case"b":case"bb":case"bbb":e=qe(0,He.Abbreviated,tn.Standalone,!0);break;case"bbbb":e=qe(0,He.Wide,tn.Standalone,!0);break;case"bbbbb":e=qe(0,He.Narrow,tn.Standalone,!0);break;case"B":case"BB":case"BBB":e=qe(0,He.Abbreviated,tn.Format,!0);break;case"BBBB":e=qe(0,He.Wide,tn.Format,!0);break;case"BBBBB":e=qe(0,He.Narrow,tn.Format,!0);break;case"h":e=It(3,1,-12);break;case"hh":e=It(3,2,-12);break;case"H":e=It(3,1);break;case"HH":e=It(3,2);break;case"m":e=It(4,1);break;case"mm":e=It(4,2);break;case"s":e=It(5,1);break;case"ss":e=It(5,2);break;case"S":e=It(6,1);break;case"SS":e=It(6,2);break;case"SSS":e=It(6,3);break;case"Z":case"ZZ":case"ZZZ":e=jf(0);break;case"ZZZZZ":e=jf(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=jf(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=jf(2);break;default:return null}return dE[n]=e,e}function wM(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function bj(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function Cj(n,e,t){let i=n.getTimezoneOffset(),o=wM(e,i);return bj(n,-1*(o-i))}function Tj(n){if(aM(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Hf(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(mj))return Dj(r)}let e=new Date(n);if(!aM(e))throw new U(2311,!1);return e}function Dj(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,u),e}function aM(n){return n instanceof Date&&!isNaN(n.valueOf())}var hE=/\s+/,cM=[],pE=(()=>{class n{_ngEl;_renderer;initialClasses=cM;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(hE):cM}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(hE):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(hE).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(B(Xt),B(qn))};static \u0275dir=Ze({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var zf=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},En=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new zf(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),lM(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);lM(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(B(Ii),B(fo),B(sE))};static \u0275dir=Ze({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function lM(n,e){n.context.$implicit=e.item}var pt=(()=>{class n{_viewContainer;_context=new qf;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){uM(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){uM(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(B(Ii),B(fo))};static \u0275dir=Ze({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),qf=class{$implicit=null;ngIf=null};function uM(n,e){if(n&&!n.createEmbeddedView)throw new U(2020,!1)}function IM(n,e){return new U(2100,!1)}var Sj="mediumDate",bM=new q(""),CM=new q(""),_r=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??Sj,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return _M(t,s,o||this.locale,a)}catch(s){throw IM(n,s.message)}}static \u0275fac=function(r){return new(r||n)(B(Kl,16),B(bM,24),B(CM,24))};static \u0275pipe=Rf({name:"date",type:n,pure:!0})}return n})();var mE=(()=>{class n{transform(t,r,i){if(t==null)return null;if(!(typeof t=="string"||Array.isArray(t)))throw IM(n,t);return t.slice(r,i)}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=Rf({name:"slice",type:n,pure:!1})}return n})();var st=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Gn({type:n});static \u0275inj=Rn({})}return n})();function nu(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var bs=class{};var TM="browser";var DM=(()=>{class n{static \u0275prov=H({token:n,providedIn:"root",factory:()=>new gE(V(Je),window)})}return n})(),gE=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(Q(k({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=Aj(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(fi(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,o=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(Q(k({},t),{left:i-s[0],top:o-s[1]}))}};function Aj(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var ru=class{_doc;constructor(e){this._doc=e}manager},Gf=(()=>{class n extends ru{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(Z(Je))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),Kf=new q(""),wE=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof Gf));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof Gf);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new U(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(Z(Kf),Z(nt))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),yE="ng-app-id";function SM(n){for(let e of n)e.remove()}function AM(n,e){let t=e.createElement("style");return t.textContent=n,t}function Mj(n,e,t,r){let i=n.head?.querySelectorAll(`style[${yE}="${e}"],link[${yE}="${e}"]`);if(i)for(let o of i)o.removeAttribute(yE),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function _E(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var IE=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,Mj(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,AM);r?.forEach(i=>this.addUsage(i,this.external,_E))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(SM(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])SM(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,AM(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,_E(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(Z(Je),Z(Ef),Z(bf,8),Z(Bl))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),vE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},bE=/%COMP%/g;var RM="%COMP%",Rj=`_nghost-${RM}`,Nj=`_ngcontent-${RM}`,Pj=!0,xj=new q("",{providedIn:"root",factory:()=>Pj});function Oj(n){return Nj.replace(bE,n)}function kj(n){return Rj.replace(bE,n)}function NM(n,e){return e.map(t=>t.replace(bE,n))}var su=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c=null,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new iu(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Wf?i.applyToHost(t):i instanceof ou&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case gi.Emulated:o=new Wf(c,u,r,this.appId,h,s,a,p,m);break;case gi.ShadowDom:return new EE(c,u,t,r,s,a,this.nonce,p,m);default:o=new ou(c,u,r,h,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(Z(wE),Z(IE),Z(Ef),Z(xj),Z(Je),Z(nt),Z(bf),Z(ws,8))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),iu=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(vE[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(MM(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(MM(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new U(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=vE[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=vE[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Br.DashCase|Br.Important)?e.style.setProperty(t,r,i&Br.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Br.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Qn().getGlobalEventTarget(this.doc,e),!e))throw new U(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function MM(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var EE=class extends iu{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,c,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=NM(i.id,h);for(let m of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=_E(m,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ou=class extends iu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=u?NM(u,h):h,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&xa.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Wf=class extends ou{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,u){let h=i+"-"+r.id;super(e,t,r,o,s,a,c,u,h),this.contentAttr=Oj(h),this.hostAttr=kj(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Qf=class n extends Yl{supportsDOMEvents=!0;static makeCurrent(){aE(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Fj();return t==null?null:Lj(t)}resetBaseElement(){au=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return nu(document.cookie,e)}},au=null;function Fj(){return au=au||document.head.querySelector("base"),au?au.getAttribute("href"):null}function Lj(n){return new URL(n,document.baseURI).pathname}var Vj=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),PM=["alt","control","meta","shift"],Uj={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jj={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},xM=(()=>{class n extends ru{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Qn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),PM.forEach(u=>{let h=r.indexOf(u);h>-1&&(r.splice(h,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=Uj[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),PM.forEach(s=>{if(s!==i){let a=jj[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(Z(Je))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function CE(n,e,t){let r=k({rootComponent:n,platformRef:t?.platformRef},Bj(e));return tM(r)}function Bj(n){return{appProviders:[...Gj,...n?.providers??[]],platformProviders:qj}}function $j(){Qf.makeCurrent()}function Hj(){return new sr}function zj(){return v_(document),document}var qj=[{provide:Bl,useValue:TM},{provide:wf,useValue:$j,multi:!0},{provide:Je,useFactory:zj}];var Gj=[{provide:El,useValue:"root"},{provide:sr,useFactory:Hj},{provide:Kf,useClass:Gf,multi:!0,deps:[Je]},{provide:Kf,useClass:xM,multi:!0,deps:[Je]},su,IE,wE,{provide:yi,useExisting:su},{provide:bs,useClass:Vj},[]];var Ua=class{},uu=class{},Cs=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Jf=class{encodeKey(e){return OM(e)}encodeValue(e){return OM(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function Wj(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var Kj=/%(\d[a-f0-9])/gi,Qj={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function OM(n){return encodeURIComponent(n).replace(Kj,(e,t)=>Qj[t]??e)}function Yf(n){return`${n}`}var _o=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Jf,e.fromString){if(e.fromObject)throw new U(2805,!1);this.map=Wj(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Yf):[Yf(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Yf(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Yf(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Zf=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function Yj(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function kM(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function FM(n){return typeof Blob<"u"&&n instanceof Blob}function LM(n){return typeof FormData<"u"&&n instanceof FormData}function Jj(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var VM="Content-Type",UM="Accept",jM="X-Request-URL",BM="text/plain",$M="application/json",Zj=`${$M}, ${BM}, */*`,cu=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(Yj(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new U(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),this.transferCache=o.transferCache}if(this.headers??=new Cs,this.context??=new Zf,!this.params)this.params=new _o,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||kM(this.body)||FM(this.body)||LM(this.body)||Jj(this.body)?this.body:this.body instanceof _o?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||LM(this.body)?null:FM(this.body)?this.body.type||null:kM(this.body)?null:typeof this.body=="string"?BM:this.body instanceof _o?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?$M:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.priority||this.priority,a=e.cache||this.cache,c=e.mode||this.mode,u=e.redirect||this.redirect,h=e.credentials||this.credentials,p=e.referrer||this.referrer,m=e.integrity||this.integrity,y=e.transferCache??this.transferCache,I=e.timeout??this.timeout,P=e.body!==void 0?e.body:this.body,A=e.withCredentials??this.withCredentials,F=e.reportProgress??this.reportProgress,W=e.headers||this.headers,J=e.params||this.params,ie=e.context??this.context;return e.setHeaders!==void 0&&(W=Object.keys(e.setHeaders).reduce((Ue,we)=>Ue.set(we,e.setHeaders[we]),W)),e.setParams&&(J=Object.keys(e.setParams).reduce((Ue,we)=>Ue.set(we,e.setParams[we]),J)),new n(t,r,P,{params:J,headers:W,context:ie,reportProgress:F,responseType:i,withCredentials:A,transferCache:y,keepalive:o,cache:a,priority:s,timeout:I,mode:c,redirect:u,credentials:h,referrer:p,integrity:m})}},Va=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(Va||{}),ja=class{headers;status;statusText;url;ok;type;redirected;constructor(e,t=200,r="OK"){this.headers=e.headers||new Cs,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.ok=this.status>=200&&this.status<300}},Xf=class n extends ja{constructor(e={}){super(e)}type=Va.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ep=class n extends ja{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Va.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected})}},lu=class extends ja{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},Xj=200,eB=204;function TE(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer}}var tB=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof cu)o=t;else{let c;i.headers instanceof Cs?c=i.headers:c=new Cs(i.headers);let u;i.params&&(i.params instanceof _o?u=i.params:u=new _o({fromObject:i.params})),o=new cu(t,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials,referrer:i.referrer,integrity:i.integrity,timeout:i.timeout})}let s=ne(o).pipe(Or(c=>this.handler.handle(c)));if(t instanceof cu||i.observe==="events")return s;let a=s.pipe(Qt(c=>c instanceof ep));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(me(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new U(2806,!1);return c.body}));case"blob":return a.pipe(me(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new U(2807,!1);return c.body}));case"text":return a.pipe(me(c=>{if(c.body!==null&&typeof c.body!="string")throw new U(2808,!1);return c.body}));case"json":default:return a.pipe(me(c=>c.body))}case"response":return a;default:throw new U(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new _o().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,TE(i,r))}post(t,r,i={}){return this.request("POST",t,TE(i,r))}put(t,r,i={}){return this.request("PUT",t,TE(i,r))}static \u0275fac=function(r){return new(r||n)(Z(Ua))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();var nB=new q("");function rB(n,e){return e(n)}function iB(n,e,t){return(r,i)=>Ot(t,()=>e(r,o=>n(o,i)))}var HM=new q(""),oB=new q(""),zM=new q("",{providedIn:"root",factory:()=>!0});var tp=(()=>{class n extends Ua{backend;injector;chain=null;pendingTasks=V(Kh);contributeToStability=V(zM);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(HM),...this.injector.get(oB,[])]));this.chain=r.reduceRight((i,o)=>iB(i,o,this.injector),rB)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(rs(r))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(Z(uu),Z(ut))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();var sB=/^\)\]\}',?\n/,aB=RegExp(`^${jM}:`,"m");function cB(n){return"responseURL"in n&&n.responseURL?n.responseURL:aB.test(n.getAllResponseHeaders())?n.getResponseHeader(jM):null}var DE=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new U(-2800,!1);let r=this.xhrFactory;return ne(null).pipe($t(()=>new le(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((A,F)=>s.setRequestHeader(A,F.join(","))),t.headers.has(UM)||s.setRequestHeader(UM,Zj),!t.headers.has(VM)){let A=t.detectContentTypeHeader();A!==null&&s.setRequestHeader(VM,A)}if(t.timeout&&(s.timeout=t.timeout),t.responseType){let A=t.responseType.toLowerCase();s.responseType=A!=="json"?A:"text"}let a=t.serializeBody(),c=null,u=()=>{if(c!==null)return c;let A=s.statusText||"OK",F=new Cs(s.getAllResponseHeaders()),W=cB(s)||t.url;return c=new Xf({headers:F,status:s.status,statusText:A,url:W}),c},h=()=>{let{headers:A,status:F,statusText:W,url:J}=u(),ie=null;F!==eB&&(ie=typeof s.response>"u"?s.responseText:s.response),F===0&&(F=ie?Xj:0);let Ue=F>=200&&F<300;if(t.responseType==="json"&&typeof ie=="string"){let we=ie;ie=ie.replace(sB,"");try{ie=ie!==""?JSON.parse(ie):null}catch(C){ie=we,Ue&&(Ue=!1,ie={error:C,text:ie})}}Ue?(o.next(new ep({body:ie,headers:A,status:F,statusText:W,url:J||void 0})),o.complete()):o.error(new lu({error:ie,headers:A,status:F,statusText:W,url:J||void 0}))},p=A=>{let{url:F}=u(),W=new lu({error:A,status:s.status||0,statusText:s.statusText||"Unknown Error",url:F||void 0});o.error(W)},m=p;t.timeout&&(m=A=>{let{url:F}=u(),W=new lu({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:F||void 0});o.error(W)});let y=!1,I=A=>{y||(o.next(u()),y=!0);let F={type:Va.DownloadProgress,loaded:A.loaded};A.lengthComputable&&(F.total=A.total),t.responseType==="text"&&s.responseText&&(F.partialText=s.responseText),o.next(F)},P=A=>{let F={type:Va.UploadProgress,loaded:A.loaded};A.lengthComputable&&(F.total=A.total),o.next(F)};return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",m),s.addEventListener("abort",p),t.reportProgress&&(s.addEventListener("progress",I),a!==null&&s.upload&&s.upload.addEventListener("progress",P)),s.send(a),o.next({type:Va.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",m),t.reportProgress&&(s.removeEventListener("progress",I),a!==null&&s.upload&&s.upload.removeEventListener("progress",P)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(Z(bs))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),qM=new q(""),lB="XSRF-TOKEN",uB=new q("",{providedIn:"root",factory:()=>lB}),dB="X-XSRF-TOKEN",hB=new q("",{providedIn:"root",factory:()=>dB}),du=class{},fB=(()=>{class n{doc;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r){this.doc=t,this.cookieName=r}getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=nu(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(Z(Je),Z(uB))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),pB=/^(?:https?:)?\/\//i;function mB(n,e){if(!V(qM)||n.method==="GET"||n.method==="HEAD"||pB.test(n.url))return e(n);let t=V(du).getToken(),r=V(hB);return t!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,t)})),e(n)}function SE(...n){let e=[tB,DE,tp,{provide:Ua,useExisting:tp},{provide:uu,useFactory:()=>V(nB,{optional:!0})??V(DE)},{provide:HM,useValue:mB,multi:!0},{provide:qM,useValue:!0},{provide:du,useClass:fB}];for(let t of n)e.push(...t.\u0275providers);return ls(e)}var GM=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(Z(Je))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ue="primary",Cu=Symbol("RouteTitle"),PE=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ss(n){return new PE(n)}function eR(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function yB(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!$r(n[t],e[t]))return!1;return!0}function $r(n,e){let t=n?xE(n):void 0,r=e?xE(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!tR(n[i],e[i]))return!1;return!0}function xE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function tR(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function nR(n){return n.length>0?n[n.length-1]:null}function Ai(n){return My(n)?n:go(n)?We(Promise.resolve(n)):ne(n)}var vB={exact:iR,subset:oR},rR={exact:_B,subset:EB,ignored:()=>!0};function WM(n,e,t){return vB[t.paths](n.root,e.root,t.matrixParams)&&rR[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function _B(n,e){return $r(n,e)}function iR(n,e,t){if(!Ts(n.segments,e.segments)||!ip(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!iR(n.children[r],e.children[r],t))return!1;return!0}function EB(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>tR(n[t],e[t]))}function oR(n,e,t){return sR(n,e,e.segments,t)}function sR(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ts(i,t)||e.hasChildren()||!ip(i,t,r))}else if(n.segments.length===t.length){if(!Ts(n.segments,t)||!ip(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!oR(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ts(n.segments,i)||!ip(n.segments,i,r)||!n.children[ue]?!1:sR(n.children[ue],e,o,r)}}function ip(n,e,t){return e.every((r,i)=>rR[t](n[i].parameters,r.parameters))}var zr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Oe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ss(this.queryParams),this._queryParamMap}toString(){return bB.serialize(this)}},Oe=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return op(this)}},Eo=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ss(this.parameters),this._parameterMap}toString(){return cR(this)}};function wB(n,e){return Ts(n,e)&&n.every((t,r)=>$r(t.parameters,e[r].parameters))}function Ts(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function IB(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ue&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ue&&(t=t.concat(e(i,r)))}),t}var As=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>new wo,providedIn:"root"})}return n})(),wo=class{parse(e){let t=new kE(e);return new zr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${hu(e.root,!0)}`,r=DB(e.queryParams),i=typeof e.fragment=="string"?`#${CB(e.fragment)}`:"";return`${t}${r}${i}`}},bB=new wo;function op(n){return n.segments.map(e=>cR(e)).join("/")}function hu(n,e){if(!n.hasChildren())return op(n);if(e){let t=n.children[ue]?hu(n.children[ue],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ue&&r.push(`${i}:${hu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=IB(n,(r,i)=>i===ue?[hu(n.children[ue],!1)]:[`${i}:${hu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ue]!=null?`${op(n)}/${t[0]}`:`${op(n)}/(${t.join("//")})`}}function aR(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function np(n){return aR(n).replace(/%3B/gi,";")}function CB(n){return encodeURI(n)}function OE(n){return aR(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function sp(n){return decodeURIComponent(n)}function KM(n){return sp(n.replace(/\+/g,"%20"))}function cR(n){return`${OE(n.path)}${TB(n.parameters)}`}function TB(n){return Object.entries(n).map(([e,t])=>`;${OE(e)}=${OE(t)}`).join("")}function DB(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${np(t)}=${np(i)}`).join("&"):`${np(t)}=${np(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var SB=/^[^\/()?;#]+/;function AE(n){let e=n.match(SB);return e?e[0]:""}var AB=/^[^\/()?;=#]+/;function MB(n){let e=n.match(AB);return e?e[0]:""}var RB=/^[^=?&#]+/;function NB(n){let e=n.match(RB);return e?e[0]:""}var PB=/^[^&#]+/;function xB(n){let e=n.match(PB);return e?e[0]:""}var kE=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Oe([],{}):new Oe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ue]=new Oe(e,t)),r}parseSegment(){let e=AE(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new U(4009,!1);return this.capture(e),new Eo(sp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=MB(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=AE(this.remaining);i&&(r=i,this.capture(r))}e[sp(t)]=sp(r)}parseQueryParam(e){let t=NB(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=xB(this.remaining);s&&(r=s,this.capture(r))}let i=KM(t),o=KM(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=AE(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new U(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ue);let s=this.parseChildren();t[o??ue]=Object.keys(s).length===1&&s[ue]?s[ue]:new Oe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new U(4011,!1)}};function lR(n){return n.segments.length>0?new Oe([],{[ue]:n}):n}function uR(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=uR(i);if(r===ue&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Oe(n.segments,e);return OB(t)}function OB(n){if(n.numberOfChildren===1&&n.children[ue]){let e=n.children[ue];return new Oe(n.segments.concat(e.segments),e.children)}return n}function Io(n){return n instanceof zr}function dR(n,e,t=null,r=null){let i=hR(n);return fR(i,e,t,r)}function hR(n){let e;function t(o){let s={};for(let c of o.children){let u=t(c);s[c.outlet]=u}let a=new Oe(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=lR(r);return e??i}function fR(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return ME(i,i,i,t,r);let o=kB(e);if(o.toRoot())return ME(i,i,new Oe([],{}),t,r);let s=FB(o,i,n),a=s.processChildren?pu(s.segmentGroup,s.index,o.commands):mR(s.segmentGroup,s.index,o.commands);return ME(i,s.segmentGroup,a,t,r)}function ap(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function gu(n){return typeof n=="object"&&n!=null&&n.outlets}function ME(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(h=>`${h}`):`${u}`});let s;n===e?s=t:s=pR(n,e,t);let a=lR(uR(s));return new zr(a,o,i)}function pR(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=pR(o,e,t)}),new Oe(n.segments,r)}var cp=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ap(r[0]))throw new U(4003,!1);let i=r.find(gu);if(i&&i!==nR(r))throw new U(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function kB(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new cp(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new cp(t,e,r)}var Ha=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function FB(n,e,t){if(n.isAbsolute)return new Ha(e,!0,0);if(!t)return new Ha(e,!1,NaN);if(t.parent===null)return new Ha(t,!0,0);let r=ap(n.commands[0])?0:1,i=t.segments.length-1+r;return LB(t,i,n.numberOfDoubleDots)}function LB(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new U(4005,!1);i=r.segments.length}return new Ha(r,!1,i-o)}function VB(n){return gu(n[0])?n[0].outlets:{[ue]:n}}function mR(n,e,t){if(n??=new Oe([],{}),n.segments.length===0&&n.hasChildren())return pu(n,e,t);let r=UB(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Oe(n.segments.slice(0,r.pathIndex),{});return o.children[ue]=new Oe(n.segments.slice(r.pathIndex),n.children),pu(o,0,i)}else return r.match&&i.length===0?new Oe(n.segments,{}):r.match&&!n.hasChildren()?FE(n,e,t):r.match?pu(n,0,i):FE(n,e,t)}function pu(n,e,t){if(t.length===0)return new Oe(n.segments,{});{let r=VB(t),i={};if(Object.keys(r).some(o=>o!==ue)&&n.children[ue]&&n.numberOfChildren===1&&n.children[ue].segments.length===0){let o=pu(n.children[ue],e,t);return new Oe(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=mR(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Oe(n.segments,i)}}function UB(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(gu(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!YM(c,u,s))return o;r+=2}else{if(!YM(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function FE(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(gu(o)){let c=jB(o.outlets);return new Oe(r,c)}if(i===0&&ap(t[0])){let c=n.segments[e];r.push(new Eo(c.path,QM(t[0]))),i++;continue}let s=gu(o)?o.outlets[ue]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&ap(a)?(r.push(new Eo(s,QM(a))),i+=2):(r.push(new Eo(s,{})),i++)}return new Oe(r,{})}function jB(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=FE(new Oe([],{}),0,r))}),e}function QM(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function YM(n,e,t){return n==t.path&&$r(e,t.parameters)}var za="imperative",Mt=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Mt||{}),On=class{id;url;constructor(e,t){this.id=e,this.url=t}},bo=class extends On{type=Mt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},kn=class extends On{urlAfterRedirects;type=Mt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},fn=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(fn||{}),Ga=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Ga||{}),Hr=class extends On{reason;code;type=Mt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},qr=class extends On{reason;code;type=Mt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Wa=class extends On{error;target;type=Mt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},yu=class extends On{urlAfterRedirects;state;type=Mt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lp=class extends On{urlAfterRedirects;state;type=Mt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},up=class extends On{urlAfterRedirects;state;shouldActivate;type=Mt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},dp=class extends On{urlAfterRedirects;state;type=Mt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hp=class extends On{urlAfterRedirects;state;type=Mt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fp=class{route;type=Mt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},pp=class{route;type=Mt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},mp=class{snapshot;type=Mt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gp=class{snapshot;type=Mt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yp=class{snapshot;type=Mt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vp=class{snapshot;type=Mt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ka=class{routerEvent;position;anchor;type=Mt.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},vu=class{},Qa=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function BB(n){return!(n instanceof vu)&&!(n instanceof Qa)}function $B(n,e){return n.providers&&!n._injector&&(n._injector=Fa(n.providers,e,`Route: ${n.path}`)),n._injector??e}function wr(n){return n.outlet||ue}function HB(n,e){let t=n.filter(r=>wr(r)===e);return t.push(...n.filter(r=>wr(r)!==e)),t}function Za(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var _p=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Za(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Ms(this.rootInjector)}},Ms=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new _p(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(Z(ut))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ep=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=LE(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=LE(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=VE(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return VE(e,this._root).map(t=>t.value)}};function LE(n,e){if(n===e.value)return e;for(let t of e.children){let r=LE(n,t);if(r)return r}return null}function VE(n,e){if(n===e.value)return[e];for(let t of e.children){let r=VE(n,t);if(r.length)return r.unshift(e),r}return[]}var xn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function $a(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var _u=class extends Ep{snapshot;constructor(e,t){super(e),this.snapshot=t,GE(this,e)}toString(){return this.snapshot.toString()}};function gR(n){let e=zB(n),t=new Ye([new Eo("",{})]),r=new Ye({}),i=new Ye({}),o=new Ye({}),s=new Ye(""),a=new nn(t,r,o,s,i,ue,n,e.root);return a.snapshot=e.root,new _u(new xn(a,[]),e)}function zB(n){let e={},t={},r={},o=new Ds([],e,r,"",t,ue,n,null,{});return new Eu("",new xn(o,[]))}var nn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(me(u=>u[Cu]))??ne(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(me(e=>Ss(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(me(e=>Ss(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function wp(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:k(k({},e.params),n.params),data:k(k({},e.data),n.data),resolve:k(k(k(k({},n.data),e.data),i?.data),n._resolvedData)}:r={params:k({},n.params),data:k({},n.data),resolve:k(k({},n.data),n._resolvedData??{})},i&&vR(i)&&(r.resolve[Cu]=i.title),r}var Ds=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Cu]}constructor(e,t,r,i,o,s,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ss(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ss(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Eu=class extends Ep{url;constructor(e,t){super(t),this.url=e,GE(this,t)}toString(){return yR(this._root)}};function GE(n,e){e.value._routerState=n,e.children.forEach(t=>GE(n,t))}function yR(n){let e=n.children.length>0?` { ${n.children.map(yR).join(", ")} } `:"";return`${n.value}${e}`}function RE(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,$r(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),$r(e.params,t.params)||n.paramsSubject.next(t.params),yB(e.url,t.url)||n.urlSubject.next(t.url),$r(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function UE(n,e){let t=$r(n.params,e.params)&&wB(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||UE(n.parent,e.parent))}function vR(n){return typeof n.title=="string"||n.title===null}var _R=new q(""),Tu=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ue;activateEvents=new dt;deactivateEvents=new dt;attachEvents=new dt;detachEvents=new dt;routerOutletData=eM();parentContexts=V(Ms);location=V(Ii);changeDetector=V(Ti);inputBinder=V(Du,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new U(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new U(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new U(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new U(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new jE(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ze({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[_i]})}return n})(),jE=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===nn?this.route:e===Ms?this.childContexts:e===_R?this.outletData:this.parent.get(e,t)}},Du=new q(""),WE=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=hl([r.queryParams,r.params,r.data]).pipe($t(([o,s,a],c)=>(a=k(k(k({},o),s),a),c===0?ne(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=nM(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),KE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ke({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&ot(0,"router-outlet")},dependencies:[Tu],encapsulation:2})}return n})();function QE(n){let e=n.children&&n.children.map(QE),t=e?Q(k({},n),{children:e}):k({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ue&&(t.component=KE),t}function qB(n,e,t){let r=wu(n,e._root,t?t._root:void 0);return new _u(r,e)}function wu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=GB(n,e,t);return new xn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>wu(n,a)),s}}let r=WB(e.value),i=e.children.map(o=>wu(n,o));return new xn(r,i)}}function GB(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return wu(n,r,i);return wu(n,r)})}function WB(n){return new nn(new Ye(n.url),new Ye(n.params),new Ye(n.queryParams),new Ye(n.fragment),new Ye(n.data),n.outlet,n.component,n)}var Ya=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},ER="ngNavigationCancelingError";function Ip(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Io(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=wR(!1,fn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function wR(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[ER]=!0,t.cancellationCode=e,t}function KB(n){return IR(n)&&Io(n.url)}function IR(n){return!!n&&n[ER]}var QB=(n,e,t,r)=>me(i=>(new BE(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),BE=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),RE(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=$a(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=$a(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=$a(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=$a(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new vp(o.value.snapshot))}),e.children.length&&this.forwardEvent(new gp(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(RE(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),RE(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},bp=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},qa=class{component;route;constructor(e,t){this.component=e,this.route=t}};function YB(n,e,t){let r=n._root,i=e?e._root:null;return fu(r,i,t,[r.value])}function JB(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Xa(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Wy(n)?n:e.get(n):r}function fu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=$a(e);return n.children.forEach(s=>{ZB(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>mu(a,t.getContext(s),i)),i}function ZB(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=XB(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new bp(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?fu(n,e,a?a.children:null,r,i):fu(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new qa(a.outlet.component,s))}else s&&mu(e,a,i),i.canActivateChecks.push(new bp(r)),o.component?fu(n,null,a?a.children:null,r,i):fu(n,null,t,r,i);return i}function XB(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ts(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ts(n.url,e.url)||!$r(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!UE(n,e)||!$r(n.queryParams,e.queryParams);case"paramsChange":default:return!UE(n,e)}}function mu(n,e,t){let r=$a(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?mu(s,e.children.getContext(o),t):mu(s,null,t):mu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new qa(e.outlet.component,i)):t.canDeactivateChecks.push(new qa(null,i)):t.canDeactivateChecks.push(new qa(null,i))}function Su(n){return typeof n=="function"}function e4(n){return typeof n=="boolean"}function t4(n){return n&&Su(n.canLoad)}function n4(n){return n&&Su(n.canActivate)}function r4(n){return n&&Su(n.canActivateChild)}function i4(n){return n&&Su(n.canDeactivate)}function o4(n){return n&&Su(n.canMatch)}function bR(n){return n instanceof si||n?.name==="EmptyError"}var rp=Symbol("INITIAL_VALUE");function Ja(){return $t(n=>hl(n.map(e=>e.pipe(ci(1),xy(rp)))).pipe(me(e=>{for(let t of e)if(t!==!0){if(t===rp)return rp;if(t===!1||s4(t))return t}return!0}),Qt(e=>e!==rp),ci(1)))}function s4(n){return Io(n)||n instanceof Ya}function a4(n,e){return lt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ne(Q(k({},t),{guardsResult:!0})):c4(s,r,i,n).pipe(lt(a=>a&&e4(a)?l4(r,o,n,e):ne(a)),me(a=>Q(k({},t),{guardsResult:a})))})}function c4(n,e,t,r){return We(n).pipe(lt(i=>p4(i.component,i.route,t,e,r)),li(i=>i!==!0,!0))}function l4(n,e,t,r){return We(e).pipe(Or(i=>wa(d4(i.route.parent,r),u4(i.route,r),f4(n,i.path,t),h4(n,i.route,t))),li(i=>i!==!0,!0))}function u4(n,e){return n!==null&&e&&e(new yp(n)),ne(!0)}function d4(n,e){return n!==null&&e&&e(new mp(n)),ne(!0)}function h4(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ne(!0);let i=r.map(o=>fl(()=>{let s=Za(e)??t,a=Xa(o,s),c=n4(a)?a.canActivate(e,n):Ot(s,()=>a(e,n));return Ai(c).pipe(li())}));return ne(i).pipe(Ja())}function f4(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>JB(s)).filter(s=>s!==null).map(s=>fl(()=>{let a=s.guards.map(c=>{let u=Za(s.node)??t,h=Xa(c,u),p=r4(h)?h.canActivateChild(r,n):Ot(u,()=>h(r,n));return Ai(p).pipe(li())});return ne(a).pipe(Ja())}));return ne(o).pipe(Ja())}function p4(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ne(!0);let s=o.map(a=>{let c=Za(e)??i,u=Xa(a,c),h=i4(u)?u.canDeactivate(n,e,t,r):Ot(c,()=>u(n,e,t,r));return Ai(h).pipe(li())});return ne(s).pipe(Ja())}function m4(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ne(!0);let o=i.map(s=>{let a=Xa(s,n),c=t4(a)?a.canLoad(e,t):Ot(n,()=>a(e,t));return Ai(c)});return ne(o).pipe(Ja(),CR(r))}function CR(n){return Ty(Pt(e=>{if(typeof e!="boolean")throw Ip(n,e)}),me(e=>e===!0))}function g4(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ne(!0);let o=i.map(s=>{let a=Xa(s,n),c=o4(a)?a.canMatch(e,t):Ot(n,()=>a(e,t));return Ai(c)});return ne(o).pipe(Ja(),CR(r))}var Iu=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},bu=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Ba(n){return Ea(new Iu(n))}function y4(n){return Ea(new U(4e3,!1))}function v4(n){return Ea(wR(!1,fn.GuardRejected))}var $E=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ne(r);if(i.numberOfChildren>1||!i.children[ue])return y4(`${e.redirectTo}`);i=i.children[ue]}}applyRedirectCommands(e,t,r,i,o){return _4(t,i,o).pipe(me(s=>{if(s instanceof zr)throw new bu(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new bu(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new zr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Oe(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new U(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function _4(n,e,t){if(typeof n=="string")return ne(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:u,data:h,title:p}=e;return Ai(Ot(t,()=>r({params:u,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:p})))}var HE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function E4(n,e,t,r,i){let o=TR(n,e,t);return o.matched?(r=$B(e,r),g4(r,e,t,i).pipe(me(s=>s===!0?o:k({},HE)))):ne(o)}function TR(n,e,t){if(e.path==="**")return w4(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?k({},HE):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||eR)(t,n,e);if(!i)return k({},HE);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?k(k({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function w4(n){return{matched:!0,parameters:n.length>0?nR(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function JM(n,e,t,r){return t.length>0&&C4(n,t,r)?{segmentGroup:new Oe(e,b4(r,new Oe(t,n.children))),slicedSegments:[]}:t.length===0&&T4(n,t,r)?{segmentGroup:new Oe(n.segments,I4(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Oe(n.segments,n.children),slicedSegments:t}}function I4(n,e,t,r){let i={};for(let o of t)if(Tp(n,e,o)&&!r[wr(o)]){let s=new Oe([],{});i[wr(o)]=s}return k(k({},r),i)}function b4(n,e){let t={};t[ue]=e;for(let r of n)if(r.path===""&&wr(r)!==ue){let i=new Oe([],{});t[wr(r)]=i}return t}function C4(n,e,t){return t.some(r=>Tp(n,e,r)&&wr(r)!==ue)}function T4(n,e,t){return t.some(r=>Tp(n,e,r))}function Tp(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function D4(n,e,t){return e.length===0&&!n.children[t]}var zE=class{};function S4(n,e,t,r,i,o,s="emptyOnly"){return new qE(n,e,t,r,i,s,o).recognize()}var A4=31,qE=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new $E(this.urlSerializer,this.urlTree)}noMatchError(e){return new U(4002,`'${e.segmentGroup}'`)}recognize(){let e=JM(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(me(({children:t,rootSnapshot:r})=>{let i=new xn(r,t),o=new Eu("",i),s=dR(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Ds([],Object.freeze({}),Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ue,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ue,t).pipe(me(r=>({children:r,rootSnapshot:t})),ai(r=>{if(r instanceof bu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Iu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(me(s=>s instanceof xn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return We(o).pipe(Or(s=>{let a=r.children[s],c=HB(t,s);return this.processSegmentGroup(e,c,a,s,i)}),Py((s,a)=>(s.push(...a),s)),to(null),Ny(),lt(s=>{if(s===null)return Ba(r);let a=DR(s);return M4(a),ne(a)}))}processSegment(e,t,r,i,o,s,a){return We(t).pipe(Or(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(ai(u=>{if(u instanceof Iu)return ne(null);throw u}))),li(c=>!!c),ai(c=>{if(bR(c))return D4(r,i,o)?ne(new zE):Ba(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return wr(r)!==s&&(s===ue||!Tp(i,o,r))?Ba(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):Ba(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=TR(t,i,o);if(!c)return Ba(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>A4&&(this.allowRedirects=!1));let y=new Ds(o,u,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,ZM(i),wr(i),i.component??i._loadedComponent??null,i,XM(i)),I=wp(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(I.params),y.data=Object.freeze(I.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe($t(A=>this.applyRedirects.lineralizeSegments(i,A)),lt(A=>this.processSegment(e,r,t,A.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=E4(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe($t(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe($t(({routes:u})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=c,I=new Ds(m,p,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,ZM(r),wr(r),r.component??r._loadedComponent??null,r,XM(r)),P=wp(I,s,this.paramsInheritanceStrategy);I.params=Object.freeze(P.params),I.data=Object.freeze(P.data);let{segmentGroup:A,slicedSegments:F}=JM(t,m,y,u);if(F.length===0&&A.hasChildren())return this.processChildren(h,u,A,I).pipe(me(J=>new xn(I,J)));if(u.length===0&&F.length===0)return ne(new xn(I,[]));let W=wr(r)===o;return this.processSegment(h,u,A,F,W?ue:o,!0,I).pipe(me(J=>new xn(I,J instanceof xn?[J]:[])))}))):Ba(t)))}getChildConfig(e,t,r){return t.children?ne({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ne({routes:t._loadedRoutes,injector:t._loadedInjector}):m4(e,t,r,this.urlSerializer).pipe(lt(i=>i?this.configLoader.loadChildren(e,t).pipe(Pt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):v4(t))):ne({routes:[],injector:e})}};function M4(n){n.sort((e,t)=>e.value.outlet===ue?-1:t.value.outlet===ue?1:e.value.outlet.localeCompare(t.value.outlet))}function R4(n){let e=n.value.routeConfig;return e&&e.path===""}function DR(n){let e=[],t=new Set;for(let r of n){if(!R4(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=DR(r.children);e.push(new xn(r.value,i))}return e.filter(r=>!t.has(r))}function ZM(n){return n.data||{}}function XM(n){return n.resolve||{}}function N4(n,e,t,r,i,o){return lt(s=>S4(n,e,t,r,s.extractedUrl,i,o).pipe(me(({state:a,tree:c})=>Q(k({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function P4(n,e){return lt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ne(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of SR(c))s.add(u);let a=0;return We(s).pipe(Or(c=>o.has(c)?x4(c,r,n,e):(c.data=wp(c,c.parent,n).resolve,ne(void 0))),Pt(()=>a++),Ia(1),lt(c=>a===s.size?ne(t):mn))})}function SR(n){let e=n.children.map(t=>SR(t)).flat();return[n,...e]}function x4(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!vR(i)&&(o[Cu]=i.title),fl(()=>(n.data=wp(n,n.parent,t).resolve,O4(o,n,e,r).pipe(me(s=>(n._resolvedData=s,n.data=k(k({},n.data),s),null)))))}function O4(n,e,t,r){let i=xE(n);if(i.length===0)return ne({});let o={};return We(i).pipe(lt(s=>k4(n[s],e,t,r).pipe(li(),Pt(a=>{if(a instanceof Ya)throw Ip(new wo,a);o[s]=a}))),Ia(1),me(()=>o),ai(s=>bR(s)?mn:Ea(s)))}function k4(n,e,t,r){let i=Za(e)??r,o=Xa(n,i),s=o.resolve?o.resolve(e,t):Ot(i,()=>o(e,t));return Ai(s)}function NE(n){return $t(e=>{let t=n(e);return t?We(t).pipe(me(()=>e)):ne(e)})}var YE=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ue);return r}getResolvedTitleForRoute(t){return t.data[Cu]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>V(AR),providedIn:"root"})}return n})(),AR=(()=>{class n extends YE{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(Z(GM))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Co=new q("",{providedIn:"root",factory:()=>({})}),Rs=new q(""),Dp=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=V(eE);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ne(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Ai(Ot(t,()=>r.loadComponent())).pipe(me(RR),$t(NR),Pt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),rs(()=>{this.componentLoaders.delete(r)})),o=new _a(i,()=>new ct).pipe(va());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ne({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=MR(r,this.compiler,t,this.onLoadEndListener).pipe(rs(()=>{this.childrenLoaders.delete(r)})),s=new _a(o,()=>new ct).pipe(va());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function MR(n,e,t,r){return Ai(Ot(t,()=>n.loadChildren())).pipe(me(RR),$t(NR),lt(i=>i instanceof Mf||Array.isArray(i)?ne(i):We(e.compileModuleAsync(i))),me(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Rs,[],{optional:!0,self:!0}).flat()),{routes:s.map(QE),injector:o}}))}function F4(n){return n&&typeof n=="object"&&"default"in n}function RR(n){return F4(n)?n.default:n}function NR(n){return ne(n)}var Sp=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>V(L4),providedIn:"root"})}return n})(),L4=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),JE=new q(""),ZE=new q("");function PR(n,e,t){let r=n.get(ZE),i=n.get(Je);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o,s=new Promise(u=>{o=u}),a=i.startViewTransition(()=>(o(),V4(n)));a.ready.catch(u=>{});let{onViewTransitionCreated:c}=r;return c&&Ot(n,()=>c({transition:a,from:e,to:t})),s}function V4(n){return new Promise(e=>{Hl({read:()=>setTimeout(e)},{injector:n})})}var XE=new q(""),Ap=(()=>{class n{currentNavigation=hr(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new ct;transitionAbortWithErrorSubject=new ct;configLoader=V(Dp);environmentInjector=V(ut);destroyRef=V(dr);urlSerializer=V(As);rootContexts=V(Ms);location=V(vo);inputBindingEnabled=V(Du,{optional:!0})!==null;titleStrategy=V(YE);options=V(Co,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=V(Sp);createViewTransition=V(JE,{optional:!0});navigationErrorHandler=V(XE,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ne(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new fp(i)),r=i=>this.events.next(new pp(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;kt(()=>{this.transitions?.next(Q(k({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new Ye(null),this.transitions.pipe(Qt(r=>r!==null),$t(r=>{let i=!1;return ne(r).pipe($t(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",fn.SupersededByNewNavigation),mn;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?Q(k({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new qr(o.id,this.urlSerializer.serialize(o.rawUrl),"",Ga.IgnoredSameUrlNavigation)),o.resolve(!1),mn;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return ne(o).pipe($t(c=>(this.events.next(new bo(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),c.id!==this.navigationId?mn:Promise.resolve(c))),N4(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Pt(c=>{r.targetSnapshot=c.targetSnapshot,r.urlAfterRedirects=c.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=c.urlAfterRedirects,h));let u=new yu(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:c,extractedUrl:u,source:h,restoredState:p,extras:m}=o,y=new bo(c,this.urlSerializer.serialize(u),h,p);this.events.next(y);let I=gR(this.rootComponentType).snapshot;return this.currentTransition=r=Q(k({},o),{targetSnapshot:I,urlAfterRedirects:u,extras:Q(k({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(P=>(P.finalUrl=u,P)),ne(r)}else return this.events.next(new qr(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Ga.IgnoredByUrlHandlingStrategy)),o.resolve(!1),mn}),Pt(o=>{let s=new lp(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),me(o=>(this.currentTransition=r=Q(k({},o),{guards:YB(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),a4(this.environmentInjector,o=>this.events.next(o)),Pt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Ip(this.urlSerializer,o.guardsResult);let s=new up(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),Qt(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",fn.GuardRejected),!1)),NE(o=>{if(o.guards.canActivateChecks.length!==0)return ne(o).pipe(Pt(s=>{let a=new dp(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),$t(s=>{let a=!1;return ne(s).pipe(P4(this.paramsInheritanceStrategy,this.environmentInjector),Pt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",fn.NoDataFromResolver)}}))}),Pt(s=>{let a=new hp(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),NE(o=>{let s=a=>{let c=[];if(a.routeConfig?.loadComponent){let u=Za(a)??this.environmentInjector;c.push(this.configLoader.loadComponent(u,a.routeConfig).pipe(Pt(h=>{a.component=h}),me(()=>{})))}for(let u of a.children)c.push(...s(u));return c};return hl(s(o.targetSnapshot.root)).pipe(to(null),ci(1))}),NE(()=>this.afterPreactivation()),$t(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?We(a).pipe(me(()=>r)):ne(r)}),me(o=>{let s=qB(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=Q(k({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),Pt(()=>{this.events.next(new vu)}),QB(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),ci(1),Th(new le(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(Qt(()=>!i&&!r.targetRouterState),Pt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",fn.Aborted)}))),Pt({next:o=>{i=!0,this.lastSuccessfulNavigation=kt(this.currentNavigation),this.events.next(new kn(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Th(this.transitionAbortWithErrorSubject.pipe(Pt(o=>{throw o}))),rs(()=>{i||this.cancelNavigationTransition(r,"",fn.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),ai(o=>{if(this.destroyed)return r.resolve(!1),mn;if(i=!0,IR(o))this.events.next(new Hr(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),KB(o)?this.events.next(new Qa(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new Wa(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=Ot(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof Ya){let{message:c,cancellationCode:u}=Ip(this.urlSerializer,a);this.events.next(new Hr(r.id,this.urlSerializer.serialize(r.extractedUrl),c,u)),this.events.next(new Qa(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return mn}))}))}cancelNavigationTransition(t,r,i){let o=new Hr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=kt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function U4(n){return n!==za}var xR=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>V(j4),providedIn:"root"})}return n})(),Cp=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},j4=(()=>{class n extends Cp{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ei(n)))(i||n)}})();static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),OR=(()=>{class n{urlSerializer=V(As);options=V(Co,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=V(vo);urlHandlingStrategy=V(Sp);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new zr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof zr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=gR(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:()=>V(B4),providedIn:"root"})}return n})(),B4=(()=>{class n extends OR{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof bo?this.updateStateMemento():t instanceof qr?this.commitTransition(r):t instanceof yu?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof vu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Hr&&t.code!==fn.SupersededByNewNavigation&&t.code!==fn.Redirect?this.restoreHistory(r):t instanceof Wa?this.restoreHistory(r,!0):t instanceof kn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=k(k({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=k(k({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ei(n)))(i||n)}})();static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Mp(n,e){n.events.pipe(Qt(t=>t instanceof kn||t instanceof Hr||t instanceof Wa||t instanceof qr),me(t=>t instanceof kn||t instanceof qr?0:(t instanceof Hr?t.code===fn.Redirect||t.code===fn.SupersededByNewNavigation:!1)?2:1),Qt(t=>t!==2),ci(1)).subscribe(()=>{e()})}var $4={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},H4={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},mt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=V(z_);stateManager=V(OR);options=V(Co,{optional:!0})||{};pendingTasks=V(Ur);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=V(Ap);urlSerializer=V(As);location=V(vo);urlHandlingStrategy=V(Sp);injector=V(ut);_events=new ct;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=V(xR);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=V(Rs,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!V(Du,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Et;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=kt(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Hr&&r.code!==fn.Redirect&&r.code!==fn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof kn)this.navigated=!0;else if(r instanceof Qa){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=k({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||U4(i.source)},s);this.scheduleNavigation(a,za,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}BB(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),za,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=k({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(vn)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return kt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(QE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=k(k({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=hR(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return fR(p,t,h,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Io(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,za,null,r)}navigate(t,r={skipLocationChange:!1}){return z4(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(fi(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=k({},$4):r===!1?i=k({},H4):i=r,Io(t))return WM(this.currentUrlTree,t,i);let o=this.parseUrl(t);return WM(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((p,m)=>{a=p,c=m});let h=this.pendingTasks.add();return Mp(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function z4(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new U(4008,!1)}var Xe=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=hr(null);get href(){return kt(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ct;applicationErrorHandler=V(vn);options=V(Co,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(V(new xf("href"),{optional:!0}));let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area"||!!(typeof customElements=="object"&&customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof kn&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Io(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(u=>{this.applicationErrorHandler(u)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Io(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(B(mt),B(nn),jl("tabindex"),B(qn),B(Xt),B(yr))};static \u0275dir=Ze({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&ye("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Gl("href",i.reactiveHref(),I_)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Is],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Is],replaceUrl:[2,"replaceUrl","replaceUrl",Is],routerLink:"routerLink"},features:[_i]})}return n})(),tw=(()=>{class n{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new dt;constructor(t,r,i,o,s){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=s,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof kn&&this.update()})}ngAfterContentInit(){ne(this.links.changes,ne(null)).pipe(eo()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=We(t).pipe(eo()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=q4(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||n)(B(mt),B(Xt),B(qn),B(Ti),B(Xe,8))};static \u0275dir=Ze({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&Q_(o,Xe,5),r&2){let s;Y_(s=J_())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[_i]})}return n})();function q4(n){return!!n.paths}var Au=class{};var kR=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Qt(t=>t instanceof kn),Or(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Fa(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return We(i).pipe(eo())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=ne(null);let o=i.pipe(lt(s=>s===null?ne(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(t,r);return We([o,s]).pipe(eo())}else return o})}static \u0275fac=function(r){return new(r||n)(Z(mt),Z(ut),Z(Au),Z(Dp))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),FR=new q(""),G4=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=za;restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof bo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof kn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof qr&&t.code===Ga.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{if(!(t instanceof Ka))return;let r={behavior:"instant"};t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0],r):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position,r):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>_(this,null,function*(){yield new Promise(i=>{setTimeout(i),typeof requestAnimationFrame<"u"&&requestAnimationFrame(i)}),this.zone.run(()=>{this.transitions.events.next(new Ka(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){j_()};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function nw(n,...e){return ls([{provide:Rs,multi:!0,useValue:n},[],{provide:nn,useFactory:LR,deps:[mt]},{provide:ql,multi:!0,useFactory:VR},e.map(t=>t.\u0275providers)])}function LR(n){return n.routerState.root}function Mu(n,e){return{\u0275kind:n,\u0275providers:e}}function VR(){let n=V(yn);return e=>{let t=n.get(bi);if(e!==t.components[0])return;let r=n.get(mt),i=n.get(UR);n.get(rw)===1&&r.initialNavigation(),n.get($R,null,{optional:!0})?.setUpPreloading(),n.get(FR,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var UR=new q("",{factory:()=>new ct}),rw=new q("",{providedIn:"root",factory:()=>1});function jR(){let n=[{provide:__,useValue:!0},{provide:rw,useValue:0},Nf(()=>{let e=V(yn);return e.get(cE,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(mt),o=e.get(UR);Mp(i,()=>{r(!0)}),e.get(Ap).afterPreactivation=()=>(r(!0),o.closed?ne(void 0):o),i.initialNavigation()}))})];return Mu(2,n)}function BR(){let n=[Nf(()=>{V(mt).setUpLocationChangeListener()}),{provide:rw,useValue:2}];return Mu(3,n)}var $R=new q("");function HR(n){return Mu(0,[{provide:$R,useExisting:kR},{provide:Au,useExisting:n}])}function zR(){return Mu(8,[WE,{provide:Du,useExisting:WE}])}function qR(n){mo("NgRouterViewTransitions");let e=[{provide:JE,useValue:PR},{provide:ZE,useValue:k({skipNextTransition:!!n?.skipInitialTransition},n)}];return Mu(9,e)}var GR=[vo,{provide:As,useClass:wo},mt,Ms,{provide:nn,useFactory:LR,deps:[mt]},Dp,[]],gt=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[GR,[],{provide:Rs,multi:!0,useValue:t},[],r?.errorHandler?{provide:XE,useValue:r.errorHandler}:[],{provide:Co,useValue:r||{}},r?.useHash?K4():Q4(),W4(),r?.preloadingStrategy?HR(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?Y4(r):[],r?.bindToComponentInputs?zR().\u0275providers:[],r?.enableViewTransitions?qR().\u0275providers:[],J4()]}}static forChild(t){return{ngModule:n,providers:[{provide:Rs,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Gn({type:n});static \u0275inj=Rn({})}return n})();function W4(){return{provide:FR,useFactory:()=>{let n=V(DM),e=V(nt),t=V(Co),r=V(Ap),i=V(As);return t.scrollOffset&&n.setOffset(t.scrollOffset),new G4(i,r,n,e,t)}}}function K4(){return{provide:yr,useClass:fE}}function Q4(){return{provide:yr,useClass:Lf}}function Y4(n){return[n.initialNavigation==="disabled"?BR().\u0275providers:[],n.initialNavigation==="enabledBlocking"?jR().\u0275providers:[]]}var ew=new q("");function J4(){return[{provide:ew,useFactory:VR},{provide:ql,multi:!0,useExisting:ew}]}var ve=(function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n})(ve||{}),Ir="*";function WR(n,e=null){return{type:ve.Sequence,steps:n,options:e}}function iw(n){return{type:ve.Style,styles:n,offset:null}}var Mi=class{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(e=0,t=0){this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},ec=class{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(e){this.players=e;let t=0,r=0,i=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++r==o&&this._onDestroy()}),s.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(r=>{let i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){let e=this.players.reduce((t,r)=>t===null||r.totalTime>t.totalTime?r:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Ru="!";function KR(n){return new U(3e3,!1)}function Z4(){return new U(3100,!1)}function X4(){return new U(3101,!1)}function e3(n){return new U(3001,!1)}function t3(n){return new U(3003,!1)}function n3(n){return new U(3004,!1)}function YR(n,e){return new U(3005,!1)}function JR(){return new U(3006,!1)}function ZR(){return new U(3007,!1)}function XR(n,e){return new U(3008,!1)}function eN(n){return new U(3002,!1)}function tN(n,e,t,r,i){return new U(3010,!1)}function nN(){return new U(3011,!1)}function rN(){return new U(3012,!1)}function iN(){return new U(3200,!1)}function oN(){return new U(3202,!1)}function sN(){return new U(3013,!1)}function aN(n){return new U(3014,!1)}function cN(n){return new U(3015,!1)}function lN(n){return new U(3016,!1)}function uN(n,e){return new U(3404,!1)}function r3(n){return new U(3502,!1)}function dN(n){return new U(3503,!1)}function hN(){return new U(3300,!1)}function fN(n){return new U(3504,!1)}function pN(n){return new U(3301,!1)}function mN(n,e){return new U(3302,!1)}function gN(n){return new U(3303,!1)}function yN(n,e){return new U(3400,!1)}function vN(n){return new U(3401,!1)}function _N(n){return new U(3402,!1)}function EN(n,e){return new U(3505,!1)}function Ri(n){switch(n.length){case 0:return new Mi;case 1:return n[0];default:return new ec(n)}}function cw(n,e,t=new Map,r=new Map){let i=[],o=[],s=-1,a=null;if(e.forEach(c=>{let u=c.get("offset"),h=u==s,p=h&&a||new Map;c.forEach((m,y)=>{let I=y,P=m;if(y!=="offset")switch(I=n.normalizePropertyName(I,i),P){case Ru:P=t.get(y);break;case Ir:P=r.get(y);break;default:P=n.normalizeStyleValue(y,I,P,i);break}p.set(I,P)}),h||o.push(p),a=p,s=u}),i.length)throw r3(i);return o}function Rp(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&ow(t,"start",n)));break;case"done":n.onDone(()=>r(t&&ow(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&ow(t,"destroy",n)));break}}function ow(n,e,t){let r=t.totalTime,i=!!t.disabled,o=Np(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,r??n.totalTime,i),s=n._data;return s!=null&&(o._data=s),o}function Np(n,e,t,r,i="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!s}}function wn(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function lw(n){let e=n.indexOf(":"),t=n.substring(1,e),r=n.slice(e+1);return[t,r]}var i3=typeof document>"u"?null:document.documentElement;function Pp(n){let e=n.parentNode||n.host||null;return e===i3?null:e}function o3(n){return n.substring(1,6)=="ebkit"}var Ns=null,QR=!1;function wN(n){Ns||(Ns=s3()||{},QR=Ns.style?"WebkitAppearance"in Ns.style:!1);let e=!0;return Ns.style&&!o3(n)&&(e=n in Ns.style,!e&&QR&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Ns.style)),e}function s3(){return typeof document<"u"?document.body:null}function uw(n,e){for(;e;){if(e===n)return!0;e=Pp(e)}return!1}function dw(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let r=n.querySelector(e);return r?[r]:[]}var a3=1e3,hw="{{",c3="}}",fw="ng-enter",xp="ng-leave",Nu="ng-trigger",Pu=".ng-trigger",pw="ng-animating",Op=".ng-animating";function Wr(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:sw(parseFloat(e[1]),e[2])}function sw(n,e){switch(e){case"s":return n*a3;default:return n}}function xu(n,e,t){return n.hasOwnProperty("duration")?n:u3(n,e,t)}var l3=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function u3(n,e,t){let r,i=0,o="";if(typeof n=="string"){let s=n.match(l3);if(s===null)return e.push(KR(n)),{duration:0,delay:0,easing:""};r=sw(parseFloat(s[1]),s[2]);let a=s[3];a!=null&&(i=sw(parseFloat(a),s[4]));let c=s[5];c&&(o=c)}else r=n;if(!t){let s=!1,a=e.length;r<0&&(e.push(Z4()),s=!0),i<0&&(e.push(X4()),s=!0),s&&e.splice(a,0,KR(n))}return{duration:r,delay:i,easing:o}}function IN(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function br(n,e,t){e.forEach((r,i)=>{let o=kp(i);t&&!t.has(i)&&t.set(i,n.style[o]),n.style[o]=r})}function To(n,e){e.forEach((t,r)=>{let i=kp(r);n.style[i]=""})}function tc(n){return Array.isArray(n)?n.length==1?n[0]:WR(n):n}function bN(n,e,t){let r=e.params||{},i=mw(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(e3(o))})}var aw=new RegExp(`${hw}\\s*(.+?)\\s*${c3}`,"g");function mw(n){let e=[];if(typeof n=="string"){let t;for(;t=aw.exec(n);)e.push(t[1]);aw.lastIndex=0}return e}function nc(n,e,t){let r=`${n}`,i=r.replace(aw,(o,s)=>{let a=e[s];return a==null&&(t.push(t3(s)),a=""),a.toString()});return i==r?n:i}var d3=/-+([a-z0-9])/g;function kp(n){return n.replace(d3,(...e)=>e[1].toUpperCase())}function CN(n,e){return n===0||e===0}function TN(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((o,s)=>{r.has(s)||i.push(s),r.set(s,o)}),i.length)for(let o=1;o<e.length;o++){let s=e[o];i.forEach(a=>s.set(a,Fp(n,a)))}}return e}function In(n,e,t){switch(e.type){case ve.Trigger:return n.visitTrigger(e,t);case ve.State:return n.visitState(e,t);case ve.Transition:return n.visitTransition(e,t);case ve.Sequence:return n.visitSequence(e,t);case ve.Group:return n.visitGroup(e,t);case ve.Animate:return n.visitAnimate(e,t);case ve.Keyframes:return n.visitKeyframes(e,t);case ve.Style:return n.visitStyle(e,t);case ve.Reference:return n.visitReference(e,t);case ve.AnimateChild:return n.visitAnimateChild(e,t);case ve.AnimateRef:return n.visitAnimateRef(e,t);case ve.Query:return n.visitQuery(e,t);case ve.Stagger:return n.visitStagger(e,t);default:throw n3(e.type)}}function Fp(n,e){return window.getComputedStyle(n)[e]}var Pw=(()=>{class n{validateStyleProperty(t){return wN(t)}containsElement(t,r){return uw(t,r)}getParentElement(t){return Pp(t)}query(t,r,i){return dw(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,s,a=[],c){return new Mi(i,o)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})(),xs=class{static NOOP=new Pw},Os=class{};var h3=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Bp=class extends Os{normalizePropertyName(e,t){return kp(e)}normalizeStyleValue(e,t,r,i){let o="",s=r.toString().trim();if(h3.has(t)&&r!==0&&r!=="0")if(typeof r=="number")o="px";else{let a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&i.push(YR(e,r))}return s+o}};var $p="*";function f3(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(r=>p3(r,t,e)):t.push(n),t}function p3(n,e,t){if(n[0]==":"){let c=m3(n,t);if(typeof c=="function"){e.push(c);return}n=c}let r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(r==null||r.length<4)return t.push(cN(n)),e;let i=r[1],o=r[2],s=r[3];e.push(DN(i,s));let a=i==$p&&s==$p;o[0]=="<"&&!a&&e.push(DN(s,i))}function m3(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(lN(n)),"* => *"}}var Lp=new Set(["true","1"]),Vp=new Set(["false","0"]);function DN(n,e){let t=Lp.has(n)||Vp.has(n),r=Lp.has(e)||Vp.has(e);return(i,o)=>{let s=n==$p||n==i,a=e==$p||e==o;return!s&&t&&typeof i=="boolean"&&(s=i?Lp.has(n):Vp.has(n)),!a&&r&&typeof o=="boolean"&&(a=o?Lp.has(e):Vp.has(e)),s&&a}}var FN=":self",g3=new RegExp(`s*${FN}s*,?`,"g");function LN(n,e,t,r){return new ww(n).build(e,t,r)}var SN="",ww=class{_driver;constructor(e){this._driver=e}build(e,t,r){let i=new Iw(t);return this._resetContextStyleTimingState(i),In(this,tc(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector=SN,e.collectedStyles=new Map,e.collectedStyles.set(SN,new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&t.errors.push(JR()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==ve.State){let c=a,u=c.name;u.toString().split(/\s*,\s*/).forEach(h=>{c.name=h,o.push(this.visitState(c,t))}),c.name=u}else if(a.type==ve.Transition){let c=this.visitTransition(a,t);r+=c.queryCount,i+=c.depCount,s.push(c)}else t.errors.push(ZR())}),{type:ve.Trigger,name:e.name,states:o,transitions:s,queryCount:r,depCount:i,options:null}}visitState(e,t){let r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){let o=new Set,s=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{mw(c).forEach(u=>{s.hasOwnProperty(u)||o.add(u)})})}),o.size&&t.errors.push(XR(e.name,[...o.values()]))}return{type:ve.State,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let r=In(this,tc(e.animation),t),i=f3(e.expr,t.errors);return{type:ve.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Ps(e.options)}}visitSequence(e,t){return{type:ve.Sequence,steps:e.steps.map(r=>In(this,r,t)),options:Ps(e.options)}}visitGroup(e,t){let r=t.currentTime,i=0,o=e.steps.map(s=>{t.currentTime=r;let a=In(this,s,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:ve.Group,steps:o,options:Ps(e.options)}}visitAnimate(e,t){let r=E3(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:iw({});if(o.type==ve.Keyframes)i=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;let u={};r.easing&&(u.easing=r.easing),s=iw(u)}t.currentTime+=r.duration+r.delay;let c=this.visitStyle(s,t);c.isEmptyStep=a,i=c}return t.currentAnimateTimings=null,{type:ve.Animate,timings:r,style:i,options:null}}visitStyle(e,t){let r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){let r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)typeof a=="string"?a===Ir?r.push(a):t.errors.push(eN(a)):r.push(new Map(Object.entries(a)));let o=!1,s=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let c of a.values())if(c.toString().indexOf(hw)>=0){o=!0;break}}}),{type:ve.Style,styles:r,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){let r=t.currentAnimateTimings,i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,c)=>{let u=t.collectedStyles.get(t.currentQuerySelector),h=u.get(c),p=!0;h&&(o!=i&&o>=h.startTime&&i<=h.endTime&&(t.errors.push(tN(c,h.startTime,h.endTime,o,i)),p=!1),o=h.startTime),p&&u.set(c,{startTime:o,endTime:i}),t.options&&bN(a,t.options,t.errors)})})}visitKeyframes(e,t){let r={type:ve.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(nN()),r;let i=1,o=0,s=[],a=!1,c=!1,u=0,h=e.steps.map(F=>{let W=this._makeStyleAst(F,t),J=W.offset!=null?W.offset:_3(W.styles),ie=0;return J!=null&&(o++,ie=W.offset=J),c=c||ie<0||ie>1,a=a||ie<u,u=ie,s.push(ie),W});c&&t.errors.push(rN()),a&&t.errors.push(iN());let p=e.steps.length,m=0;o>0&&o<p?t.errors.push(oN()):o==0&&(m=i/(p-1));let y=p-1,I=t.currentTime,P=t.currentAnimateTimings,A=P.duration;return h.forEach((F,W)=>{let J=m>0?W==y?1:m*W:s[W],ie=J*A;t.currentTime=I+P.delay+ie,P.duration=ie,this._validateStyleAst(F,t),F.offset=J,r.styles.push(F)}),r}visitReference(e,t){return{type:ve.Reference,animation:In(this,tc(e.animation),t),options:Ps(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:ve.AnimateChild,options:Ps(e.options)}}visitAnimateRef(e,t){return{type:ve.AnimateRef,animation:this.visitReference(e.animation,t),options:Ps(e.options)}}visitQuery(e,t){let r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;let[o,s]=y3(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,wn(t.collectedStyles,t.currentQuerySelector,new Map);let a=In(this,tc(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:ve.Query,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:Ps(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(sN());let r=e.timings==="full"?{duration:0,delay:0,easing:"full"}:xu(e.timings,t.errors,!0);return{type:ve.Stagger,animation:In(this,tc(e.animation),t),timings:r,options:null}}};function y3(n){let e=!!n.split(/\s*,\s*/).find(t=>t==FN);return e&&(n=n.replace(g3,"")),n=n.replace(/@\*/g,Pu).replace(/@\w+/g,t=>Pu+"-"+t.slice(1)).replace(/:animating/g,Op),[n,e]}function v3(n){return n?k({},n):null}var Iw=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function _3(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function E3(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=xu(n,e).duration;return gw(o,0,"")}let t=n;if(t.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=gw(0,0,"");return o.dynamic=!0,o.strValue=t,o}let i=xu(t,e);return gw(i.duration,i.delay,i.easing)}function Ps(n){return n?(n=k({},n),n.params&&(n.params=v3(n.params))):n={},n}function gw(n,e,t){return{duration:n,delay:e,easing:t}}function xw(n,e,t,r,i,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:s,subTimeline:a}}var ku=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},w3=1,I3=":enter",b3=new RegExp(I3,"g"),C3=":leave",T3=new RegExp(C3,"g");function VN(n,e,t,r,i,o=new Map,s=new Map,a,c,u=[]){return new bw().buildKeyframes(n,e,t,r,i,o,s,a,c,u)}var bw=class{buildKeyframes(e,t,r,i,o,s,a,c,u,h=[]){u=u||new ku;let p=new Cw(e,t,u,i,o,h,[]);p.options=c;let m=c.delay?Wr(c.delay):0;p.currentTimeline.delayNextStep(m),p.currentTimeline.setStyles([s],null,p.errors,c),In(this,r,p);let y=p.timelines.filter(I=>I.containsAnimation());if(y.length&&a.size){let I;for(let P=y.length-1;P>=0;P--){let A=y[P];if(A.element===t){I=A;break}}I&&!I.allowOnlyTimelineStyles()&&I.setStyles([a],null,p.errors,c)}return y.length?y.map(I=>I.buildKeyframes()):[xw(t,[],[],[],0,m,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let r=t.subInstructions.get(t.element);if(r){let i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(r,i,i.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){let r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(let i of e){let o=i?.delay;if(o){let s=typeof o=="number"?o:Wr(nc(o,i?.params??{},t.errors));r.delayNextStep(s)}}}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime,s=r.duration!=null?Wr(r.duration):null,a=r.delay!=null?Wr(r.delay):null;return s!==0&&e.forEach(c=>{let u=t.appendInstructionToTimeline(c,s,a);o=Math.max(o,u.duration+u.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),In(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let r=t.subContextCount,i=t,o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),o.delay!=null)){i.previousNode.type==ve.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Hp);let s=Wr(o.delay);i.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>In(this,s,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let r=[],i=t.currentTimeline.currentTime,o=e.options&&e.options.delay?Wr(e.options.delay):0;e.steps.forEach(s=>{let a=t.createSubContext(e.options);o&&a.delayNextStep(o),In(this,s,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let r=e.strValue,i=t.params?nc(r,t.params,t.errors):r;return xu(i,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());let o=e.style;o.type==ve.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();let o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(c=>{let u=c.offset||0;a.forwardTime(u*o),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){let r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?Wr(i.delay):0;o&&(t.previousNode.type===ve.Style||r==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Hp);let s=r,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((u,h)=>{t.currentQueryIndex=h;let p=t.createSubContext(e.options,u);o&&p.delayNextStep(o),u===t.element&&(c=p.currentTimeline),In(this,e.animation,p),p.currentTimeline.applyStylesToKeyframe();let m=p.currentTimeline.currentTime;s=Math.max(s,m)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let r=t.parentContext,i=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1),c=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":c=a-c;break;case"full":c=r.currentStaggerTime;break}let h=t.currentTimeline;c&&h.delayNextStep(c);let p=h.currentTime;In(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-p+(i.startTime-r.currentTimeline.startTime)}},Hp={},Cw=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=Hp;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,r,i,o,s,a,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=s,this.timelines=a,this.currentTimeline=c||new zp(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let r=e,i=this.options;r.duration!=null&&(i.duration=Wr(r.duration)),r.delay!=null&&(i.delay=Wr(r.delay));let o=r.params;if(o){let s=i.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=nc(o[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){let i=t||this.element,o=new n(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=Hp,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){let i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},o=new Tw(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,s){let a=[];if(i&&a.push(this.element),e.length>0){e=e.replace(b3,"."+this._enterClassName),e=e.replace(T3,"."+this._leaveClassName);let c=r!=1,u=this._driver.query(this.element,e,c);r!==0&&(u=r<0?u.slice(u.length+r,u.length):u.slice(0,r)),a.push(...u)}return!o&&a.length==0&&s.push(aN(t)),a}},zp=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=w3,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Ir),this._currentKeyframe.set(t,Ir);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);let o=i&&i.params||{},s=D3(e,this._globalTimelineStyles);for(let[a,c]of s){let u=nc(c,o,r);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Ir),this._updateStyle(a,u)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{let i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,r=this._keyframes.size===1&&this.duration===0,i=[];this._keyframes.forEach((a,c)=>{let u=new Map([...this._backFill,...a]);u.forEach((h,p)=>{h===Ru?e.add(p):h===Ir&&t.add(p)}),r||u.set("offset",c/this.duration),i.push(u)});let o=[...e.values()],s=[...t.values()];if(r){let a=i[0],c=new Map(a);a.set("offset",0),c.set("offset",1),i=[a,c]}return xw(this.element,i,o,s,this.duration,this.startTime,this.easing,!1)}},Tw=class extends zp{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,r,i,o,s,a=!1){super(e,t,s.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){let o=[],s=r+t,a=t/s,c=new Map(e[0]);c.set("offset",0),o.push(c);let u=new Map(e[0]);u.set("offset",AN(a)),o.push(u);let h=e.length-1;for(let p=1;p<=h;p++){let m=new Map(e[p]),y=m.get("offset"),I=t+y*r;m.set("offset",AN(I/s)),o.push(m)}r=s,t=0,i="",e=o}return xw(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}};function AN(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function D3(n,e){let t=new Map,r;return n.forEach(i=>{if(i==="*"){r??=e.keys();for(let o of r)t.set(o,Ir)}else for(let[o,s]of i)t.set(o,s)}),t}function MN(n,e,t,r,i,o,s,a,c,u,h,p,m){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:s,timelines:a,queriedElements:c,preStyleProps:u,postStyleProps:h,totalTime:p,errors:m}}var yw={},qp=class{_triggerName;ast;_stateStyles;constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return S3(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return e!==void 0&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,o,s,a,c,u,h){let p=[],m=this.ast.options&&this.ast.options.params||yw,y=a&&a.params||yw,I=this.buildStyles(r,y,p),P=c&&c.params||yw,A=this.buildStyles(i,P,p),F=new Set,W=new Map,J=new Map,ie=i==="void",Ue={params:UN(P,m),delay:this.ast.options?.delay},we=h?[]:VN(e,t,this.ast.animation,o,s,I,A,Ue,u,p),C=0;return we.forEach(v=>{C=Math.max(v.duration+v.delay,C)}),p.length?MN(t,this._triggerName,r,i,ie,I,A,[],[],W,J,C,p):(we.forEach(v=>{let w=v.element,S=wn(W,w,new Set);v.preStyleProps.forEach(R=>S.add(R));let D=wn(J,w,new Set);v.postStyleProps.forEach(R=>D.add(R)),w!==t&&F.add(w)}),MN(t,this._triggerName,r,i,ie,I,A,we,[...F.values()],W,J,C))}};function S3(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}function UN(n,e){let t=k({},e);return Object.entries(n).forEach(([r,i])=>{i!=null&&(t[r]=i)}),t}var Dw=class{styles;defaultParams;normalizer;constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){let r=new Map,i=UN(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=nc(s,i,t));let c=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,c,s,t),r.set(a,s)})}),r}};function A3(n,e,t){return new Sw(n,e,t)}var Sw=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,t.states.forEach(i=>{let o=i.options&&i.options.params||{};this.states.set(i.name,new Dw(i.style,o,r))}),RN(this.states,"true","1"),RN(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new qp(e,i,this.states))}),this.fallbackTransition=M3(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(s=>s.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}};function M3(n,e,t){let r=[(s,a)=>!0],i={type:ve.Sequence,steps:[],options:null},o={type:ve.Transition,animation:i,matchers:r,options:null,queryCount:0,depCount:0};return new qp(n,o,e)}function RN(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var R3=new ku,Aw=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r}register(e,t){let r=[],i=[],o=LN(this._driver,t,r,i);if(r.length)throw dN(r);this._animations.set(e,o)}_buildPlayer(e,t,r){let i=e.element,o=cw(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){let i=[],o=this._animations.get(e),s,a=new Map;if(o?(s=VN(this._driver,t,o,fw,xp,new Map,new Map,r,R3,i),s.forEach(h=>{let p=wn(a,h.element,new Map);h.postStyleProps.forEach(m=>p.set(m,null))})):(i.push(hN()),s=[]),i.length)throw fN(i);a.forEach((h,p)=>{h.forEach((m,y)=>{h.set(y,this._driver.computeStyle(p,y,Ir))})});let c=s.map(h=>{let p=a.get(h.element);return this._buildPlayer(h,new Map,p)}),u=Ri(c);return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw pN(e);return t}listen(e,t,r,i){let o=Np(t,"","","");return Rp(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if(r=="register"){this.register(e,i[0]);return}if(r=="create"){let s=i[0]||{};this.create(e,t,s);return}let o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e);break}}},NN="ng-animate-queued",N3=".ng-animate-queued",vw="ng-animate-disabled",P3=".ng-animate-disabled",x3="ng-star-inserted",O3=".ng-star-inserted",k3=[],jN={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},F3={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Cr="__ng_removed",Fu=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let r=e&&e.hasOwnProperty("value"),i=r?e.value:e;if(this.value=V3(i),r){let o=e,{value:s}=o,a=sa(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let r=this.options.params;Object.keys(t).forEach(i=>{r[i]==null&&(r[i]=t[i])})}}},Ou="void",_w=new Fu(Ou),Mw=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this._hostClassName="ng-tns-"+e,Jn(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw mN(r,t);if(r==null||r.length==0)throw gN(t);if(!U3(r))throw yN(r,t);let o=wn(this._elementListeners,e,[]),s={name:t,phase:r,callback:i};o.push(s);let a=wn(this._engine.statesByElement,e,new Map);return a.has(t)||(Jn(e,Nu),Jn(e,Nu+"-"+t),a.set(t,_w)),()=>{this._engine.afterFlush(()=>{let c=o.indexOf(s);c>=0&&o.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw vN(e);return t}trigger(e,t,r,i=!0){let o=this._getTrigger(t),s=new Lu(this.id,t,e),a=this._engine.statesByElement.get(e);a||(Jn(e,Nu),Jn(e,Nu+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),u=new Fu(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&u.absorbOptions(c.options),a.set(t,u),c||(c=_w),!(u.value===Ou)&&c.value===u.value){if(!$3(c.params,u.params)){let P=[],A=o.matchStyles(c.value,c.params,P),F=o.matchStyles(u.value,u.params,P);P.length?this._engine.reportError(P):this._engine.afterFlush(()=>{To(e,A),br(e,F)})}return}let m=wn(this._engine.playersByElement,e,[]);m.forEach(P=>{P.namespaceId==this.id&&P.triggerName==t&&P.queued&&P.destroy()});let y=o.matchTransition(c.value,u.value,e,u.params),I=!1;if(!y){if(!i)return;y=o.fallbackTransition,I=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:y,fromState:c,toState:u,player:s,isFallbackTransition:I}),I||(Jn(e,NN),s.onStart(()=>{rc(e,NN)})),s.onDone(()=>{let P=this.players.indexOf(s);P>=0&&this.players.splice(P,1);let A=this._engine.playersByElement.get(e);if(A){let F=A.indexOf(s);F>=0&&A.splice(F,1)}}),this.players.push(s),m.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let r=this._engine.driver.query(e,Pu,!0);r.forEach(i=>{if(i[Cr])return;let o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(s=>s.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let a=[];if(o.forEach((c,u)=>{if(s.set(u,c.value),this._triggers.has(u)){let h=this.trigger(e,u,Ou,i);h&&a.push(h)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),r&&Ri(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){let i=new Set;t.forEach(o=>{let s=o.name;if(i.has(s))return;i.add(s);let c=this._triggers.get(s).fallbackTransition,u=r.get(s)||_w,h=new Fu(Ou),p=new Lu(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:c,fromState:u,toState:h,player:p,isFallbackTransition:!0})})}}removeNode(e,t){let r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){let o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let s=e;for(;s=s.parentNode;)if(r.statesByElement.get(s)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{let o=e[Cr];(!o||o===jN)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Jn(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(r=>{let i=r.player;if(i.destroyed)return;let o=r.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==r.triggerName){let c=Np(o,r.triggerName,r.fromState.value,r.toState.value);c._data=e,Rp(r.player,a.phase,c,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{let o=r.transition.ast.depCount,s=i.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},Rw=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){let r=new Mw(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){let r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){let c=i.get(a);if(c){let u=r.indexOf(c);r.splice(u+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let r=this._fetchNamespace(e);this.namespacesByHostElement.delete(r.hostElement);let i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,r=this.statesByElement.get(e);if(r){for(let i of r.values())if(i.namespaceId){let o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}}return t}trigger(e,t,r,i){if(Up(t)){let o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Up(t))return;let o=t[Cr];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Jn(e,vw)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),rc(e,vw))}removeNode(e,t,r){if(Up(t)){let i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);let o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[Cr]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return Up(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,Pu,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,Op,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Ri(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[Cr];if(t&&t.setForRemoval){if(e[Cr]=jN,t.namespaceId){this.destroyInnerAnimations(e);let r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(vw)&&this.markElementAsDisabled(e,!1),this.driver.query(e,P3,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++){let i=this.collectedEnterElements[r];Jn(i,x3)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++){let i=this.collectedLeaveElements[r];this.processLeaveNode(i)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){let r=this._whenQuietFns;this._whenQuietFns=[],t.length?Ri(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw _N(e)}_flushAnimations(e,t){let r=new ku,i=[],o=new Map,s=[],a=new Map,c=new Map,u=new Map,h=new Set;this.disabledNodes.forEach(K=>{h.add(K);let ee=this.driver.query(K,N3,!0);for(let te=0;te<ee.length;te++)h.add(ee[te])});let p=this.bodyNode,m=Array.from(this.statesByElement.keys()),y=ON(m,this.collectedEnterElements),I=new Map,P=0;y.forEach((K,ee)=>{let te=fw+P++;I.set(ee,te),K.forEach(_e=>Jn(_e,te))});let A=[],F=new Set,W=new Set;for(let K=0;K<this.collectedLeaveElements.length;K++){let ee=this.collectedLeaveElements[K],te=ee[Cr];te&&te.setForRemoval&&(A.push(ee),F.add(ee),te.hasAnimation?this.driver.query(ee,O3,!0).forEach(_e=>F.add(_e)):W.add(ee))}let J=new Map,ie=ON(m,Array.from(F));ie.forEach((K,ee)=>{let te=xp+P++;J.set(ee,te),K.forEach(_e=>Jn(_e,te))}),e.push(()=>{y.forEach((K,ee)=>{let te=I.get(ee);K.forEach(_e=>rc(_e,te))}),ie.forEach((K,ee)=>{let te=J.get(ee);K.forEach(_e=>rc(_e,te))}),A.forEach(K=>{this.processLeaveNode(K)})});let Ue=[],we=[];for(let K=this._namespaceList.length-1;K>=0;K--)this._namespaceList[K].drainQueuedTransitions(t).forEach(te=>{let _e=te.player,vt=te.element;if(Ue.push(_e),this.collectedEnterElements.length){let _t=vt[Cr];if(_t&&_t.setForMove){if(_t.previousTriggersValues&&_t.previousTriggersValues.has(te.triggerName)){let ir=_t.previousTriggersValues.get(te.triggerName),cn=this.statesByElement.get(te.element);if(cn&&cn.has(te.triggerName)){let Ko=cn.get(te.triggerName);Ko.value=ir,cn.set(te.triggerName,Ko)}}_e.destroy();return}}let Dn=!p||!this.driver.containsElement(p,vt),qt=J.get(vt),rr=I.get(vt),$e=this._buildInstruction(te,r,rr,qt,Dn);if($e.errors&&$e.errors.length){we.push($e);return}if(Dn){_e.onStart(()=>To(vt,$e.fromStyles)),_e.onDestroy(()=>br(vt,$e.toStyles)),i.push(_e);return}if(te.isFallbackTransition){_e.onStart(()=>To(vt,$e.fromStyles)),_e.onDestroy(()=>br(vt,$e.toStyles)),i.push(_e);return}let na=[];$e.timelines.forEach(_t=>{_t.stretchStartingKeyframe=!0,this.disabledNodes.has(_t.element)||na.push(_t)}),$e.timelines=na,r.append(vt,$e.timelines);let $c={instruction:$e,player:_e,element:vt};s.push($c),$e.queriedElements.forEach(_t=>wn(a,_t,[]).push(_e)),$e.preStyleProps.forEach((_t,ir)=>{if(_t.size){let cn=c.get(ir);cn||c.set(ir,cn=new Set),_t.forEach((Ko,Hc)=>cn.add(Hc))}}),$e.postStyleProps.forEach((_t,ir)=>{let cn=u.get(ir);cn||u.set(ir,cn=new Set),_t.forEach((Ko,Hc)=>cn.add(Hc))})});if(we.length){let K=[];we.forEach(ee=>{K.push(EN(ee.triggerName,ee.errors))}),Ue.forEach(ee=>ee.destroy()),this.reportError(K)}let C=new Map,v=new Map;s.forEach(K=>{let ee=K.element;r.has(ee)&&(v.set(ee,ee),this._beforeAnimationBuild(K.player.namespaceId,K.instruction,C))}),i.forEach(K=>{let ee=K.element;this._getPreviousPlayers(ee,!1,K.namespaceId,K.triggerName,null).forEach(_e=>{wn(C,ee,[]).push(_e),_e.destroy()})});let w=A.filter(K=>kN(K,c,u)),S=new Map;xN(S,this.driver,W,u,Ir).forEach(K=>{kN(K,c,u)&&w.push(K)});let R=new Map;y.forEach((K,ee)=>{xN(R,this.driver,new Set(K),c,Ru)}),w.forEach(K=>{let ee=S.get(K),te=R.get(K);S.set(K,new Map([...ee?.entries()??[],...te?.entries()??[]]))});let E=[],Bt=[],nr={};s.forEach(K=>{let{element:ee,player:te,instruction:_e}=K;if(r.has(ee)){if(h.has(ee)){te.onDestroy(()=>br(ee,_e.toStyles)),te.disabled=!0,te.overrideTotalTime(_e.totalTime),i.push(te);return}let vt=nr;if(v.size>1){let qt=ee,rr=[];for(;qt=qt.parentNode;){let $e=v.get(qt);if($e){vt=$e;break}rr.push(qt)}rr.forEach($e=>v.set($e,vt))}let Dn=this._buildAnimation(te.namespaceId,_e,C,o,R,S);if(te.setRealPlayer(Dn),vt===nr)E.push(te);else{let qt=this.playersByElement.get(vt);qt&&qt.length&&(te.parentPlayer=Ri(qt)),i.push(te)}}else To(ee,_e.fromStyles),te.onDestroy(()=>br(ee,_e.toStyles)),Bt.push(te),h.has(ee)&&i.push(te)}),Bt.forEach(K=>{let ee=o.get(K.element);if(ee&&ee.length){let te=Ri(ee);K.setRealPlayer(te)}}),i.forEach(K=>{K.parentPlayer?K.syncPlayerEvents(K.parentPlayer):K.destroy()});for(let K=0;K<A.length;K++){let ee=A[K],te=ee[Cr];if(rc(ee,xp),te&&te.hasAnimation)continue;let _e=[];if(a.size){let Dn=a.get(ee);Dn&&Dn.length&&_e.push(...Dn);let qt=this.driver.query(ee,Op,!0);for(let rr=0;rr<qt.length;rr++){let $e=a.get(qt[rr]);$e&&$e.length&&_e.push(...$e)}}let vt=_e.filter(Dn=>!Dn.destroyed);vt.length?j3(this,ee,vt):this.processLeaveNode(ee)}return A.length=0,E.forEach(K=>{this.players.push(K),K.onDone(()=>{K.destroy();let ee=this.players.indexOf(K);this.players.splice(ee,1)}),K.play()}),E}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let s=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let c=!o||o==Ou;a.forEach(u=>{u.queued||!c&&u.triggerName!=i||s.push(u)})}}return(r||i)&&(s=s.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),s}_beforeAnimationBuild(e,t,r){let i=t.triggerName,o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:i;for(let c of t.timelines){let u=c.element,h=u!==o,p=wn(r,u,[]);this._getPreviousPlayers(u,h,s,a,t.toState).forEach(y=>{let I=y.getRealPlayer();I.beforeDestroy&&I.beforeDestroy(),y.destroy(),p.push(y)})}To(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,s){let a=t.triggerName,c=t.element,u=[],h=new Set,p=new Set,m=t.timelines.map(I=>{let P=I.element;h.add(P);let A=P[Cr];if(A&&A.removedBeforeQueried)return new Mi(I.duration,I.delay);let F=P!==c,W=B3((r.get(P)||k3).map(C=>C.getRealPlayer())).filter(C=>{let v=C;return v.element?v.element===P:!1}),J=o.get(P),ie=s.get(P),Ue=cw(this._normalizer,I.keyframes,J,ie),we=this._buildPlayer(I,Ue,W);if(I.subTimeline&&i&&p.add(P),F){let C=new Lu(e,a,P);C.setRealPlayer(we),u.push(C)}return we});u.forEach(I=>{wn(this.playersByQueriedElement,I.element,[]).push(I),I.onDone(()=>L3(this.playersByQueriedElement,I.element,I))}),h.forEach(I=>Jn(I,pw));let y=Ri(m);return y.onDestroy(()=>{h.forEach(I=>rc(I,pw)),br(c,t.toStyles)}),p.forEach(I=>{wn(i,I,[]).push(y)}),y}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new Mi(e.duration,e.delay)}},Lu=class{namespaceId;triggerName;element;_player=new Mi;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>Rp(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){wn(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function L3(n,e,t){let r=n.get(e);if(r){if(r.length){let i=r.indexOf(t);r.splice(i,1)}r.length==0&&n.delete(e)}return r}function V3(n){return n??null}function Up(n){return n&&n.nodeType===1}function U3(n){return n=="start"||n=="done"}function PN(n,e){let t=n.style.display;return n.style.display=e??"none",t}function xN(n,e,t,r,i){let o=[];t.forEach(c=>o.push(PN(c)));let s=[];r.forEach((c,u)=>{let h=new Map;c.forEach(p=>{let m=e.computeStyle(u,p,i);h.set(p,m),(!m||m.length==0)&&(u[Cr]=F3,s.push(u))}),n.set(u,h)});let a=0;return t.forEach(c=>PN(c,o[a++])),s}function ON(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let r=1,i=new Set(e),o=new Map;function s(a){if(!a)return r;let c=o.get(a);if(c)return c;let u=a.parentNode;return t.has(u)?c=u:i.has(u)?c=r:c=s(u),o.set(a,c),c}return e.forEach(a=>{let c=s(a);c!==r&&t.get(c).push(a)}),t}function Jn(n,e){n.classList?.add(e)}function rc(n,e){n.classList?.remove(e)}function j3(n,e,t){Ri(t).onDone(()=>n.processLeaveNode(e))}function B3(n){let e=[];return BN(n,e),e}function BN(n,e){for(let t=0;t<n.length;t++){let r=n[t];r instanceof ec?BN(r.players,e):e.push(r)}}function $3(n,e){let t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){let o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}function kN(n,e,t){let r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}var ic=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,r){this._driver=t,this._normalizer=r,this._transitionEngine=new Rw(e.body,t,r),this._timelineEngine=new Aw(e.body,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,i,o){let s=e+"-"+i,a=this._triggerCache[s];if(!a){let c=[],u=[],h=LN(this._driver,o,c,u);if(c.length)throw uN(i,c);a=A3(i,h,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if(r.charAt(0)=="@"){let[o,s]=lw(r),a=i;this._timelineEngine.command(o,t,s,a)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if(r.charAt(0)=="@"){let[s,a]=lw(r);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function H3(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=Ew(e[0]),e.length>1&&(r=Ew(e[e.length-1]))):e instanceof Map&&(t=Ew(e)),t||r?new z3(n,t,r):null}var z3=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&br(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(br(this._element,this._initialStyles),this._endStyles&&(br(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(To(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(To(this._element,this._endStyles),this._endStyles=null),br(this._element,this._initialStyles),this._state=3)}}return n})();function Ew(n){let e=null;return n.forEach((t,r)=>{q3(r)&&(e=e||new Map,e.set(r,t))}),e}function q3(n){return n==="display"||n==="position"}var Gp=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer=null;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer()&&this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return this.domPlayer;this._initialized=!0;let e=this.keyframes,t=this._triggerWebAnimation(this.element,e,this.options);if(!t)return this._onFinish(),null;this.domPlayer=t,this._finalKeyframe=e.length?e[e.length-1]:new Map;let r=()=>this._onFinish();return t.addEventListener("finish",r),this.onDestroy(()=>{t.removeEventListener("finish",r)}),t}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer?.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){let i=this._convertKeyframesToObject(t);try{return e.animate(i,r)}catch{return null}}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){let e=this._buildPlayer();e&&(this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),e.play())}pause(){this.init(),this.domPlayer?.pause()}finish(){this.init(),this.domPlayer&&(this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish())}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer?.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer||this.init(),this.domPlayer&&(this.domPlayer.currentTime=e*this.time)}getPosition(){return this.domPlayer?+(this.domPlayer.currentTime??0)/this.time:this._initialized?1:0}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{i!=="offset"&&e.set(i,this._finished?r:Fp(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}},Wp=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return uw(e,t)}getParentElement(e){return Pp(e)}query(e,t,r){return dw(e,t,r)}computeStyle(e,t,r){return Fp(e,t)}animate(e,t,r,i,o,s=[]){let a=i==0?"both":"forwards",c={duration:r,delay:i,fill:a};o&&(c.easing=o);let u=new Map,h=s.filter(y=>y instanceof Gp);CN(r,i)&&h.forEach(y=>{y.currentSnapshot.forEach((I,P)=>u.set(P,I))});let p=IN(t).map(y=>new Map(y));p=TN(e,p,u);let m=H3(e,p);return new Gp(e,p,c,m)}};var jp="@",$N="@.disabled",Kp=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r,i){if(i){this.delegate.removeChild(e,t,r,i);return}this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){t.charAt(0)==jp&&t==$N?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r,i){return this.delegate.listen(e,t,r,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},Nw=class extends Kp{factory;constructor(e,t,r,i,o){super(t,r,i,o),this.factory=e,this.namespaceId=t}setProperty(e,t,r){t.charAt(0)==jp?t.charAt(1)=="."&&t==$N?(r=r===void 0?!0:!!r,this.disableAnimations(e,r)):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r,i){if(t.charAt(0)==jp){let o=G3(e),s=t.slice(1),a="";return s.charAt(0)!=jp&&([s,a]=W3(s)),this.engine.listen(this.namespaceId,o,s,a,c=>{let u=c._data||-1;this.factory.scheduleListenerCallback(u,r,c)})}return this.delegate.listen(e,t,r,i)}};function G3(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function W3(n){let e=n.indexOf("."),t=n.substring(0,e),r=n.slice(e+1);return[t,r]}var Qp=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,r){this.delegate=e,this.engine=t,this._zone=r,t.onRemovalComplete=(i,o)=>{o?.removeChild(null,i)}}createRenderer(e,t){let i=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let u=this._rendererCache,h=u.get(i);if(!h){let p=()=>u.delete(i);h=new Kp("",i,this.engine,p),u.set(i,h)}return h}let o=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=u=>{Array.isArray(u)?u.forEach(a):this.engine.registerTrigger(o,s,e,u.name,u)};return t.data.animation.forEach(a),new Nw(this,s,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,r){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(r));return}let i=this._animationCallbacksBuffer;i.length==0&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var Q3=(()=>{class n extends ic{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||n)(Z(Je),Z(xs),Z(Os))};static \u0275prov=H({token:n,factory:n.\u0275fac})}return n})();function Y3(){return new Bp}function J3(n,e,t){return new Qp(n,e,t)}var HN=[{provide:Os,useFactory:Y3},{provide:ic,useClass:Q3},{provide:yi,useFactory:J3,deps:[su,ic,nt]}],rae=[{provide:xs,useClass:Pw},{provide:If,useValue:"NoopAnimations"},...HN],Z3=[{provide:xs,useFactory:()=>new Wp},{provide:If,useFactory:()=>"BrowserAnimations"},...HN];function zN(){return mo("NgEagerAnimations"),[...Z3]}var qN=()=>{};var KN=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},X3=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},QN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|u>>6,y=u&63;c||(y=64,s||(m=64)),r.push(t[h],t[p],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(KN(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):X3(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||u==null||p==null)throw new kw;let m=o<<2|a>>4;if(r.push(m),u!==64){let y=a<<4&240|u>>2;if(r.push(y),p!==64){let I=u<<6&192|p;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},kw=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},e$=function(n){let e=KN(n);return QN.encodeByteArray(e,!0)},Uu=function(n){return e$(n).replace(/\./g,"")},Jp=function(n){try{return QN.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function YN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var t$=()=>YN().__FIREBASE_DEFAULTS__,n$=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},r$=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Jp(n[1]);return e&&JSON.parse(e)},Zp=()=>{try{return qN()||t$()||n$()||r$()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Lw=n=>Zp()?.emulatorHosts?.[n],JN=n=>{let e=Lw(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Vw=()=>Zp()?.config,Uw=n=>Zp()?.[`_${n}`];var Yp=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Do(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function Xp(n){return _(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function ZN(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=k({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Uu(JSON.stringify(t)),Uu(JSON.stringify(s)),""].join(".")}var Vu={};function i$(){let n={prod:[],emulator:[]};for(let e of Object.keys(Vu))Vu[e]?n.emulator.push(e):n.prod.push(e);return n}function o$(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var GN=!1;function em(n,e){if(typeof window>"u"||typeof document>"u"||!Do(window.location.host)||Vu[n]===e||Vu[n]||GN)return;Vu[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=i$().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{GN=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=o$(r),y=t("text"),I=document.getElementById(y)||document.createElement("span"),P=t("learnmore"),A=document.getElementById(P)||document.createElement("a"),F=t("preprendIcon"),W=document.getElementById(F)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let J=m.element;a(J),h(A,P);let ie=u();c(W,F),J.append(W,I,A,ie),document.body.appendChild(J)}o?(I.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ft())}function s$(){let n=Zp()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tP(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function nP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rP(){let n=Ft();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function iP(){return!s$()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jw(){try{return typeof indexedDB=="object"}catch{return!1}}function oP(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var a$="FirebaseError",Fn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=a$,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ni.prototype.create)}},Ni=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?c$(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Fn(i,a,r)}};function c$(n,e){return n.replace(l$,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var l$=/\{\$([^}]+)}/g;function sP(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Kr(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(WN(o)&&WN(s)){if(!Kr(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function WN(n){return n!==null&&typeof n=="object"}function ju(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function oc(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function sc(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function aP(n,e){let t=new Fw(n,e);return t.subscribe.bind(t)}var Fw=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");u$(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Ow),i.error===void 0&&(i.error=Ow),i.complete===void 0&&(i.complete=Ow);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function u$(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ow(){}var aae=14400*1e3;function yt(n){return n&&n._delegate?n._delegate:n}var Zn=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ks="[DEFAULT]";var Bw=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Yp;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(h$(e))try{this.getOrInitializeService({instanceIdentifier:ks})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ks){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ks){return this.instances.has(e)}getOptions(e=ks){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:d$(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ks){return this.component?this.component.multipleInstances?e:ks:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function d$(n){return n===ks?void 0:n}function h$(n){return n.instantiationMode==="EAGER"}var tm=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Bw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var f$=[],De=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(De||{}),p$={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},m$=De.INFO,g$={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},y$=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=g$[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},So=class{constructor(e){this.name=e,this._logLevel=m$,this._logHandler=y$,this._userLogHandler=null,f$.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?p$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}};var v$=(n,e)=>e.some(t=>n instanceof t),cP,lP;function _$(){return cP||(cP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function E$(){return lP||(lP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var uP=new WeakMap,Hw=new WeakMap,dP=new WeakMap,$w=new WeakMap,qw=new WeakMap;function w$(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(Qr(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&uP.set(t,n)}).catch(()=>{}),qw.set(e,n),e}function I$(n){if(Hw.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Hw.set(n,e)}var zw={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Hw.get(n);if(e==="objectStoreNames")return n.objectStoreNames||dP.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Qr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function hP(n){zw=n(zw)}function b$(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(nm(this),e,...t);return dP.set(r,e.sort?e.sort():[e]),Qr(r)}:E$().includes(n)?function(...e){return n.apply(nm(this),e),Qr(uP.get(this))}:function(...e){return Qr(n.apply(nm(this),e))}}function C$(n){return typeof n=="function"?b$(n):(n instanceof IDBTransaction&&I$(n),v$(n,_$())?new Proxy(n,zw):n)}function Qr(n){if(n instanceof IDBRequest)return w$(n);if($w.has(n))return $w.get(n);let e=C$(n);return e!==n&&($w.set(n,e),qw.set(e,n)),e}var nm=n=>qw.get(n);function pP(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=Qr(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Qr(s.result),c.oldVersion,c.newVersion,Qr(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var T$=["get","getKey","getAll","getAllKeys","count"],D$=["put","add","delete","clear"],Gw=new Map;function fP(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Gw.get(e))return Gw.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=D$.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||T$.includes(t)))return;let o=function(s,...a){return _(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[t](...a),i&&c.done]))[0]})};return Gw.set(e,o),o}hP(n=>Q(k({},n),{get:(e,t,r)=>fP(e,t)||n.get(e,t,r),has:(e,t)=>!!fP(e,t)||n.has(e,t)}));var Kw=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(S$(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function S$(n){return n.getComponent()?.type==="VERSION"}var Qw="@firebase/app",mP="0.14.6";var Pi=new So("@firebase/app"),A$="@firebase/app-compat",M$="@firebase/analytics-compat",R$="@firebase/analytics",N$="@firebase/app-check-compat",P$="@firebase/app-check",x$="@firebase/auth",O$="@firebase/auth-compat",k$="@firebase/database",F$="@firebase/data-connect",L$="@firebase/database-compat",V$="@firebase/functions",U$="@firebase/functions-compat",j$="@firebase/installations",B$="@firebase/installations-compat",$$="@firebase/messaging",H$="@firebase/messaging-compat",z$="@firebase/performance",q$="@firebase/performance-compat",G$="@firebase/remote-config",W$="@firebase/remote-config-compat",K$="@firebase/storage",Q$="@firebase/storage-compat",Y$="@firebase/firestore",J$="@firebase/ai",Z$="@firebase/firestore-compat",X$="firebase",eH="12.6.0";var Yw="[DEFAULT]",tH={[Qw]:"fire-core",[A$]:"fire-core-compat",[R$]:"fire-analytics",[M$]:"fire-analytics-compat",[P$]:"fire-app-check",[N$]:"fire-app-check-compat",[x$]:"fire-auth",[O$]:"fire-auth-compat",[k$]:"fire-rtdb",[F$]:"fire-data-connect",[L$]:"fire-rtdb-compat",[V$]:"fire-fn",[U$]:"fire-fn-compat",[j$]:"fire-iid",[B$]:"fire-iid-compat",[$$]:"fire-fcm",[H$]:"fire-fcm-compat",[z$]:"fire-perf",[q$]:"fire-perf-compat",[G$]:"fire-rc",[W$]:"fire-rc-compat",[K$]:"fire-gcs",[Q$]:"fire-gcs-compat",[Y$]:"fire-fst",[Z$]:"fire-fst-compat",[J$]:"fire-vertex","fire-js":"fire-js",[X$]:"fire-js-all"};var rm=new Map,nH=new Map,Jw=new Map;function gP(n,e){try{n.container.addComponent(e)}catch(t){Pi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Mo(n){let e=n.name;if(Jw.has(e))return Pi.debug(`There were multiple attempts to register component ${e}.`),!1;Jw.set(e,n);for(let t of rm.values())gP(t,n);for(let t of nH.values())gP(t,n);return!0}function $u(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function bn(n){return n==null?!1:n.settings!==void 0}var rH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ao=new Ni("app","Firebase",rH);var Zw=class{constructor(e,t,r){this._isDeleted=!1,this._options=k({},e),this._config=k({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ao.create("app-deleted",{appName:this._name})}};var Ro=eH;function tI(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=k({name:Yw,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Ao.create("bad-app-name",{appName:String(i)});if(t||(t=Vw()),!t)throw Ao.create("no-options");let o=rm.get(i);if(o){if(Kr(t,o.options)&&Kr(r,o.config))return o;throw Ao.create("duplicate-app",{appName:i})}let s=new tm(i);for(let c of Jw.values())s.addComponent(c);let a=new Zw(t,r,s);return rm.set(i,a),a}function im(n=Yw){let e=rm.get(n);if(!e&&n===Yw&&Vw())return tI();if(!e)throw Ao.create("no-app",{appName:n});return e}function Tr(n,e,t){let r=tH[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pi.warn(s.join(" "));return}Mo(new Zn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var iH="firebase-heartbeat-database",oH=1,Bu="firebase-heartbeat-store",Ww=null;function EP(){return Ww||(Ww=pP(iH,oH,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Bu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ao.create("idb-open",{originalErrorMessage:n.message})})),Ww}function sH(n){return _(this,null,function*(){try{let t=(yield EP()).transaction(Bu),r=yield t.objectStore(Bu).get(wP(n));return yield t.done,r}catch(e){if(e instanceof Fn)Pi.warn(e.message);else{let t=Ao.create("idb-get",{originalErrorMessage:e?.message});Pi.warn(t.message)}}})}function yP(n,e){return _(this,null,function*(){try{let r=(yield EP()).transaction(Bu,"readwrite");yield r.objectStore(Bu).put(e,wP(n)),yield r.done}catch(t){if(t instanceof Fn)Pi.warn(t.message);else{let r=Ao.create("idb-set",{originalErrorMessage:t?.message});Pi.warn(r.message)}}})}function wP(n){return`${n.name}!${n.options.appId}`}var aH=1024,cH=30,Xw=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new eI(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=vP();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>cH){let i=uH(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Pi.warn(e)}})}getHeartbeatsHeader(){return _(this,null,function*(){try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=vP(),{heartbeatsToSend:t,unsentEntries:r}=lH(this._heartbeatsCache.heartbeats),i=Uu(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return Pi.warn(e),""}})}};function vP(){return new Date().toISOString().substring(0,10)}function lH(n,e=aH){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),_P(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),_P(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var eI=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return jw()?oP().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield sH(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return yP(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let r=yield this.read();return yP(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function _P(n){return Uu(JSON.stringify({version:2,heartbeats:n})).length}function uH(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function dH(n){Mo(new Zn("platform-logger",e=>new Kw(e),"PRIVATE")),Mo(new Zn("heartbeat",e=>new Xw(e),"PRIVATE")),Tr(Qw,mP,n),Tr(Qw,mP,"esm2020"),Tr("fire-js","")}dH("");var hH="firebase",fH="12.6.0";Tr(hH,fH,"app");var om=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ke({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){t&1&&ot(0,"router-outlet")},dependencies:[Tu],styles:["[_nghost-%COMP%]{display:block;height:100%}"]})};var IP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bP={};var xi,nI;(function(){var n;function e(C,v){function w(){}w.prototype=v.prototype,C.F=v.prototype,C.prototype=new w,C.prototype.constructor=C,C.D=function(S,D,R){for(var E=Array(arguments.length-2),Bt=2;Bt<arguments.length;Bt++)E[Bt-2]=arguments[Bt];return v.prototype[D].apply(S,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,v,w){w||(w=0);let S=Array(16);if(typeof v=="string")for(var D=0;D<16;++D)S[D]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(D=0;D<16;++D)S[D]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=C.g[0],w=C.g[1],D=C.g[2];let R=C.g[3],E;E=v+(R^w&(D^R))+S[0]+3614090360&4294967295,v=w+(E<<7&4294967295|E>>>25),E=R+(D^v&(w^D))+S[1]+3905402710&4294967295,R=v+(E<<12&4294967295|E>>>20),E=D+(w^R&(v^w))+S[2]+606105819&4294967295,D=R+(E<<17&4294967295|E>>>15),E=w+(v^D&(R^v))+S[3]+3250441966&4294967295,w=D+(E<<22&4294967295|E>>>10),E=v+(R^w&(D^R))+S[4]+4118548399&4294967295,v=w+(E<<7&4294967295|E>>>25),E=R+(D^v&(w^D))+S[5]+1200080426&4294967295,R=v+(E<<12&4294967295|E>>>20),E=D+(w^R&(v^w))+S[6]+2821735955&4294967295,D=R+(E<<17&4294967295|E>>>15),E=w+(v^D&(R^v))+S[7]+4249261313&4294967295,w=D+(E<<22&4294967295|E>>>10),E=v+(R^w&(D^R))+S[8]+1770035416&4294967295,v=w+(E<<7&4294967295|E>>>25),E=R+(D^v&(w^D))+S[9]+2336552879&4294967295,R=v+(E<<12&4294967295|E>>>20),E=D+(w^R&(v^w))+S[10]+4294925233&4294967295,D=R+(E<<17&4294967295|E>>>15),E=w+(v^D&(R^v))+S[11]+2304563134&4294967295,w=D+(E<<22&4294967295|E>>>10),E=v+(R^w&(D^R))+S[12]+1804603682&4294967295,v=w+(E<<7&4294967295|E>>>25),E=R+(D^v&(w^D))+S[13]+4254626195&4294967295,R=v+(E<<12&4294967295|E>>>20),E=D+(w^R&(v^w))+S[14]+2792965006&4294967295,D=R+(E<<17&4294967295|E>>>15),E=w+(v^D&(R^v))+S[15]+1236535329&4294967295,w=D+(E<<22&4294967295|E>>>10),E=v+(D^R&(w^D))+S[1]+4129170786&4294967295,v=w+(E<<5&4294967295|E>>>27),E=R+(w^D&(v^w))+S[6]+3225465664&4294967295,R=v+(E<<9&4294967295|E>>>23),E=D+(v^w&(R^v))+S[11]+643717713&4294967295,D=R+(E<<14&4294967295|E>>>18),E=w+(R^v&(D^R))+S[0]+3921069994&4294967295,w=D+(E<<20&4294967295|E>>>12),E=v+(D^R&(w^D))+S[5]+3593408605&4294967295,v=w+(E<<5&4294967295|E>>>27),E=R+(w^D&(v^w))+S[10]+38016083&4294967295,R=v+(E<<9&4294967295|E>>>23),E=D+(v^w&(R^v))+S[15]+3634488961&4294967295,D=R+(E<<14&4294967295|E>>>18),E=w+(R^v&(D^R))+S[4]+3889429448&4294967295,w=D+(E<<20&4294967295|E>>>12),E=v+(D^R&(w^D))+S[9]+568446438&4294967295,v=w+(E<<5&4294967295|E>>>27),E=R+(w^D&(v^w))+S[14]+3275163606&4294967295,R=v+(E<<9&4294967295|E>>>23),E=D+(v^w&(R^v))+S[3]+4107603335&4294967295,D=R+(E<<14&4294967295|E>>>18),E=w+(R^v&(D^R))+S[8]+1163531501&4294967295,w=D+(E<<20&4294967295|E>>>12),E=v+(D^R&(w^D))+S[13]+2850285829&4294967295,v=w+(E<<5&4294967295|E>>>27),E=R+(w^D&(v^w))+S[2]+4243563512&4294967295,R=v+(E<<9&4294967295|E>>>23),E=D+(v^w&(R^v))+S[7]+1735328473&4294967295,D=R+(E<<14&4294967295|E>>>18),E=w+(R^v&(D^R))+S[12]+2368359562&4294967295,w=D+(E<<20&4294967295|E>>>12),E=v+(w^D^R)+S[5]+4294588738&4294967295,v=w+(E<<4&4294967295|E>>>28),E=R+(v^w^D)+S[8]+2272392833&4294967295,R=v+(E<<11&4294967295|E>>>21),E=D+(R^v^w)+S[11]+1839030562&4294967295,D=R+(E<<16&4294967295|E>>>16),E=w+(D^R^v)+S[14]+4259657740&4294967295,w=D+(E<<23&4294967295|E>>>9),E=v+(w^D^R)+S[1]+2763975236&4294967295,v=w+(E<<4&4294967295|E>>>28),E=R+(v^w^D)+S[4]+1272893353&4294967295,R=v+(E<<11&4294967295|E>>>21),E=D+(R^v^w)+S[7]+4139469664&4294967295,D=R+(E<<16&4294967295|E>>>16),E=w+(D^R^v)+S[10]+3200236656&4294967295,w=D+(E<<23&4294967295|E>>>9),E=v+(w^D^R)+S[13]+681279174&4294967295,v=w+(E<<4&4294967295|E>>>28),E=R+(v^w^D)+S[0]+3936430074&4294967295,R=v+(E<<11&4294967295|E>>>21),E=D+(R^v^w)+S[3]+3572445317&4294967295,D=R+(E<<16&4294967295|E>>>16),E=w+(D^R^v)+S[6]+76029189&4294967295,w=D+(E<<23&4294967295|E>>>9),E=v+(w^D^R)+S[9]+3654602809&4294967295,v=w+(E<<4&4294967295|E>>>28),E=R+(v^w^D)+S[12]+3873151461&4294967295,R=v+(E<<11&4294967295|E>>>21),E=D+(R^v^w)+S[15]+530742520&4294967295,D=R+(E<<16&4294967295|E>>>16),E=w+(D^R^v)+S[2]+3299628645&4294967295,w=D+(E<<23&4294967295|E>>>9),E=v+(D^(w|~R))+S[0]+4096336452&4294967295,v=w+(E<<6&4294967295|E>>>26),E=R+(w^(v|~D))+S[7]+1126891415&4294967295,R=v+(E<<10&4294967295|E>>>22),E=D+(v^(R|~w))+S[14]+2878612391&4294967295,D=R+(E<<15&4294967295|E>>>17),E=w+(R^(D|~v))+S[5]+4237533241&4294967295,w=D+(E<<21&4294967295|E>>>11),E=v+(D^(w|~R))+S[12]+1700485571&4294967295,v=w+(E<<6&4294967295|E>>>26),E=R+(w^(v|~D))+S[3]+2399980690&4294967295,R=v+(E<<10&4294967295|E>>>22),E=D+(v^(R|~w))+S[10]+4293915773&4294967295,D=R+(E<<15&4294967295|E>>>17),E=w+(R^(D|~v))+S[1]+2240044497&4294967295,w=D+(E<<21&4294967295|E>>>11),E=v+(D^(w|~R))+S[8]+1873313359&4294967295,v=w+(E<<6&4294967295|E>>>26),E=R+(w^(v|~D))+S[15]+4264355552&4294967295,R=v+(E<<10&4294967295|E>>>22),E=D+(v^(R|~w))+S[6]+2734768916&4294967295,D=R+(E<<15&4294967295|E>>>17),E=w+(R^(D|~v))+S[13]+1309151649&4294967295,w=D+(E<<21&4294967295|E>>>11),E=v+(D^(w|~R))+S[4]+4149444226&4294967295,v=w+(E<<6&4294967295|E>>>26),E=R+(w^(v|~D))+S[11]+3174756917&4294967295,R=v+(E<<10&4294967295|E>>>22),E=D+(v^(R|~w))+S[2]+718787259&4294967295,D=R+(E<<15&4294967295|E>>>17),E=w+(R^(D|~v))+S[9]+3951481745&4294967295,C.g[0]=C.g[0]+v&4294967295,C.g[1]=C.g[1]+(D+(E<<21&4294967295|E>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+R&4294967295}r.prototype.v=function(C,v){v===void 0&&(v=C.length);let w=v-this.blockSize,S=this.C,D=this.h,R=0;for(;R<v;){if(D==0)for(;R<=w;)i(this,C,R),R+=this.blockSize;if(typeof C=="string"){for(;R<v;)if(S[D++]=C.charCodeAt(R++),D==this.blockSize){i(this,S),D=0;break}}else for(;R<v;)if(S[D++]=C[R++],D==this.blockSize){i(this,S),D=0;break}}this.h=D,this.o+=v},r.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var v=1;v<C.length-8;++v)C[v]=0;v=this.o*8;for(var w=C.length-8;w<C.length;++w)C[w]=v&255,v/=256;for(this.v(C),C=Array(16),v=0,w=0;w<4;++w)for(let S=0;S<32;S+=8)C[v++]=this.g[w]>>>S&255;return C};function o(C,v){var w=a;return Object.prototype.hasOwnProperty.call(w,C)?w[C]:w[C]=v(C)}function s(C,v){this.h=v;let w=[],S=!0;for(let D=C.length-1;D>=0;D--){let R=C[D]|0;S&&R==v||(w[D]=R,S=!1)}this.g=w}var a={};function c(C){return-128<=C&&C<128?o(C,function(v){return new s([v|0],v<0?-1:0)}):new s([C|0],C<0?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return p;if(C<0)return A(u(-C));let v=[],w=1;for(let S=0;C>=w;S++)v[S]=C/w|0,w*=4294967296;return new s(v,0)}function h(C,v){if(C.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(C.charAt(0)=="-")return A(h(C.substring(1),v));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');let w=u(Math.pow(v,8)),S=p;for(let R=0;R<C.length;R+=8){var D=Math.min(8,C.length-R);let E=parseInt(C.substring(R,R+D),v);D<8?(D=u(Math.pow(v,D)),S=S.j(D).add(u(E))):(S=S.j(w),S=S.add(u(E)))}return S}var p=c(0),m=c(1),y=c(16777216);n=s.prototype,n.m=function(){if(P(this))return-A(this).m();let C=0,v=1;for(let w=0;w<this.g.length;w++){let S=this.i(w);C+=(S>=0?S:4294967296+S)*v,v*=4294967296}return C},n.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(I(this))return"0";if(P(this))return"-"+A(this).toString(C);let v=u(Math.pow(C,6));var w=this;let S="";for(;;){let D=ie(w,v).g;w=F(w,D.j(v));let R=((w.g.length>0?w.g[0]:w.h)>>>0).toString(C);if(w=D,I(w))return R+S;for(;R.length<6;)R="0"+R;S=R+S}},n.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function I(C){if(C.h!=0)return!1;for(let v=0;v<C.g.length;v++)if(C.g[v]!=0)return!1;return!0}function P(C){return C.h==-1}n.l=function(C){return C=F(this,C),P(C)?-1:I(C)?0:1};function A(C){let v=C.g.length,w=[];for(let S=0;S<v;S++)w[S]=~C.g[S];return new s(w,~C.h).add(m)}n.abs=function(){return P(this)?A(this):this},n.add=function(C){let v=Math.max(this.g.length,C.g.length),w=[],S=0;for(let D=0;D<=v;D++){let R=S+(this.i(D)&65535)+(C.i(D)&65535),E=(R>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);S=E>>>16,R&=65535,E&=65535,w[D]=E<<16|R}return new s(w,w[w.length-1]&-2147483648?-1:0)};function F(C,v){return C.add(A(v))}n.j=function(C){if(I(this)||I(C))return p;if(P(this))return P(C)?A(this).j(A(C)):A(A(this).j(C));if(P(C))return A(this.j(A(C)));if(this.l(y)<0&&C.l(y)<0)return u(this.m()*C.m());let v=this.g.length+C.g.length,w=[];for(var S=0;S<2*v;S++)w[S]=0;for(S=0;S<this.g.length;S++)for(let D=0;D<C.g.length;D++){let R=this.i(S)>>>16,E=this.i(S)&65535,Bt=C.i(D)>>>16,nr=C.i(D)&65535;w[2*S+2*D]+=E*nr,W(w,2*S+2*D),w[2*S+2*D+1]+=R*nr,W(w,2*S+2*D+1),w[2*S+2*D+1]+=E*Bt,W(w,2*S+2*D+1),w[2*S+2*D+2]+=R*Bt,W(w,2*S+2*D+2)}for(C=0;C<v;C++)w[C]=w[2*C+1]<<16|w[2*C];for(C=v;C<2*v;C++)w[C]=0;return new s(w,0)};function W(C,v){for(;(C[v]&65535)!=C[v];)C[v+1]+=C[v]>>>16,C[v]&=65535,v++}function J(C,v){this.g=C,this.h=v}function ie(C,v){if(I(v))throw Error("division by zero");if(I(C))return new J(p,p);if(P(C))return v=ie(A(C),v),new J(A(v.g),A(v.h));if(P(v))return v=ie(C,A(v)),new J(A(v.g),v.h);if(C.g.length>30){if(P(C)||P(v))throw Error("slowDivide_ only works with positive integers.");for(var w=m,S=v;S.l(C)<=0;)w=Ue(w),S=Ue(S);var D=we(w,1),R=we(S,1);for(S=we(S,2),w=we(w,2);!I(S);){var E=R.add(S);E.l(C)<=0&&(D=D.add(w),R=E),S=we(S,1),w=we(w,1)}return v=F(C,D.j(v)),new J(D,v)}for(D=p;C.l(v)>=0;){for(w=Math.max(1,Math.floor(C.m()/v.m())),S=Math.ceil(Math.log(w)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),R=u(w),E=R.j(v);P(E)||E.l(C)>0;)w-=S,R=u(w),E=R.j(v);I(R)&&(R=m),D=D.add(R),C=F(C,E)}return new J(D,C)}n.B=function(C){return ie(this,C).h},n.and=function(C){let v=Math.max(this.g.length,C.g.length),w=[];for(let S=0;S<v;S++)w[S]=this.i(S)&C.i(S);return new s(w,this.h&C.h)},n.or=function(C){let v=Math.max(this.g.length,C.g.length),w=[];for(let S=0;S<v;S++)w[S]=this.i(S)|C.i(S);return new s(w,this.h|C.h)},n.xor=function(C){let v=Math.max(this.g.length,C.g.length),w=[];for(let S=0;S<v;S++)w[S]=this.i(S)^C.i(S);return new s(w,this.h^C.h)};function Ue(C){let v=C.g.length+1,w=[];for(let S=0;S<v;S++)w[S]=C.i(S)<<1|C.i(S-1)>>>31;return new s(w,C.h)}function we(C,v){let w=v>>5;v%=32;let S=C.g.length-w,D=[];for(let R=0;R<S;R++)D[R]=v>0?C.i(R+w)>>>v|C.i(R+w+1)<<32-v:C.i(R+w);return new s(D,C.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,nI=bP.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=h,xi=bP.Integer=s}).apply(typeof IP<"u"?IP:typeof self<"u"?self:typeof window<"u"?window:{});var sm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Oi={};var rI,pH,ac,iI,Hu,am,oI,sI,aI;(function(){var n,e=Object.defineProperty;function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof sm=="object"&&sm];for(var d=0;d<l.length;++d){var f=l[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(l,d){if(d)e:{var f=r;l=l.split(".");for(var g=0;g<l.length-1;g++){var M=l[g];if(!(M in f))break e;f=f[M]}l=l[l.length-1],g=f[l],d=d(g),d!=g&&d!=null&&e(f,l,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(l){return l||function(d){var f=[],g;for(g in d)Object.prototype.hasOwnProperty.call(d,g)&&f.push([g,d[g]]);return f}});var o=o||{},s=this||self;function a(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function c(l,d,f){return l.call.apply(l.bind,arguments)}function u(l,d,f){return u=c,u.apply(null,arguments)}function h(l,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),l.apply(this,g)}}function p(l,d){function f(){}f.prototype=d.prototype,l.Z=d.prototype,l.prototype=new f,l.prototype.constructor=l,l.Ob=function(g,M,x){for(var $=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)$[ge-2]=arguments[ge];return d.prototype[M].apply(g,$)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function y(l){let d=l.length;if(d>0){let f=Array(d);for(let g=0;g<d;g++)f[g]=l[g];return f}return[]}function I(l,d){for(let g=1;g<arguments.length;g++){let M=arguments[g];var f=typeof M;if(f=f!="object"?f:M?Array.isArray(M)?"array":f:"null",f=="array"||f=="object"&&typeof M.length=="number"){f=l.length||0;let x=M.length||0;l.length=f+x;for(let $=0;$<x;$++)l[f+$]=M[$]}else l.push(M)}}class P{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function A(l){s.setTimeout(()=>{throw l},0)}function F(){var l=C;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class W{constructor(){this.h=this.g=null}add(d,f){let g=J.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var J=new P(()=>new ie,l=>l.reset());class ie{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,we=!1,C=new W,v=()=>{let l=Promise.resolve(void 0);Ue=()=>{l.then(w)}};function w(){for(var l;l=F();){try{l.h.call(l.g)}catch(f){A(f)}var d=J;d.j(l),d.h<100&&(d.h++,l.next=d.g,d.g=l)}we=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var R=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let f=()=>{};s.addEventListener("test",f,d),s.removeEventListener("test",f,d)}catch{}return l})();function E(l){return/^[\s\xa0]*$/.test(l)}function Bt(l,d){D.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,d)}p(Bt,D),Bt.prototype.init=function(l,d){let f=this.type=l.type,g=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget,d||(f=="mouseover"?d=l.fromElement:f=="mouseout"&&(d=l.toElement)),this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&Bt.Z.h.call(this)},Bt.prototype.h=function(){Bt.Z.h.call(this);let l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var nr="closure_listenable_"+(Math.random()*1e6|0),K=0;function ee(l,d,f,g,M){this.listener=l,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=M,this.key=++K,this.da=this.fa=!1}function te(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function _e(l,d,f){for(let g in l)d.call(f,l[g],g,l)}function vt(l,d){for(let f in l)d.call(void 0,l[f],f,l)}function Dn(l){let d={};for(let f in l)d[f]=l[f];return d}let qt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rr(l,d){let f,g;for(let M=1;M<arguments.length;M++){g=arguments[M];for(f in g)l[f]=g[f];for(let x=0;x<qt.length;x++)f=qt[x],Object.prototype.hasOwnProperty.call(g,f)&&(l[f]=g[f])}}function $e(l){this.src=l,this.g={},this.h=0}$e.prototype.add=function(l,d,f,g,M){let x=l.toString();l=this.g[x],l||(l=this.g[x]=[],this.h++);let $=$c(l,d,g,M);return $>-1?(d=l[$],f||(d.fa=!1)):(d=new ee(d,this.src,x,!!g,M),d.fa=f,l.push(d)),d};function na(l,d){let f=d.type;if(f in l.g){var g=l.g[f],M=Array.prototype.indexOf.call(g,d,void 0),x;(x=M>=0)&&Array.prototype.splice.call(g,M,1),x&&(te(d),l.g[f].length==0&&(delete l.g[f],l.h--))}}function $c(l,d,f,g){for(let M=0;M<l.length;++M){let x=l[M];if(!x.da&&x.listener==d&&x.capture==!!f&&x.ha==g)return M}return-1}var _t="closure_lm_"+(Math.random()*1e6|0),ir={};function cn(l,d,f,g,M){if(g&&g.once)return cC(l,d,f,g,M);if(Array.isArray(d)){for(let x=0;x<d.length;x++)cn(l,d[x],f,g,M);return null}return f=Qg(f),l&&l[nr]?l.J(d,f,a(g)?!!g.capture:!!g,M):Ko(l,d,f,!1,g,M)}function Ko(l,d,f,g,M,x){if(!d)throw Error("Invalid event type");let $=a(M)?!!M.capture:!!M,ge=Wg(l);if(ge||(l[_t]=ge=new $e(l)),f=ge.add(d,f,g,$,x),f.proxy)return f;if(g=Hc(),f.proxy=g,g.src=l,g.listener=f,l.addEventListener)R||(M=$),M===void 0&&(M=!1),l.addEventListener(d.toString(),g,M);else if(l.attachEvent)l.attachEvent(uC(d.toString()),g);else if(l.addListener&&l.removeListener)l.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Hc(){function l(f){return d.call(l.src,l.listener,f)}let d=pk;return l}function cC(l,d,f,g,M){if(Array.isArray(d)){for(let x=0;x<d.length;x++)cC(l,d[x],f,g,M);return null}return f=Qg(f),l&&l[nr]?l.K(d,f,a(g)?!!g.capture:!!g,M):Ko(l,d,f,!0,g,M)}function lC(l,d,f,g,M){if(Array.isArray(d))for(var x=0;x<d.length;x++)lC(l,d[x],f,g,M);else g=a(g)?!!g.capture:!!g,f=Qg(f),l&&l[nr]?(l=l.i,x=String(d).toString(),x in l.g&&(d=l.g[x],f=$c(d,f,g,M),f>-1&&(te(d[f]),Array.prototype.splice.call(d,f,1),d.length==0&&(delete l.g[x],l.h--)))):l&&(l=Wg(l))&&(d=l.g[d.toString()],l=-1,d&&(l=$c(d,f,g,M)),(f=l>-1?d[l]:null)&&Gg(f))}function Gg(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[nr])na(d.i,l);else{var f=l.type,g=l.proxy;d.removeEventListener?d.removeEventListener(f,g,l.capture):d.detachEvent?d.detachEvent(uC(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Wg(d))?(na(f,l),f.h==0&&(f.src=null,d[_t]=null)):te(l)}}}function uC(l){return l in ir?ir[l]:ir[l]="on"+l}function pk(l,d){if(l.da)l=!0;else{d=new Bt(d,this);let f=l.listener,g=l.ha||l.src;l.fa&&Gg(l),l=f.call(g,d)}return l}function Wg(l){return l=l[_t],l instanceof $e?l:null}var Kg="__closure_events_fn_"+(Math.random()*1e9>>>0);function Qg(l){return typeof l=="function"?l:(l[Kg]||(l[Kg]=function(d){return l.handleEvent(d)}),l[Kg])}function Gt(){S.call(this),this.i=new $e(this),this.M=this,this.G=null}p(Gt,S),Gt.prototype[nr]=!0,Gt.prototype.removeEventListener=function(l,d,f,g){lC(this,l,d,f,g)};function ln(l,d){var f,g=l.G;if(g)for(f=[];g;g=g.G)f.push(g);if(l=l.M,g=d.type||d,typeof d=="string")d=new D(d,l);else if(d instanceof D)d.target=d.target||l;else{var M=d;d=new D(g,l),rr(d,M)}M=!0;let x,$;if(f)for($=f.length-1;$>=0;$--)x=d.g=f[$],M=Pd(x,g,!0,d)&&M;if(x=d.g=l,M=Pd(x,g,!0,d)&&M,M=Pd(x,g,!1,d)&&M,f)for($=0;$<f.length;$++)x=d.g=f[$],M=Pd(x,g,!1,d)&&M}Gt.prototype.N=function(){if(Gt.Z.N.call(this),this.i){var l=this.i;for(let d in l.g){let f=l.g[d];for(let g=0;g<f.length;g++)te(f[g]);delete l.g[d],l.h--}}this.G=null},Gt.prototype.J=function(l,d,f,g){return this.i.add(String(l),d,!1,f,g)},Gt.prototype.K=function(l,d,f,g){return this.i.add(String(l),d,!0,f,g)};function Pd(l,d,f,g){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();let M=!0;for(let x=0;x<d.length;++x){let $=d[x];if($&&!$.da&&$.capture==f){let ge=$.listener,At=$.ha||$.src;$.fa&&na(l.i,$),M=ge.call(At,g)!==!1&&M}}return M&&!g.defaultPrevented}function mk(l,d){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=u(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(l,d||0)}function dC(l){l.g=mk(()=>{l.g=null,l.i&&(l.i=!1,dC(l))},l.l);let d=l.h;l.h=null,l.m.apply(null,d)}class gk extends S{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:dC(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zc(l){S.call(this),this.h=l,this.g={}}p(zc,S);var hC=[];function fC(l){_e(l.g,function(d,f){this.g.hasOwnProperty(f)&&Gg(d)},l),l.g={}}zc.prototype.N=function(){zc.Z.N.call(this),fC(this)},zc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yg=s.JSON.stringify,yk=s.JSON.parse,vk=class{stringify(l){return s.JSON.stringify(l,void 0)}parse(l){return s.JSON.parse(l,void 0)}};function pC(){}function mC(){}var qc={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Jg(){D.call(this,"d")}p(Jg,D);function Zg(){D.call(this,"c")}p(Zg,D);var Qo={},gC=null;function xd(){return gC=gC||new Gt}Qo.Ia="serverreachability";function yC(l){D.call(this,Qo.Ia,l)}p(yC,D);function Gc(l){let d=xd();ln(d,new yC(d))}Qo.STAT_EVENT="statevent";function vC(l,d){D.call(this,Qo.STAT_EVENT,l),this.stat=d}p(vC,D);function un(l){let d=xd();ln(d,new vC(d,l))}Qo.Ja="timingevent";function _C(l,d){D.call(this,Qo.Ja,l),this.size=d}p(_C,D);function Wc(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){l()},d)}function Kc(){this.g=!0}Kc.prototype.ua=function(){this.g=!1};function _k(l,d,f,g,M,x){l.info(function(){if(l.g)if(x){var $="",ge=x.split("&");for(let ze=0;ze<ge.length;ze++){var At=ge[ze].split("=");if(At.length>1){let Nt=At[0];At=At[1];let Pr=Nt.split("_");$=Pr.length>=2&&Pr[1]=="type"?$+(Nt+"="+At+"&"):$+(Nt+"=redacted&")}}}else $=null;else $=x;return"XMLHTTP REQ ("+g+") [attempt "+M+"]: "+d+`
`+f+`
`+$})}function Ek(l,d,f,g,M,x,$){l.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+M+"]: "+d+`
`+f+`
`+x+" "+$})}function ra(l,d,f,g){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+Ik(l,f)+(g?" "+g:"")})}function wk(l,d){l.info(function(){return"TIMEOUT: "+d})}Kc.prototype.info=function(){};function Ik(l,d){if(!l.g)return d;if(!d)return null;try{let x=JSON.parse(d);if(x){for(l=0;l<x.length;l++)if(Array.isArray(x[l])){var f=x[l];if(!(f.length<2)){var g=f[1];if(Array.isArray(g)&&!(g.length<1)){var M=g[0];if(M!="noop"&&M!="stop"&&M!="close")for(let $=1;$<g.length;$++)g[$]=""}}}}return Yg(x)}catch{return d}}var Od={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},EC={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},wC;function Xg(){}p(Xg,pC),Xg.prototype.g=function(){return new XMLHttpRequest},wC=new Xg;function Qc(l){return encodeURIComponent(String(l))}function bk(l){var d=1;l=l.split(":");let f=[];for(;d>0&&l.length;)f.push(l.shift()),d--;return l.length&&f.push(l.join(":")),f}function Gi(l,d,f,g){this.j=l,this.i=d,this.l=f,this.S=g||1,this.V=new zc(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new IC}function IC(){this.i=null,this.g="",this.h=!1}var bC={},ey={};function ty(l,d,f){l.M=1,l.A=Fd(Nr(d)),l.u=f,l.R=!0,CC(l,null)}function CC(l,d){l.F=Date.now(),kd(l),l.B=Nr(l.A);var f=l.B,g=l.S;Array.isArray(g)||(g=[String(g)]),LC(f.i,"t",g),l.C=0,f=l.j.L,l.h=new IC,l.g=tT(l.j,f?d:null,!l.u),l.P>0&&(l.O=new gk(u(l.Y,l,l.g),l.P)),d=l.V,f=l.g,g=l.ba;var M="readystatechange";Array.isArray(M)||(M&&(hC[0]=M.toString()),M=hC);for(let x=0;x<M.length;x++){let $=cn(f,M[x],g||d.handleEvent,!1,d.h||d);if(!$)break;d.g[$.key]=$}d=l.J?Dn(l.J):{},l.u?(l.v||(l.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,d)):(l.v="GET",l.g.ea(l.B,l.v,null,d)),Gc(),_k(l.i,l.v,l.B,l.l,l.S,l.u)}Gi.prototype.ba=function(l){l=l.target;let d=this.O;d&&Qi(l)==3?d.j():this.Y(l)},Gi.prototype.Y=function(l){try{if(l==this.g)e:{let ge=Qi(this.g),At=this.g.ya(),ze=this.g.ca();if(!(ge<3)&&(ge!=3||this.g&&(this.h.h||this.g.la()||zC(this.g)))){this.K||ge!=4||At==7||(At==8||ze<=0?Gc(3):Gc(2)),ny(this);var d=this.g.ca();this.X=d;var f=Ck(this);if(this.o=d==200,Ek(this.i,this.v,this.B,this.l,this.S,ge,d),this.o){if(this.U&&!this.L){t:{if(this.g){var g,M=this.g;if((g=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(g)){var x=g;break t}}x=null}if(l=x)ra(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ry(this,l);else{this.o=!1,this.m=3,un(12),Yo(this),Yc(this);break e}}if(this.R){l=!0;let Nt;for(;!this.K&&this.C<f.length;)if(Nt=Tk(this,f),Nt==ey){ge==4&&(this.m=4,un(14),l=!1),ra(this.i,this.l,null,"[Incomplete Response]");break}else if(Nt==bC){this.m=4,un(15),ra(this.i,this.l,f,"[Invalid Chunk]"),l=!1;break}else ra(this.i,this.l,Nt,null),ry(this,Nt);if(TC(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ge!=4||f.length!=0||this.h.h||(this.m=1,un(16),l=!1),this.o=this.o&&l,!l)ra(this.i,this.l,f,"[Invalid Chunked Response]"),Yo(this),Yc(this);else if(f.length>0&&!this.W){this.W=!0;var $=this.j;$.g==this&&$.aa&&!$.P&&($.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),uy($),$.P=!0,un(11))}}else ra(this.i,this.l,f,null),ry(this,f);ge==4&&Yo(this),this.o&&!this.K&&(ge==4?JC(this.j,this):(this.o=!1,kd(this)))}else Uk(this.g),d==400&&f.indexOf("Unknown SID")>0?(this.m=3,un(12)):(this.m=0,un(13)),Yo(this),Yc(this)}}}catch{}finally{}};function Ck(l){if(!TC(l))return l.g.la();let d=zC(l.g);if(d==="")return"";let f="",g=d.length,M=Qi(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return Yo(l),Yc(l),"";l.h.i=new s.TextDecoder}for(let x=0;x<g;x++)l.h.h=!0,f+=l.h.i.decode(d[x],{stream:!(M&&x==g-1)});return d.length=0,l.h.g+=f,l.C=0,l.h.g}function TC(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function Tk(l,d){var f=l.C,g=d.indexOf(`
`,f);return g==-1?ey:(f=Number(d.substring(f,g)),isNaN(f)?bC:(g+=1,g+f>d.length?ey:(d=d.slice(g,g+f),l.C=g+f,d)))}Gi.prototype.cancel=function(){this.K=!0,Yo(this)};function kd(l){l.T=Date.now()+l.H,DC(l,l.H)}function DC(l,d){if(l.D!=null)throw Error("WatchDog timer not null");l.D=Wc(u(l.aa,l),d)}function ny(l){l.D&&(s.clearTimeout(l.D),l.D=null)}Gi.prototype.aa=function(){this.D=null;let l=Date.now();l-this.T>=0?(wk(this.i,this.B),this.M!=2&&(Gc(),un(17)),Yo(this),this.m=2,Yc(this)):DC(this,this.T-l)};function Yc(l){l.j.I==0||l.K||JC(l.j,l)}function Yo(l){ny(l);var d=l.O;d&&typeof d.dispose=="function"&&d.dispose(),l.O=null,fC(l.V),l.g&&(d=l.g,l.g=null,d.abort(),d.dispose())}function ry(l,d){try{var f=l.j;if(f.I!=0&&(f.g==l||iy(f.h,l))){if(!l.L&&iy(f.h,l)&&f.I==3){try{var g=f.Ba.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var M=g;if(M[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<l.F)$d(f),jd(f);else break e;ly(f),un(18)}}else f.xa=M[1],0<f.xa-f.K&&M[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=Wc(u(f.Va,f),6e3));MC(f.h)<=1&&f.ta&&(f.ta=void 0)}else Zo(f,11)}else if((l.L||f.g==l)&&$d(f),!E(d))for(M=f.Ba.g.parse(d),d=0;d<M.length;d++){let ze=M[d],Nt=ze[0];if(!(Nt<=f.K))if(f.K=Nt,ze=ze[1],f.I==2)if(ze[0]=="c"){f.M=ze[1],f.ba=ze[2];let Pr=ze[3];Pr!=null&&(f.ka=Pr,f.j.info("VER="+f.ka));let Xo=ze[4];Xo!=null&&(f.za=Xo,f.j.info("SVER="+f.za));let Yi=ze[5];Yi!=null&&typeof Yi=="number"&&Yi>0&&(g=1.5*Yi,f.O=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Ji=l.g;if(Ji){let zd=Ji.g?Ji.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zd){var x=g.h;x.g||zd.indexOf("spdy")==-1&&zd.indexOf("quic")==-1&&zd.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(oy(x,x.h),x.h=null))}if(g.G){let dy=Ji.g?Ji.g.getResponseHeader("X-HTTP-Session-Id"):null;dy&&(g.wa=dy,Ge(g.J,g.G,dy))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-l.F,f.j.info("Handshake RTT: "+f.T+"ms")),g=f;var $=l;if(g.na=eT(g,g.L?g.ba:null,g.W),$.L){RC(g.h,$);var ge=$,At=g.O;At&&(ge.H=At),ge.D&&(ny(ge),kd(ge)),g.g=$}else QC(g);f.i.length>0&&Bd(f)}else ze[0]!="stop"&&ze[0]!="close"||Zo(f,7);else f.I==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?Zo(f,7):cy(f):ze[0]!="noop"&&f.l&&f.l.qa(ze),f.A=0)}}Gc(4)}catch{}}var Dk=class{constructor(l,d){this.g=l,this.map=d}};function SC(l){this.l=l||10,s.PerformanceNavigationTiming?(l=s.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function AC(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function MC(l){return l.h?1:l.g?l.g.size:0}function iy(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function oy(l,d){l.g?l.g.add(d):l.h=d}function RC(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}SC.prototype.cancel=function(){if(this.i=NC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function NC(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let d=l.i;for(let f of l.g.values())d=d.concat(f.G);return d}return y(l.i)}var PC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sk(l,d){if(l){l=l.split("&");for(let f=0;f<l.length;f++){let g=l[f].indexOf("="),M,x=null;g>=0?(M=l[f].substring(0,g),x=l[f].substring(g+1)):M=l[f],d(M,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function Wi(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;l instanceof Wi?(this.l=l.l,Jc(this,l.j),this.o=l.o,this.g=l.g,Zc(this,l.u),this.h=l.h,sy(this,VC(l.i)),this.m=l.m):l&&(d=String(l).match(PC))?(this.l=!1,Jc(this,d[1]||"",!0),this.o=Xc(d[2]||""),this.g=Xc(d[3]||"",!0),Zc(this,d[4]),this.h=Xc(d[5]||"",!0),sy(this,d[6]||"",!0),this.m=Xc(d[7]||"")):(this.l=!1,this.i=new tl(null,this.l))}Wi.prototype.toString=function(){let l=[];var d=this.j;d&&l.push(el(d,xC,!0),":");var f=this.g;return(f||d=="file")&&(l.push("//"),(d=this.o)&&l.push(el(d,xC,!0),"@"),l.push(Qc(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&l.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&l.push("/"),l.push(el(f,f.charAt(0)=="/"?Rk:Mk,!0))),(f=this.i.toString())&&l.push("?",f),(f=this.m)&&l.push("#",el(f,Pk)),l.join("")},Wi.prototype.resolve=function(l){let d=Nr(this),f=!!l.j;f?Jc(d,l.j):f=!!l.o,f?d.o=l.o:f=!!l.g,f?d.g=l.g:f=l.u!=null;var g=l.h;if(f)Zc(d,l.u);else if(f=!!l.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var M=d.h.lastIndexOf("/");M!=-1&&(g=d.h.slice(0,M+1)+g)}if(M=g,M==".."||M==".")g="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){g=M.lastIndexOf("/",0)==0,M=M.split("/");let x=[];for(let $=0;$<M.length;){let ge=M[$++];ge=="."?g&&$==M.length&&x.push(""):ge==".."?((x.length>1||x.length==1&&x[0]!="")&&x.pop(),g&&$==M.length&&x.push("")):(x.push(ge),g=!0)}g=x.join("/")}else g=M}return f?d.h=g:f=l.i.toString()!=="",f?sy(d,VC(l.i)):f=!!l.m,f&&(d.m=l.m),d};function Nr(l){return new Wi(l)}function Jc(l,d,f){l.j=f?Xc(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function Zc(l,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);l.u=d}else l.u=null}function sy(l,d,f){d instanceof tl?(l.i=d,xk(l.i,l.l)):(f||(d=el(d,Nk)),l.i=new tl(d,l.l))}function Ge(l,d,f){l.i.set(d,f)}function Fd(l){return Ge(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function Xc(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function el(l,d,f){return typeof l=="string"?(l=encodeURI(l).replace(d,Ak),f&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Ak(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var xC=/[#\/\?@]/g,Mk=/[#\?:]/g,Rk=/[#\?]/g,Nk=/[#\?@]/g,Pk=/#/g;function tl(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function Jo(l){l.g||(l.g=new Map,l.h=0,l.i&&Sk(l.i,function(d,f){l.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=tl.prototype,n.add=function(l,d){Jo(this),this.i=null,l=ia(this,l);let f=this.g.get(l);return f||this.g.set(l,f=[]),f.push(d),this.h+=1,this};function OC(l,d){Jo(l),d=ia(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function kC(l,d){return Jo(l),d=ia(l,d),l.g.has(d)}n.forEach=function(l,d){Jo(this),this.g.forEach(function(f,g){f.forEach(function(M){l.call(d,M,g,this)},this)},this)};function FC(l,d){Jo(l);let f=[];if(typeof d=="string")kC(l,d)&&(f=f.concat(l.g.get(ia(l,d))));else for(l=Array.from(l.g.values()),d=0;d<l.length;d++)f=f.concat(l[d]);return f}n.set=function(l,d){return Jo(this),this.i=null,l=ia(this,l),kC(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},n.get=function(l,d){return l?(l=FC(this,l),l.length>0?String(l[0]):d):d};function LC(l,d,f){OC(l,d),f.length>0&&(l.i=null,l.g.set(ia(l,d),y(f)),l.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],d=Array.from(this.g.keys());for(let g=0;g<d.length;g++){var f=d[g];let M=Qc(f);f=FC(this,f);for(let x=0;x<f.length;x++){let $=M;f[x]!==""&&($+="="+Qc(f[x])),l.push($)}}return this.i=l.join("&")};function VC(l){let d=new tl;return d.i=l.i,l.g&&(d.g=new Map(l.g),d.h=l.h),d}function ia(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function xk(l,d){d&&!l.j&&(Jo(l),l.i=null,l.g.forEach(function(f,g){let M=g.toLowerCase();g!=M&&(OC(this,g),LC(this,M,f))},l)),l.j=d}function Ok(l,d){let f=new Kc;if(s.Image){let g=new Image;g.onload=h(Ki,f,"TestLoadImage: loaded",!0,d,g),g.onerror=h(Ki,f,"TestLoadImage: error",!1,d,g),g.onabort=h(Ki,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=h(Ki,f,"TestLoadImage: timeout",!1,d,g),s.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=l}else d(!1)}function kk(l,d){let f=new Kc,g=new AbortController,M=setTimeout(()=>{g.abort(),Ki(f,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:g.signal}).then(x=>{clearTimeout(M),x.ok?Ki(f,"TestPingServer: ok",!0,d):Ki(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(M),Ki(f,"TestPingServer: error",!1,d)})}function Ki(l,d,f,g,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),g(f)}catch{}}function Fk(){this.g=new vk}function Ld(l){this.i=l.Sb||null,this.h=l.ab||!1}p(Ld,pC),Ld.prototype.g=function(){return new Vd(this.i,this.h)};function Vd(l,d){Gt.call(this),this.H=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Vd,Gt),n=Vd.prototype,n.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=d,this.readyState=1,rl(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(d.body=l),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,nl(this)),this.readyState=0},n.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,rl(this)),this.g&&(this.readyState=3,rl(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;UC(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function UC(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}n.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?nl(this):rl(this),this.readyState==3&&UC(this)}},n.Oa=function(l){this.g&&(this.response=this.responseText=l,nl(this))},n.Na=function(l){this.g&&(this.response=l,nl(this))},n.ga=function(){this.g&&nl(this)};function nl(l){l.readyState=4,l.l=null,l.j=null,l.B=null,rl(l)}n.setRequestHeader=function(l,d){this.A.append(l,d)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,l.push(f[0]+": "+f[1]),f=d.next();return l.join(`\r
`)};function rl(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Vd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function jC(l){let d="";return _e(l,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function ay(l,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=jC(f),typeof l=="string"?f!=null&&Qc(f):Ge(l,d,f))}function rt(l){Gt.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(rt,Gt);var Lk=/^https?$/i,Vk=["POST","PUT"];n=rt.prototype,n.Fa=function(l){this.H=l},n.ea=function(l,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():wC.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(x){BC(this,x);return}if(l=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var M in g)f.set(M,g[M]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let x of g.keys())f.set(x,g.get(x));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(x=>x.toLowerCase()=="content-type"),M=s.FormData&&l instanceof s.FormData,!(Array.prototype.indexOf.call(Vk,d,void 0)>=0)||g||M||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,$]of f)this.g.setRequestHeader(x,$);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(x){BC(this,x)}};function BC(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.o=5,$C(l),Ud(l)}function $C(l){l.A||(l.A=!0,ln(l,"complete"),ln(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,ln(this,"complete"),ln(this,"abort"),Ud(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ud(this,!0)),rt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?HC(this):this.Xa())},n.Xa=function(){HC(this)};function HC(l){if(l.h&&typeof o<"u"){if(l.v&&Qi(l)==4)setTimeout(l.Ca.bind(l),0);else if(ln(l,"readystatechange"),Qi(l)==4){l.h=!1;try{let x=l.ca();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=x===0){let $=String(l.D).match(PC)[1]||null;!$&&s.self&&s.self.location&&($=s.self.location.protocol.slice(0,-1)),g=!Lk.test($?$.toLowerCase():"")}f=g}if(f)ln(l,"complete"),ln(l,"success");else{l.o=6;try{var M=Qi(l)>2?l.g.statusText:""}catch{M=""}l.l=M+" ["+l.ca()+"]",$C(l)}}finally{Ud(l)}}}}function Ud(l,d){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);let f=l.g;l.g=null,d||ln(l,"ready");try{f.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Qi(l){return l.g?l.g.readyState:0}n.ca=function(){try{return Qi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),yk(d)}};function zC(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Uk(l){let d={};l=(l.g&&Qi(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<l.length;g++){if(E(l[g]))continue;var f=bk(l[g]);let M=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let x=d[M]||[];d[M]=x,x.push(f)}vt(d,function(g){return g.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function il(l,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[l]||d}function qC(l){this.za=0,this.i=[],this.j=new Kc,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=il("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=il("baseRetryDelayMs",5e3,l),this.Za=il("retryDelaySeedMs",1e4,l),this.Ta=il("forwardChannelMaxRetries",2,l),this.va=il("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new SC(l&&l.concurrentRequestLimit),this.Ba=new Fk,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=qC.prototype,n.ka=8,n.I=1,n.connect=function(l,d,f,g){un(0),this.W=l,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.J=eT(this,null,this.W),Bd(this)};function cy(l){if(GC(l),l.I==3){var d=l.V++,f=Nr(l.J);if(Ge(f,"SID",l.M),Ge(f,"RID",d),Ge(f,"TYPE","terminate"),ol(l,f),d=new Gi(l,l.j,d),d.M=2,d.A=Fd(Nr(f)),f=!1,s.navigator&&s.navigator.sendBeacon)try{f=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!f&&s.Image&&(new Image().src=d.A,f=!0),f||(d.g=tT(d.j,null),d.g.ea(d.A)),d.F=Date.now(),kd(d)}XC(l)}function jd(l){l.g&&(uy(l),l.g.cancel(),l.g=null)}function GC(l){jd(l),l.v&&(s.clearTimeout(l.v),l.v=null),$d(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&s.clearTimeout(l.m),l.m=null)}function Bd(l){if(!AC(l.h)&&!l.m){l.m=!0;var d=l.Ea;Ue||v(),we||(Ue(),we=!0),C.add(d,l),l.D=0}}function jk(l,d){return MC(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=d.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=Wc(u(l.Ea,l,d),ZC(l,l.D)),l.D++,!0)}n.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;let M=new Gi(this,this.j,l),x=this.o;if(this.U&&(x?(x=Dn(x),rr(x,this.U)):x=this.U),this.u!==null||this.R||(M.J=x,x=null),this.S)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,d>4096){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=KC(this,M,d),f=Nr(this.J),Ge(f,"RID",l),Ge(f,"CVER",22),this.G&&Ge(f,"X-HTTP-Session-Id",this.G),ol(this,f),x&&(this.R?d="headers="+Qc(jC(x))+"&"+d:this.u&&ay(f,this.u,x)),oy(this.h,M),this.Ra&&Ge(f,"TYPE","init"),this.S?(Ge(f,"$req",d),Ge(f,"SID","null"),M.U=!0,ty(M,f,null)):ty(M,f,d),this.I=2}}else this.I==3&&(l?WC(this,l):this.i.length==0||AC(this.h)||WC(this))};function WC(l,d){var f;d?f=d.l:f=l.V++;let g=Nr(l.J);Ge(g,"SID",l.M),Ge(g,"RID",f),Ge(g,"AID",l.K),ol(l,g),l.u&&l.o&&ay(g,l.u,l.o),f=new Gi(l,l.j,f,l.D+1),l.u===null&&(f.J=l.o),d&&(l.i=d.G.concat(l.i)),d=KC(l,f,1e3),f.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),oy(l.h,f),ty(f,g,d)}function ol(l,d){l.H&&_e(l.H,function(f,g){Ge(d,g,f)}),l.l&&_e({},function(f,g){Ge(d,g,f)})}function KC(l,d,f){f=Math.min(l.i.length,f);let g=l.l?u(l.l.Ka,l.l,l):null;e:{var M=l.i;let ge=-1;for(;;){let At=["count="+f];ge==-1?f>0?(ge=M[0].g,At.push("ofs="+ge)):ge=0:At.push("ofs="+ge);let ze=!0;for(let Nt=0;Nt<f;Nt++){var x=M[Nt].g;let Pr=M[Nt].map;if(x-=ge,x<0)ge=Math.max(0,M[Nt].g-100),ze=!1;else try{x="req"+x+"_"||"";try{var $=Pr instanceof Map?Pr:Object.entries(Pr);for(let[Xo,Yi]of $){let Ji=Yi;a(Yi)&&(Ji=Yg(Yi)),At.push(x+Xo+"="+encodeURIComponent(Ji))}}catch(Xo){throw At.push(x+"type="+encodeURIComponent("_badmap")),Xo}}catch{g&&g(Pr)}}if(ze){$=At.join("&");break e}}$=void 0}return l=l.i.splice(0,f),d.G=l,$}function QC(l){if(!l.g&&!l.v){l.Y=1;var d=l.Da;Ue||v(),we||(Ue(),we=!0),C.add(d,l),l.A=0}}function ly(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=Wc(u(l.Da,l),ZC(l,l.A)),l.A++,!0)}n.Da=function(){if(this.v=null,YC(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=Wc(u(this.Wa,this),l)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,un(10),jd(this),YC(this))};function uy(l){l.B!=null&&(s.clearTimeout(l.B),l.B=null)}function YC(l){l.g=new Gi(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var d=Nr(l.na);Ge(d,"RID","rpc"),Ge(d,"SID",l.M),Ge(d,"AID",l.K),Ge(d,"CI",l.F?"0":"1"),!l.F&&l.ia&&Ge(d,"TO",l.ia),Ge(d,"TYPE","xmlhttp"),ol(l,d),l.u&&l.o&&ay(d,l.u,l.o),l.O&&(l.g.H=l.O);var f=l.g;l=l.ba,f.M=1,f.A=Fd(Nr(d)),f.u=null,f.R=!0,CC(f,l)}n.Va=function(){this.C!=null&&(this.C=null,jd(this),ly(this),un(19))};function $d(l){l.C!=null&&(s.clearTimeout(l.C),l.C=null)}function JC(l,d){var f=null;if(l.g==d){$d(l),uy(l),l.g=null;var g=2}else if(iy(l.h,d))f=d.G,RC(l.h,d),g=1;else return;if(l.I!=0){if(d.o)if(g==1){f=d.u?d.u.length:0,d=Date.now()-d.F;var M=l.D;g=xd(),ln(g,new _C(g,f)),Bd(l)}else QC(l);else if(M=d.m,M==3||M==0&&d.X>0||!(g==1&&jk(l,d)||g==2&&ly(l)))switch(f&&f.length>0&&(d=l.h,d.i=d.i.concat(f)),M){case 1:Zo(l,5);break;case 4:Zo(l,10);break;case 3:Zo(l,6);break;default:Zo(l,2)}}}function ZC(l,d){let f=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(f*=2),f*d}function Zo(l,d){if(l.j.info("Error code "+d),d==2){var f=u(l.bb,l),g=l.Ua;let M=!g;g=new Wi(g||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Jc(g,"https"),Fd(g),M?Ok(g.toString(),f):kk(g.toString(),f)}else un(2);l.I=0,l.l&&l.l.pa(d),XC(l),GC(l)}n.bb=function(l){l?(this.j.info("Successfully pinged google.com"),un(2)):(this.j.info("Failed to ping google.com"),un(1))};function XC(l){if(l.I=0,l.ja=[],l.l){let d=NC(l.h);(d.length!=0||l.i.length!=0)&&(I(l.ja,d),I(l.ja,l.i),l.h.i.length=0,y(l.i),l.i.length=0),l.l.oa()}}function eT(l,d,f){var g=f instanceof Wi?Nr(f):new Wi(f);if(g.g!="")d&&(g.g=d+"."+g.g),Zc(g,g.u);else{var M=s.location;g=M.protocol,d=d?d+"."+M.hostname:M.hostname,M=+M.port;let x=new Wi(null);g&&Jc(x,g),d&&(x.g=d),M&&Zc(x,M),f&&(x.h=f),g=x}return f=l.G,d=l.wa,f&&d&&Ge(g,f,d),Ge(g,"VER",l.ka),ol(l,g),g}function tT(l,d,f){if(d&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Aa&&!l.ma?new rt(new Ld({ab:f})):new rt(l.ma),d.Fa(l.L),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function nT(){}n=nT.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Hd(){}Hd.prototype.g=function(l,d){return new Sn(l,d)};function Sn(l,d){Gt.call(this),this.g=new qC(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(l?l["X-WebChannel-Client-Profile"]=d.sa:l={"X-WebChannel-Client-Profile":d.sa}),this.g.U=l,(l=d&&d.Qb)&&!E(l)&&(this.g.u=l),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!E(d)&&(this.g.G=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new oa(this)}p(Sn,Gt),Sn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Sn.prototype.close=function(){cy(this.g)},Sn.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var f={};f.__data__=l,l=f}else this.v&&(f={},f.__data__=Yg(l),l=f);d.i.push(new Dk(d.Ya++,l)),d.I==3&&Bd(d)},Sn.prototype.N=function(){this.g.l=null,delete this.j,cy(this.g),delete this.g,Sn.Z.N.call(this)};function rT(l){Jg.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(let f in d){l=f;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}p(rT,Jg);function iT(){Zg.call(this),this.status=1}p(iT,Zg);function oa(l){this.g=l}p(oa,nT),oa.prototype.ra=function(){ln(this.g,"a")},oa.prototype.qa=function(l){ln(this.g,new rT(l))},oa.prototype.pa=function(l){ln(this.g,new iT)},oa.prototype.oa=function(){ln(this.g,"b")},Hd.prototype.createWebChannel=Hd.prototype.g,Sn.prototype.send=Sn.prototype.o,Sn.prototype.open=Sn.prototype.m,Sn.prototype.close=Sn.prototype.close,aI=Oi.createWebChannelTransport=function(){return new Hd},sI=Oi.getStatEventTarget=function(){return xd()},oI=Oi.Event=Qo,am=Oi.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Od.NO_ERROR=0,Od.TIMEOUT=8,Od.HTTP_ERROR=6,Hu=Oi.ErrorCode=Od,EC.COMPLETE="complete",iI=Oi.EventType=EC,mC.EventType=qc,qc.OPEN="a",qc.CLOSE="b",qc.ERROR="c",qc.MESSAGE="d",Gt.prototype.listen=Gt.prototype.J,ac=Oi.WebChannel=mC,pH=Oi.FetchXmlHttpFactory=Ld,rt.prototype.listenOnce=rt.prototype.K,rt.prototype.getLastError=rt.prototype.Ha,rt.prototype.getLastErrorCode=rt.prototype.ya,rt.prototype.getStatus=rt.prototype.ca,rt.prototype.getResponseJson=rt.prototype.La,rt.prototype.getResponseText=rt.prototype.la,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Fa,rI=Oi.XhrIo=rt}).apply(typeof sm<"u"?sm:typeof self<"u"?self:typeof window<"u"?window:{});var CP="@firebase/firestore",TP="4.9.2";var Lt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Lt.UNAUTHENTICATED=new Lt(null),Lt.GOOGLE_CREDENTIALS=new Lt("google-credentials-uid"),Lt.FIRST_PARTY=new Lt("first-party-uid"),Lt.MOCK_USER=new Lt("mock-user");var Mc="12.3.0";var Bs=new So("@firebase/firestore");function cc(){return Bs.logLevel}function G(n,...e){if(Bs.logLevel<=De.DEBUG){let t=e.map(Yb);Bs.debug(`Firestore (${Mc}): ${n}`,...t)}}function ki(n,...e){if(Bs.logLevel<=De.ERROR){let t=e.map(Yb);Bs.error(`Firestore (${Mc}): ${n}`,...t)}}function mc(n,...e){if(Bs.logLevel<=De.WARN){let t=e.map(Yb);Bs.warn(`Firestore (${Mc}): ${n}`,...t)}}function Yb(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function oe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,mx(n,r,t)}function mx(n,e,t){let r=`FIRESTORE (${Mc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ki(r),new Error(r)}function Ve(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||mx(e,i,r)}function de(n,e){return n}var L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},z=class extends Fn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Dr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var pm=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},fI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Lt.UNAUTHENTICATED))}shutdown(){}},pI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},mI=class{constructor(e){this.t=e,this.currentUser=Lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ve(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new Dr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Dr,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>_(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Dr)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ve(typeof r.accessToken=="string",31837,{l:r}),new pm(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ve(e===null||typeof e=="string",2055,{h:e}),new Lt(e)}},gI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Lt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},yI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new gI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},mm=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},vI=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,bn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ve(this.o===void 0,3512);let r=o=>{o.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,G("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new mm(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ve(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new mm(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function mH(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Qu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=mH(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function Ae(n,e){return n<e?-1:n>e?1:0}function _I(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return cI(i)===cI(o)?Ae(i,o):cI(i)?1:-1}return Ae(n.length,e.length)}var gH=55296,yH=57343;function cI(n){let e=n.charCodeAt(0);return e>=gH&&e<=yH}function gc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var DP="__name__",gm=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&oe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&oe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Ae(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):_I(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xi.fromString(e.substring(4,e.length-2))}},tt=class n extends gm{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new z(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},vH=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Vn=class n extends gm{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return vH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===DP}static keyField(){return new n([DP])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new z(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new z(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new z(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new z(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var re=class n{constructor(e){this.path=e}static fromPath(e){return new n(tt.fromString(e))}static fromName(e){return new n(tt.fromString(e).popFirst(5))}static empty(){return new n(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new tt(e.slice()))}};function gx(n,e,t){if(!t)throw new z(L.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _H(n,e,t,r){if(e===!0&&r===!0)throw new z(L.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function SP(n){if(!re.isDocumentKey(n))throw new z(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function AP(n){if(re.isDocumentKey(n))throw new z(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function yx(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Wm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":oe(12329,{type:typeof n})}function Cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new z(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Wm(n);throw new z(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Dt(n,e){let t={typeString:n};return e&&(t.value=e),t}function ud(n,e){if(!yx(n))throw new z(L.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new z(L.INVALID_ARGUMENT,t);return!0}var MP=-62135596800,RP=1e6,St=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*RP);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new z(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new z(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<MP)throw new z(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/RP}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ud(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-MP;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};St._jsonSchemaVersion="firestore/timestamp/1.0",St._jsonSchema={type:Dt("string",St._jsonSchemaVersion),seconds:Dt("number"),nanoseconds:Dt("number")};var fe=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new St(0,0))}static max(){return new n(new St(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Yu=-1,EI=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};EI.UNKNOWN_ID=-1;function EH(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=fe.fromTimestamp(r===1e9?new St(t+1,0):new St(t,r));return new $s(i,re.empty(),e)}function wH(n){return new $s(n.readTime,n.key,Yu)}var $s=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(fe.min(),re.empty(),Yu)}static max(){return new n(fe.max(),re.empty(),Yu)}};function IH(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=re.comparator(n.documentKey,e.documentKey),t!==0?t:Ae(n.largestBatchId,e.largestBatchId))}var bH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",wI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Rc(n){return _(this,null,function*(){if(n.code!==L.FAILED_PRECONDITION||n.message!==bH)throw n;G("LocalStore","Unexpectedly lost primary lease")})}var j=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;t(e[u]).next(h=>{s[u]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function CH(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Nc(n){return n.name==="IndexedDbTransactionError"}var Jb=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),Zb=-1;function Km(n){return n==null}function Ju(n){return n===0&&1/n==-1/0}function TH(n){return typeof n=="number"&&Number.isInteger(n)&&!Ju(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var vx="";function DH(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=NP(e)),e=SH(n.get(t),e);return NP(e)}function SH(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case vx:t+="";break;default:t+=o}}return t}function NP(n){return n+vx+""}var AH="remoteDocuments",_x="owner";var Ex="mutationQueues";var wx="mutations";var Ix="documentMutations",MH="remoteDocumentsV14";var bx="remoteDocumentGlobal";var Cx="targets";var Tx="targetDocuments";var Dx="targetGlobal",Sx="collectionParents";var Ax="clientMetadata";var Mx="bundles";var Rx="namedQueries";var RH="indexConfiguration";var NH="indexState";var PH="indexEntries";var Nx="documentOverlays";var xH="globals";var OH=[Ex,wx,Ix,AH,Cx,_x,Dx,Tx,Ax,bx,Sx,Mx,Rx],Wae=[...OH,Nx],kH=[Ex,wx,Ix,MH,Cx,_x,Dx,Tx,Ax,bx,Sx,Mx,Rx,Nx],FH=kH,LH=[...FH,RH,NH,PH];var Kae=[...LH,xH];function PP(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Vo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Px(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var at=class n{constructor(e,t){this.comparator=e,this.root=t||Yr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hc(this.root,e,this.comparator,!1)}getReverseIterator(){return new hc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hc(this.root,e,this.comparator,!0)}},hc=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Yr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw oe(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw oe(27949);return e+(this.isRed()?0:1)}};Yr.EMPTY=null,Yr.RED=!0,Yr.BLACK=!1;Yr.EMPTY=new class{constructor(){this.size=0}get key(){throw oe(57766)}get value(){throw oe(16141)}get color(){throw oe(16727)}get left(){throw oe(29726)}get right(){throw oe(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Yr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Vt=class n{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ym(this.data.getIterator())}getIteratorFrom(e){return new ym(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},ym=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var er=class n{constructor(e){this.fields=e,e.sort(Vn.comparator)}static empty(){return new n([])}unionWith(e){let t=new Vt(Vn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return gc(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var vm=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var on=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new vm("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};on.EMPTY_BYTE_STRING=new on("");var VH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fi(n){if(Ve(!!n,39018),typeof n=="string"){let e=0,t=VH.exec(n);if(Ve(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:et(n.seconds),nanos:et(n.nanos)}}function et(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Li(n){return typeof n=="string"?on.fromBase64String(n):on.fromUint8Array(n)}var xx="server_timestamp",Ox="__type__",kx="__previous_value__",Fx="__local_write_time__";function Xb(n){return(n?.mapValue?.fields||{})[Ox]?.stringValue===xx}function Qm(n){let e=n.mapValue.fields[kx];return Xb(e)?Qm(e):e}function Zu(n){let e=Fi(n.mapValue.fields[Fx].timestampValue);return new St(e.seconds,e.nanos)}var II=class{constructor(e,t,r,i,o,s,a,c,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}},_m="(default)",Em=class n{constructor(e,t){this.projectId=e,this.database=t||_m}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===_m}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var e0="__type__",Lx="__max__",cm={mapValue:{fields:{__type__:{stringValue:Lx}}}},t0="__vector__",yc="value";function ko(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Xb(n)?4:Ux(n)?9007199254740991:Vx(n)?10:11:oe(28295,{value:n})}function ei(n,e){if(n===e)return!0;let t=ko(n);if(t!==ko(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Zu(n).isEqual(Zu(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Fi(i.timestampValue),a=Fi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return Li(i.bytesValue).isEqual(Li(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return et(i.geoPointValue.latitude)===et(o.geoPointValue.latitude)&&et(i.geoPointValue.longitude)===et(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return et(i.integerValue)===et(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=et(i.doubleValue),a=et(o.doubleValue);return s===a?Ju(s)===Ju(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return gc(n.arrayValue.values||[],e.arrayValue.values||[],ei);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(PP(s)!==PP(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!ei(s[c],a[c])))return!1;return!0})(n,e);default:return oe(52216,{left:n})}}function Xu(n,e){return(n.values||[]).find(t=>ei(t,e))!==void 0}function vc(n,e){if(n===e)return 0;let t=ko(n),r=ko(e);if(t!==r)return Ae(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ae(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=et(o.integerValue||o.doubleValue),c=et(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(n,e);case 3:return xP(n.timestampValue,e.timestampValue);case 4:return xP(Zu(n),Zu(e));case 5:return _I(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=Li(o),c=Li(s);return a.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let h=Ae(a[u],c[u]);if(h!==0)return h}return Ae(a.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=Ae(et(o.latitude),et(s.latitude));return a!==0?a:Ae(et(o.longitude),et(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return OP(n.arrayValue,e.arrayValue);case 10:return(function(o,s){let a=o.fields||{},c=s.fields||{},u=a[yc]?.arrayValue,h=c[yc]?.arrayValue,p=Ae(u?.values?.length||0,h?.values?.length||0);return p!==0?p:OP(u,h)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===cm.mapValue&&s===cm.mapValue)return 0;if(o===cm.mapValue)return 1;if(s===cm.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){let m=_I(c[p],h[p]);if(m!==0)return m;let y=vc(a[c[p]],u[h[p]]);if(y!==0)return y}return Ae(c.length,h.length)})(n.mapValue,e.mapValue);default:throw oe(23264,{he:t})}}function xP(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ae(n,e);let t=Fi(n),r=Fi(e),i=Ae(t.seconds,r.seconds);return i!==0?i:Ae(t.nanos,r.nanos)}function OP(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=vc(t[i],r[i]);if(o)return o}return Ae(t.length,r.length)}function _c(n){return bI(n)}function bI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Fi(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Li(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return re.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=bI(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${bI(t.fields[s])}`;return i+"}"})(n.mapValue):oe(61005,{value:n})}function dm(n){switch(ko(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Qm(n);return e?16+dm(e):16;case 5:return 2*n.stringValue.length;case 6:return Li(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+dm(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Vo(r.fields,(o,s)=>{i+=o.length+dm(s)}),i})(n.mapValue);default:throw oe(13486,{value:n})}}function kP(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function CI(n){return!!n&&"integerValue"in n}function n0(n){return!!n&&"arrayValue"in n}function FP(n){return!!n&&"nullValue"in n}function LP(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function hm(n){return!!n&&"mapValue"in n}function Vx(n){return(n?.mapValue?.fields||{})[e0]?.stringValue===t0}function qu(n){if(n.geoPointValue)return{geoPointValue:k({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:k({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Vo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=qu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=qu(n.arrayValue.values[t]);return e}return k({},n)}function Ux(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Lx}var Yae={mapValue:{fields:{[e0]:{stringValue:t0},[yc]:{arrayValue:{}}}}};var Ln=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!hm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qu(t)}setAll(e){let t=Vn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=qu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());hm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ei(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];hm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Vo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(qu(this.value))}};function jx(n){let e=[];return Vo(n.fields,(t,r)=>{let i=new Vn([t]);if(hm(r)){let o=jx(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new er(e)}var Sr=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,fe.min(),fe.min(),fe.min(),Ln.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,fe.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,fe.min(),fe.min(),Ln.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,fe.min(),fe.min(),Ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ec=class{constructor(e,t){this.position=e,this.inclusive=t}};function VP(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=re.comparator(re.fromName(s.referenceValue),t.key):r=vc(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function UP(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ei(n.position[t],e.position[t]))return!1;return!0}var wc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function UH(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var wm=class{},Tt=class n extends wm{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new DI(e,t,r):t==="array-contains"?new MI(e,r):t==="in"?new RI(e,r):t==="not-in"?new NI(e,r):t==="array-contains-any"?new PI(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new SI(e,r):new AI(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(vc(t,this.value)):t!==null&&ko(this.value)===ko(t)&&this.matchesComparison(vc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ar=class n extends wm{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return Bx(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function Bx(n){return n.op==="and"}function $x(n){return jH(n)&&Bx(n)}function jH(n){for(let e of n.filters)if(e instanceof Ar)return!1;return!0}function TI(n){if(n instanceof Tt)return n.field.canonicalString()+n.op.toString()+_c(n.value);if($x(n))return n.filters.map(e=>TI(e)).join(",");{let e=n.filters.map(t=>TI(t)).join(",");return`${n.op}(${e})`}}function Hx(n,e){return n instanceof Tt?(function(r,i){return i instanceof Tt&&r.op===i.op&&r.field.isEqual(i.field)&&ei(r.value,i.value)})(n,e):n instanceof Ar?(function(r,i){return i instanceof Ar&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&Hx(s,i.filters[a]),!0):!1})(n,e):void oe(19439)}function zx(n){return n instanceof Tt?(function(t){return`${t.field.canonicalString()} ${t.op} ${_c(t.value)}`})(n):n instanceof Ar?(function(t){return t.op.toString()+" {"+t.getFilters().map(zx).join(" ,")+"}"})(n):"Filter"}var DI=class extends Tt{constructor(e,t,r){super(e,t,r),this.key=re.fromName(r.referenceValue)}matches(e){let t=re.comparator(e.key,this.key);return this.matchesComparison(t)}},SI=class extends Tt{constructor(e,t){super(e,"in",t),this.keys=qx("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},AI=class extends Tt{constructor(e,t){super(e,"not-in",t),this.keys=qx("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function qx(n,e){return(e.arrayValue?.values||[]).map(t=>re.fromName(t.referenceValue))}var MI=class extends Tt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return n0(t)&&Xu(t.arrayValue,this.value)}},RI=class extends Tt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Xu(this.value.arrayValue,t)}},NI=class extends Tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Xu(this.value.arrayValue,t)}},PI=class extends Tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!n0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Xu(this.value.arrayValue,r))}};var xI=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}};function jP(n,e=null,t=[],r=[],i=null,o=null,s=null){return new xI(n,e,t,r,i,o,s)}function r0(n){let e=de(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>TI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Km(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>_c(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>_c(r)).join(",")),e.Te=t}return e.Te}function i0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!UH(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Hx(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!UP(n.startAt,e.startAt)&&UP(n.endAt,e.endAt)}function OI(n){return re.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Hs=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function BH(n,e,t,r,i,o,s,a){return new Hs(n,e,t,r,i,o,s,a)}function Ym(n){return new Hs(n)}function BP(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Gx(n){return n.collectionGroup!==null}function Gu(n){let e=de(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Vt(Vn.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new wc(o,r))}),t.has(Vn.keyField().canonicalString())||e.Ie.push(new wc(Vn.keyField(),r))}return e.Ie}function Jr(n){let e=de(n);return e.Ee||(e.Ee=$H(e,Gu(n))),e.Ee}function $H(n,e){if(n.limitType==="F")return jP(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new wc(i.field,o)});let t=n.endAt?new Ec(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ec(n.startAt.position,n.startAt.inclusive):null;return jP(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function kI(n,e){let t=n.filters.concat([e]);return new Hs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function FI(n,e,t){return new Hs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Jm(n,e){return i0(Jr(n),Jr(e))&&n.limitType===e.limitType}function Wx(n){return`${r0(Jr(n))}|lt:${n.limitType}`}function lc(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>zx(i)).join(", ")}]`),Km(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>_c(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>_c(i)).join(",")),`Target(${r})`})(Jr(n))}; limitType=${n.limitType})`}function Zm(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):re.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of Gu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,c){let u=VP(s,a,c);return s.inclusive?u<=0:u<0})(r.startAt,Gu(r),i)||r.endAt&&!(function(s,a,c){let u=VP(s,a,c);return s.inclusive?u>=0:u>0})(r.endAt,Gu(r),i))})(n,e)}function HH(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Kx(n){return(e,t)=>{let r=!1;for(let i of Gu(n)){let o=zH(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function zH(n,e,t){let r=n.field.isKeyField()?re.comparator(e.key,t.key):(function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?vc(c,u):oe(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return oe(19790,{direction:n.dir})}}var Vi=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Vo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Px(this.inner)}size(){return this.innerSize}};var qH=new at(re.comparator);function Ui(){return qH}var Qx=new at(re.comparator);function zu(...n){let e=Qx;for(let t of n)e=e.insert(t.key,t);return e}function Yx(n){let e=Qx;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Fs(){return Wu()}function Jx(){return Wu()}function Wu(){return new Vi(n=>n.toString(),(n,e)=>n.isEqual(e))}var GH=new at(re.comparator),WH=new Vt(re.comparator);function Me(...n){let e=WH;for(let t of n)e=e.add(t);return e}var KH=new Vt(Ae);function QH(){return KH}function o0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ju(e)?"-0":e}}function Zx(n){return{integerValue:""+n}}function YH(n,e){return TH(e)?Zx(e):o0(n,e)}var Ic=class{constructor(){this._=void 0}};function JH(n,e,t){return n instanceof bc?(function(i,o){let s={fields:{[Ox]:{stringValue:xx},[Fx]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Xb(o)&&(o=Qm(o)),o&&(s.fields[kx]=o),{mapValue:s}})(t,e):n instanceof zs?eO(n,e):n instanceof qs?tO(n,e):(function(i,o){let s=Xx(i,o),a=$P(s)+$P(i.Ae);return CI(s)&&CI(i.Ae)?Zx(a):o0(i.serializer,a)})(n,e)}function ZH(n,e,t){return n instanceof zs?eO(n,e):n instanceof qs?tO(n,e):t}function Xx(n,e){return n instanceof Cc?(function(r){return CI(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var bc=class extends Ic{},zs=class extends Ic{constructor(e){super(),this.elements=e}};function eO(n,e){let t=nO(e);for(let r of n.elements)t.some(i=>ei(i,r))||t.push(r);return{arrayValue:{values:t}}}var qs=class extends Ic{constructor(e){super(),this.elements=e}};function tO(n,e){let t=nO(e);for(let r of n.elements)t=t.filter(i=>!ei(i,r));return{arrayValue:{values:t}}}var Cc=class extends Ic{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function $P(n){return et(n.integerValue||n.doubleValue)}function nO(n){return n0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function XH(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof zs&&i instanceof zs||r instanceof qs&&i instanceof qs?gc(r.elements,i.elements,ei):r instanceof Cc&&i instanceof Cc?ei(r.Ae,i.Ae):r instanceof bc&&i instanceof bc})(n.transform,e.transform)}var LI=class{constructor(e,t){this.version=e,this.transformResults=t}},Zr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function fm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Tc=class{};function rO(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ed(n.key,Zr.none()):new Gs(n.key,n.data,Zr.none());{let t=n.data,r=Ln.empty(),i=new Vt(Vn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new ti(n.key,r,new er(i.toArray()),Zr.none())}}function ez(n,e,t){n instanceof Gs?(function(i,o,s){let a=i.value.clone(),c=zP(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof ti?(function(i,o,s){if(!fm(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=zP(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(iO(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Ku(n,e,t,r){return n instanceof Gs?(function(o,s,a,c){if(!fm(o.precondition,s))return a;let u=o.value.clone(),h=qP(o.fieldTransforms,c,s);return u.setAll(h),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null})(n,e,t,r):n instanceof ti?(function(o,s,a,c){if(!fm(o.precondition,s))return a;let u=qP(o.fieldTransforms,c,s),h=s.data;return h.setAll(iO(o)),h.setAll(u),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(o,s,a){return fm(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function tz(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Xx(r.transform,i||null);o!=null&&(t===null&&(t=Ln.empty()),t.set(r.field,o))}return t||null}function HP(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&gc(r,i,(o,s)=>XH(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Gs=class extends Tc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},ti=class extends Tc{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function iO(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function zP(n,e,t){let r=new Map;Ve(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,ZH(s,a,t[i]))}return r}function qP(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,JH(o,s,e))}return r}var ed=class extends Tc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},VI=class extends Tc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var UI=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&ez(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ku(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Ku(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Jx();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=rO(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(fe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Me())}isEqual(e){return this.batchId===e.batchId&&gc(this.mutations,e.mutations,(t,r)=>HP(t,r))&&gc(this.baseMutations,e.baseMutations,(t,r)=>HP(t,r))}},jI=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ve(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return GH})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var BI=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var $I=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var bt,Pe;function nz(n){switch(n){case L.OK:return oe(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return oe(15467,{code:n})}}function oO(n){if(n===void 0)return ki("GRPC error has no .code"),L.UNKNOWN;switch(n){case bt.OK:return L.OK;case bt.CANCELLED:return L.CANCELLED;case bt.UNKNOWN:return L.UNKNOWN;case bt.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case bt.INTERNAL:return L.INTERNAL;case bt.UNAVAILABLE:return L.UNAVAILABLE;case bt.UNAUTHENTICATED:return L.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case bt.NOT_FOUND:return L.NOT_FOUND;case bt.ALREADY_EXISTS:return L.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return L.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case bt.ABORTED:return L.ABORTED;case bt.OUT_OF_RANGE:return L.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return L.UNIMPLEMENTED;case bt.DATA_LOSS:return L.DATA_LOSS;default:return oe(39323,{code:n})}}(Pe=bt||(bt={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";var rz=null;function iz(){return new TextEncoder}var oz=new xi([4294967295,4294967295],0);function GP(n){let e=iz().encode(n),t=new nI;return t.update(e),new Uint8Array(t.digest())}function WP(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new xi([t,r],0),new xi([i,o],0)]}var HI=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ls(`Invalid padding: ${t}`);if(r<0)throw new Ls(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ls(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ls(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=xi.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(xi.fromNumber(r)));return i.compare(oz)===1&&(i=new xi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=GP(e),[r,i]=WP(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;let t=GP(e),[r,i]=WP(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ls=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Im=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,td.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(fe.min(),i,new at(Ae),Ui(),Me())}},td=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Me(),Me(),Me())}};var fc=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},bm=class{constructor(e,t){this.targetId=e,this.Ce=t}},Cm=class{constructor(e,t,r=on.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Tm=class{constructor(){this.ve=0,this.Fe=KP(),this.Me=on.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Me(),t=Me(),r=Me();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:oe(38017,{changeType:o})}}),new td(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=KP()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ve(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},zI=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ui(),this.Je=lm(),this.He=lm(),this.Ye=new at(Ae)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:oe(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(OI(o))if(r===0){let s=new re(o.path);this.et(t,s,Sr.newNoDocument(s,fe.min()))}else Ve(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let a=this.ut(e),c=a?this.ct(a,e,s):1;if(c!==0){this.it(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,u)}rz?.lt((function(h,p,m,y,I){let P={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},A=p.unchangedNames;return A&&(P.bloomFilter={applied:I===0,hashCount:A?.hashCount??0,bitmapLength:A?.bits?.bitmap?.length??0,padding:A?.bits?.padding??0,mightContain:F=>y?.mightContain(F)??!1}),P})(s,e.Ce,this.Ge.ht(),a,c))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Li(r).toUint8Array()}catch(c){if(c instanceof vm)return mc("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new HI(s,i,o)}catch(c){return mc(c instanceof Ls?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let a=this.ot(s);if(a){if(o.current&&OI(a.target)){let c=new re(a.target.path);this.It(c).has(s)||this.Et(s,c)||this.et(s,c,Sr.newNoDocument(c,e))}o.Be&&(t.set(s,o.ke()),o.qe())}});let r=Me();this.He.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Im(e,t,this.Ye,this.je,r);return this.je=Ui(),this.Je=lm(),this.He=lm(),this.Ye=new at(Ae),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Tm,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Vt(Ae),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Vt(Ae),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||G("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Tm),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function lm(){return new at(re.comparator)}function KP(){return new at(re.comparator)}var sz={asc:"ASCENDING",desc:"DESCENDING"},az={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cz={and:"AND",or:"OR"},qI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function GI(n,e){return n.useProto3Json||Km(e)?e:{value:e}}function Dm(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sO(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function lz(n,e){return Dm(n,e.toTimestamp())}function Xr(n){return Ve(!!n,49232),fe.fromTimestamp((function(t){let r=Fi(t);return new St(r.seconds,r.nanos)})(n))}function s0(n,e){return WI(n,e).canonicalString()}function WI(n,e){let t=(function(i){return new tt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function aO(n){let e=tt.fromString(n);return Ve(hO(e),10190,{key:e.toString()}),e}function KI(n,e){return s0(n.databaseId,e.path)}function lI(n,e){let t=aO(e);if(t.get(1)!==n.databaseId.projectId)throw new z(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new z(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new re(lO(t))}function cO(n,e){return s0(n.databaseId,e)}function uz(n){let e=aO(n);return e.length===4?tt.emptyPath():lO(e)}function QI(n){return new tt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function lO(n){return Ve(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function QP(n,e,t){return{name:KI(n,e),fields:t.value.mapValue.fields}}function dz(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:oe(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(u,h){return u.useProto3Json?(Ve(h===void 0||typeof h=="string",58123),on.fromBase64String(h||"")):(Ve(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),on.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(u){let h=u.code===void 0?L.UNKNOWN:oO(u.code);return new z(h,u.message||"")})(s);t=new Cm(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=lI(n,r.document.name),o=Xr(r.document.updateTime),s=r.document.createTime?Xr(r.document.createTime):fe.min(),a=new Ln({mapValue:{fields:r.document.fields}}),c=Sr.newFoundDocument(i,o,s,a),u=r.targetIds||[],h=r.removedTargetIds||[];t=new fc(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=lI(n,r.document),o=r.readTime?Xr(r.readTime):fe.min(),s=Sr.newNoDocument(i,o),a=r.removedTargetIds||[];t=new fc([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=lI(n,r.document),o=r.removedTargetIds||[];t=new fc([],o,i,null)}else{if(!("filter"in e))return oe(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new $I(i,o),a=r.targetId;t=new bm(a,s)}}return t}function hz(n,e){let t;if(e instanceof Gs)t={update:QP(n,e.key,e.value)};else if(e instanceof ed)t={delete:KI(n,e.key)};else if(e instanceof ti)t={update:QP(n,e.key,e.data),updateMask:wz(e.fieldMask)};else{if(!(e instanceof VI))return oe(16599,{Vt:e.type});t={verify:KI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof bc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof zs)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qs)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Cc)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw oe(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:lz(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:oe(27497)})(n,e.precondition)),t}function fz(n,e){return n&&n.length>0?(Ve(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?Xr(i.updateTime):Xr(o);return s.isEqual(fe.min())&&(s=Xr(o)),new LI(s,i.transformResults||[])})(t,e))):[]}function pz(n,e){return{documents:[cO(n,e.path)]}}function mz(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=cO(n,i);let o=(function(u){if(u.length!==0)return dO(Ar.create(u,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(u){if(u.length!==0)return u.map(h=>(function(m){return{field:uc(m.field),direction:vz(m.dir)}})(h))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=GI(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:t,parent:i}}function gz(n){let e=uz(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Ve(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=(function(p){let m=uO(p);return m instanceof Ar&&$x(m)?m.getFilters():[m]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map(m=>(function(I){return new wc(dc(I.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(I.direction))})(m))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let m;return m=typeof p=="object"?p.value:p,Km(m)?null:m})(t.limit));let c=null;t.startAt&&(c=(function(p){let m=!!p.before,y=p.values||[];return new Ec(y,m)})(t.startAt));let u=null;return t.endAt&&(u=(function(p){let m=!p.before,y=p.values||[];return new Ec(y,m)})(t.endAt)),BH(e,i,s,o,a,"F",c,u)}function yz(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function uO(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=dc(t.unaryFilter.field);return Tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=dc(t.unaryFilter.field);return Tt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=dc(t.unaryFilter.field);return Tt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=dc(t.unaryFilter.field);return Tt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return oe(61313);default:return oe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Tt.create(dc(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return oe(58110);default:return oe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ar.create(t.compositeFilter.filters.map(r=>uO(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return oe(1026)}})(t.compositeFilter.op))})(n):oe(30097,{filter:n})}function vz(n){return sz[n]}function _z(n){return az[n]}function Ez(n){return cz[n]}function uc(n){return{fieldPath:n.canonicalString()}}function dc(n){return Vn.fromServerFormat(n.fieldPath)}function dO(n){return n instanceof Tt?(function(t){if(t.op==="=="){if(LP(t.value))return{unaryFilter:{field:uc(t.field),op:"IS_NAN"}};if(FP(t.value))return{unaryFilter:{field:uc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(LP(t.value))return{unaryFilter:{field:uc(t.field),op:"IS_NOT_NAN"}};if(FP(t.value))return{unaryFilter:{field:uc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uc(t.field),op:_z(t.op),value:t.value}}})(n):n instanceof Ar?(function(t){let r=t.getFilters().map(i=>dO(i));return r.length===1?r[0]:{compositeFilter:{op:Ez(t.op),filters:r}}})(n):oe(54877,{filter:n})}function wz(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function hO(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var nd=class n{constructor(e,t,r,i,o=fe.min(),s=fe.min(),a=on.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var YI=class{constructor(e){this.yt=e}};function Iz(n){let e=gz({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?FI(e,e.limit,"L"):e}var Sm=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(et(e.integerValue));else if("doubleValue"in e){let r=et(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Ju(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Fi(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Li(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?Ux(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Vx(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):oe(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=yc,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(et(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),re.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};Sm.Kt=new Sm;var JI=class{constructor(){this.Cn=new ZI}addToCollectionParentIndex(e,t){return this.Cn.add(t),j.resolve()}getCollectionParents(e,t){return j.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return j.resolve()}deleteFieldIndex(e,t){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,t){return j.resolve()}getDocumentsMatchingTarget(e,t){return j.resolve(null)}getIndexType(e,t){return j.resolve(0)}getFieldIndexes(e,t){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,t){return j.resolve($s.min())}getMinOffsetFromCollectionGroup(e,t){return j.resolve($s.min())}updateCollectionGroup(e,t,r){return j.resolve()}updateIndexEntries(e,t){return j.resolve()}},ZI=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Vt(tt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Vt(tt.comparator)).toArray()}};var Jae=new Uint8Array(0);var YP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fO=41943040,Xn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Xn.DEFAULT_COLLECTION_PERCENTILE=10,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xn.DEFAULT=new Xn(fO,Xn.DEFAULT_COLLECTION_PERCENTILE,Xn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xn.DISABLED=new Xn(-1,0,0);var rd=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var JP="LruGarbageCollector",bz=1048576;function ZP([n,e],[t,r]){let i=Ae(n,t);return i===0?Ae(e,r):i}var XI=class{constructor(e){this.Ir=e,this.buffer=new Vt(ZP),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();ZP(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},eb=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){G(JP,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>_(this,null,function*(){this.Rr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Nc(t)?G(JP,"Ignoring IndexedDB error during garbage collection: ",t):yield Rc(t)}yield this.Vr(3e5)}))}},tb=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return j.resolve(Jb.ce);let r=new XI(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(YP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),YP):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,s,a,c,u,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(u=Date.now(),cc()<=De.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${p} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function Cz(n,e){return new tb(n,e)}var nb=class{constructor(){this.changes=new Vi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Sr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?j.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var rb=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var ib=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ku(r.mutation,i,er.empty(),St.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Me()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Me()){let i=Fs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=zu();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Fs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Me()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Ui(),s=Wu(),a=(function(){return Wu()})();return t.forEach((c,u)=>{let h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof ti)?o=o.insert(u.key,u):h!==void 0?(s.set(u.key,h.mutation.getFieldMask()),Ku(h.mutation,u,h.mutation.getFieldMask(),St.now())):s.set(u.key,er.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,h)=>s.set(u,h)),t.forEach((u,h)=>a.set(u,new rb(h,s.get(u)??null))),a))}recalculateAndSaveOverlays(e,t){let r=Wu(),i=new at((s,a)=>s-a),o=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let h=r.get(c)||er.empty();h=a.applyToLocalView(u,h),r.set(c,h);let p=(i.get(a.batchId)||Me()).add(c);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,h=c.value,p=Jx();h.forEach(m=>{if(!o.has(m)){let y=rO(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,p))}return j.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return re.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Gx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):j.resolve(Fs()),a=Yu,c=o;return s.next(u=>j.forEach(u,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?j.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,Me())).next(h=>({batchId:a,changes:Yx(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new re(t)).next(r=>{let i=zu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=zu();return this.indexManager.getCollectionParents(e,o).next(a=>j.forEach(a,c=>{let u=(function(p,m){return new Hs(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,u)=>{let h=u.getKey();s.get(h)===null&&(s=s.insert(h,Sr.newInvalidDocument(h)))});let a=zu();return s.forEach((c,u)=>{let h=o.get(c);h!==void 0&&Ku(h.mutation,u,er.empty(),St.now()),Zm(t,u)&&(a=a.insert(c,u))}),a})}};var ob=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return j.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Xr(i.createTime)}})(t)),j.resolve()}getNamedQuery(e,t){return j.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:Iz(i.bundledQuery),readTime:Xr(i.readTime)}})(t)),j.resolve()}};var sb=class{constructor(){this.overlays=new at(re.comparator),this.qr=new Map}getOverlay(e,t){return j.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Fs();return j.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),j.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),j.resolve()}getOverlaysForCollection(e,t,r){let i=Fs(),o=t.length+1,s=new re(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return j.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new at((u,h)=>u-h),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let h=o.get(u.largestBatchId);h===null&&(h=Fs(),o=o.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}let a=Fs(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=i)););return j.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new BI(t,r));let o=this.qr.get(t);o===void 0&&(o=Me(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}};var ab=class{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,j.resolve()}};var id=class{constructor(){this.Qr=new Vt(Ct.$r),this.Ur=new Vt(Ct.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new Ct(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Ct(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new re(new tt([])),r=new Ct(t,e),i=new Ct(t,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new re(new tt([])),r=new Ct(t,e),i=new Ct(t,e+1),o=Me();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Ct(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ct=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return re.comparator(e.key,t.key)||Ae(e.Yr,t.Yr)}static Kr(e,t){return Ae(e.Yr,t.Yr)||re.comparator(e.key,t.key)}};var cb=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Vt(Ct.$r)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new UI(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Zr=this.Zr.add(new Ct(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(s)}lookupMutationBatch(e,t){return j.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),o=i<0?0:i;return j.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?Zb:this.tr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ct(t,0),i=new Ct(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let a=this.Xr(s.Yr);o.push(a)}),j.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Vt(Ae);return t.forEach(i=>{let o=new Ct(i,0),s=new Ct(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],a=>{r=r.add(a.Yr)})}),j.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;re.isDocumentKey(o)||(o=o.child(""));let s=new Ct(new re(o),0),a=new Vt(Ae);return this.Zr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Yr)),!0)},s),j.resolve(this.ti(a))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ve(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return j.forEach(t.mutations,i=>{let o=new Ct(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new Ct(t,0),i=this.Zr.firstAfterOrEqual(r);return j.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var lb=class{constructor(e){this.ri=e,this.docs=(function(){return new at(re.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return j.resolve(r?r.document.mutableCopy():Sr.newInvalidDocument(t))}getEntries(e,t){let r=Ui();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Sr.newInvalidDocument(i))}),j.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Ui(),s=t.path,a=new re(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:h}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||IH(wH(h),r)<=0||(i.has(h.key)||Zm(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return j.resolve(o)}getAllFromCollectionGroup(e,t,r,i){oe(9500)}ii(e,t){return j.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new ub(this)}getSize(e){return j.resolve(this.size)}},ub=class extends nb{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),j.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var db=class{constructor(e){this.persistence=e,this.si=new Vi(t=>r0(t),i0),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.oi=0,this._i=new id,this.targetCount=0,this.ai=rd.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),j.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new rd(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,j.resolve()}updateTargetData(e,t){return this.Pr(t),j.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),j.waitFor(o).next(()=>i)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return j.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),j.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),j.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),j.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return j.resolve(r)}containsKey(e,t){return j.resolve(this._i.containsKey(t))}};var Am=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new Jb(0),this.li=!1,this.li=!0,this.hi=new ab,this.referenceDelegate=e(this),this.Pi=new db(this),this.indexManager=new JI,this.remoteDocumentCache=(function(i){return new lb(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new YI(t),this.Ii=new ob(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new sb,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new cb(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){G("MemoryPersistence","Starting transaction:",e);let i=new hb(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return j.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},hb=class extends wI{constructor(e){super(),this.currentSequenceNumber=e}},fb=class n{constructor(e){this.persistence=e,this.Ri=new id,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw oe(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),j.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),j.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.fi,r=>{let i=re.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,fe.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return j.or([()=>j.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},Mm=class n{constructor(e,t){this.persistence=e,this.pi=new Vi(r=>DH(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Cz(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return j.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return j.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?j.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,t).next(a=>{a||(r++,o.removeEntry(s,fe.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),j.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),j.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=dm(e.data.value)),t}br(e,t,r){return j.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return j.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var pb=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=Me(),i=Me();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var mb=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var gb=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return iP()?8:CH(Ft())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ys(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new mb;return this.Ss(e,t,s).next(a=>{if(o.result=a,this.Vs)return this.bs(e,t,s,a.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(cc()<=De.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",lc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),j.resolve()):(cc()<=De.DEBUG&&G("QueryEngine","Query:",lc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(cc()<=De.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",lc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jr(t))):j.resolve())}ys(e,t){if(BP(t))return j.resolve(null);let r=Jr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=FI(t,null,"F"),r=Jr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Me(...o);return this.ps.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.Ds(t,a);return this.Cs(t,u,s,c.readTime)?this.ys(e,FI(t,null,"F")):this.vs(e,u,t,c)}))})))}ws(e,t,r,i){return BP(t)||i.isEqual(fe.min())?j.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(t,o);return this.Cs(t,s,r,i)?j.resolve(null):(cc()<=De.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),lc(t)),this.vs(e,s,t,EH(i,Yu)).next(a=>a))})}Ds(e,t){let r=new Vt(Kx(e));return t.forEach((i,o)=>{Zm(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return cc()<=De.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",lc(t)),this.ps.getDocumentsMatchingQuery(e,t,$s.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var a0="LocalStore",Tz=3e8,yb=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new at(Ae),this.xs=new Vi(o=>r0(o),i0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ib(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function Dz(n,e,t,r){return new yb(n,e,t,r)}function pO(n,e){return _(this,null,function*(){let t=de(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=Me();for(let u of i){s.push(u.batchId);for(let h of u.mutations)c=c.add(h.key)}for(let u of o){a.push(u.batchId);for(let h of u.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Ls:u,removedBatchIds:s,addedBatchIds:a}))})})})}function Sz(n,e){let t=de(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,c,u,h){let p=u.batch,m=p.keys(),y=j.resolve();return m.forEach(I=>{y=y.next(()=>h.getEntry(c,I)).next(P=>{let A=u.docVersions.get(I);Ve(A!==null,48541),P.version.compareTo(A)<0&&(p.applyToRemoteDocument(P,u),P.isValidDocument()&&(P.setReadTime(u.commitVersion),h.addEntry(P)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,p))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=Me();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function mO(n){let e=de(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function Az(n,e){let t=de(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Pi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Pi.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(on.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(P,A,F){return P.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=Tz?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0})(m,y,h)&&a.push(t.Pi.updateTargetData(o,y))});let c=Ui(),u=Me();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(Mz(o,s,e.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!r.isEqual(fe.min())){let h=t.Pi.getLastRemoteSnapshotVersion(o).next(p=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return j.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(t.Ms=i,o))}function Mz(n,e,t){let r=Me(),i=Me();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Ui();return t.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(fe.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):G(a0,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{ks:s,qs:i}})}function Rz(n,e){let t=de(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Zb),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Nz(n,e){let t=de(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,j.resolve(i)):t.Pi.allocateTargetId(r).next(s=>(i=new nd(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}function vb(n,e,t){return _(this,null,function*(){let r=de(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Nc(s))throw s;G(a0,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)})}function XP(n,e,t){let r=de(n),i=fe.min(),o=Me();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(c,u,h){let p=de(c),m=p.xs.get(h);return m!==void 0?j.resolve(p.Ms.get(m)):p.Pi.getTargetData(u,h)})(r,s,Jr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,t?i:fe.min(),t?o:Me())).next(a=>(Pz(r,HH(e),a),{documents:a,Qs:o})))}function Pz(n,e,t){let r=n.Os.get(e)||fe.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}var Rm=class{constructor(){this.activeTargetIds=QH()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var _b=class{constructor(){this.Mo=new Rm,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Rm,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Eb=class{Oo(e){}shutdown(){}};var ex="ConnectivityMonitor",Nm=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){G(ex,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){G(ex,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var um=null;function wb(){return um===null?um=(function(){return 268435456+Math.round(2147483648*Math.random())})():um++,"0x"+um.toString(16)}var uI="RestConnection",xz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Ib=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===_m?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){let s=wb(),a=this.zo(e,t.toUriEncodedString());G(uI,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,o);let{host:u}=new URL(a),h=Do(u);return this.Jo(e,a,c,r,h).then(p=>(G(uI,`Received RPC '${e}' ${s}: `,p),p),p=>{throw mc(uI,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Ho(e,t,r,i,o,s){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Mc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){let r=xz[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var bb=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var rn="WebChannelConnection",Cb=class extends Ib{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=wb();return new Promise((a,c)=>{let u=new rI;u.setWithCredentials(!0),u.listenOnce(iI.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Hu.NO_ERROR:let p=u.getResponseJson();G(rn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Hu.TIMEOUT:G(rn,`RPC '${e}' ${s} timed out`),c(new z(L.DEADLINE_EXCEEDED,"Request time out"));break;case Hu.HTTP_ERROR:let m=u.getStatus();if(G(rn,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);let I=y?.error;if(I&&I.status&&I.message){let P=(function(F){let W=F.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(W)>=0?W:L.UNKNOWN})(I.status);c(new z(P,I.message))}else c(new z(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new z(L.UNAVAILABLE,"Connection failed."));break;default:oe(9055,{l_:e,streamId:s,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{G(rn,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);G(rn,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",h,r,15)})}T_(e,t,r){let i=wb(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=aI(),a=sI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let h=o.join("");G(rn,`Creating RPC '${e}' stream ${i}: ${h}`,c);let p=s.createWebChannel(h,c);this.I_(p);let m=!1,y=!1,I=new bb({Yo:A=>{y?G(rn,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(m||(G(rn,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),G(rn,`RPC '${e}' stream ${i} sending:`,A),p.send(A))},Zo:()=>p.close()}),P=(A,F,W)=>{A.listen(F,J=>{try{W(J)}catch(ie){setTimeout(()=>{throw ie},0)}})};return P(p,ac.EventType.OPEN,()=>{y||(G(rn,`RPC '${e}' stream ${i} transport opened.`),I.o_())}),P(p,ac.EventType.CLOSE,()=>{y||(y=!0,G(rn,`RPC '${e}' stream ${i} transport closed`),I.a_(),this.E_(p))}),P(p,ac.EventType.ERROR,A=>{y||(y=!0,mc(rn,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),I.a_(new z(L.UNAVAILABLE,"The operation could not be completed")))}),P(p,ac.EventType.MESSAGE,A=>{if(!y){let F=A.data[0];Ve(!!F,16349);let W=F,J=W?.error||W[0]?.error;if(J){G(rn,`RPC '${e}' stream ${i} received error:`,J);let ie=J.status,Ue=(function(v){let w=bt[v];if(w!==void 0)return oO(w)})(ie),we=J.message;Ue===void 0&&(Ue=L.INTERNAL,we="Unknown error status: "+ie+" with message "+J.message),y=!0,I.a_(new z(Ue,we)),p.close()}else G(rn,`RPC '${e}' stream ${i} received:`,F),I.u_(F)}}),P(a,oI.STAT_EVENT,A=>{A.stat===am.PROXY?G(rn,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===am.NOPROXY&&G(rn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.__()},0),I}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function dI(){return typeof document<"u"?document:null}function Xm(n){return new qI(n,!0)}var Pm=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&G("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var tx="PersistentStream",xm=class{constructor(e,t,r,i,o,s,a,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Pm(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}stop(){return _(this,null,function*(){this.x_()&&(yield this.close(0))})}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}k_(){return _(this,null,function*(){if(this.O_())return this.close(0)})}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}close(e,t){return _(this,null,function*(){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===L.RESOURCE_EXHAUSTED?(ki(t.toString()),ki("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.r_(t)})}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new z(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(()=>_(this,null,function*(){this.state=0,this.start()}))}z_(e){return G(tx,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(G(tx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Tb=class extends xm{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=dz(this.serializer,e),r=(function(o){if(!("targetChange"in o))return fe.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?fe.min():s.readTime?Xr(s.readTime):fe.min()})(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=QI(this.serializer),t.addTarget=(function(o,s){let a,c=s.target;if(a=OI(c)?{documents:pz(o,c)}:{query:mz(o,c).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=sO(o,s.resumeToken);let u=GI(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(fe.min())>0){a.readTime=Dm(o,s.snapshotVersion.toTimestamp());let u=GI(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);let r=yz(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=QI(this.serializer),t.removeTarget=e,this.q_(t)}},Db=class extends xm{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=fz(e.writeResults,e.commitTime),r=Xr(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=QI(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>hz(this.serializer,r))};this.q_(t)}};var Sb=class{},Ab=class extends Sb{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new z(L.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,WI(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(L.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,WI(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(L.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},Mb=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ki(t),this.aa=!1):G("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Ws="RemoteStore",Rb=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(()=>_(this,null,function*(){Qs(this)&&(G(Ws,"Restarting streams for network reachability change."),yield(function(c){return _(this,null,function*(){let u=de(c);u.Ea.add(4),yield dd(u),u.Ra.set("Unknown"),u.Ea.delete(4),yield eg(u)})})(this))}))}),this.Ra=new Mb(r,i)}};function eg(n){return _(this,null,function*(){if(Qs(n))for(let e of n.da)yield e(!0)})}function dd(n){return _(this,null,function*(){for(let e of n.da)yield e(!1)})}function gO(n,e){let t=de(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),d0(t)?u0(t):Pc(t).O_()&&l0(t,e))}function c0(n,e){let t=de(n),r=Pc(t);t.Ia.delete(e),r.O_()&&yO(t,e),t.Ia.size===0&&(r.O_()?r.L_():Qs(t)&&t.Ra.set("Unknown"))}function l0(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fe.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Pc(n).Y_(e)}function yO(n,e){n.Va.Ue(e),Pc(n).Z_(e)}function u0(n){n.Va=new zI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Pc(n).start(),n.Ra.ua()}function d0(n){return Qs(n)&&!Pc(n).x_()&&n.Ia.size>0}function Qs(n){return de(n).Ea.size===0}function vO(n){n.Va=void 0}function Oz(n){return _(this,null,function*(){n.Ra.set("Online")})}function kz(n){return _(this,null,function*(){n.Ia.forEach((e,t)=>{l0(n,e)})})}function Fz(n,e){return _(this,null,function*(){vO(n),d0(n)?(n.Ra.ha(e),u0(n)):n.Ra.set("Unknown")})}function Lz(n,e,t){return _(this,null,function*(){if(n.Ra.set("Online"),e instanceof Cm&&e.state===2&&e.cause)try{yield(function(i,o){return _(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Ia.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))})})(n,e)}catch(r){G(Ws,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Om(n,r)}else if(e instanceof fc?n.Va.Ze(e):e instanceof bm?n.Va.st(e):n.Va.tt(e),!t.isEqual(fe.min()))try{let r=yield mO(n.localStore);t.compareTo(r)>=0&&(yield(function(o,s){let a=o.Va.Tt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let h=o.Ia.get(u);h&&o.Ia.set(u,h.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let h=o.Ia.get(c);if(!h)return;o.Ia.set(c,h.withResumeToken(on.EMPTY_BYTE_STRING,h.snapshotVersion)),yO(o,c);let p=new nd(h.target,c,u,h.sequenceNumber);l0(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t))}catch(r){G(Ws,"Failed to raise snapshot:",r),yield Om(n,r)}})}function Om(n,e,t){return _(this,null,function*(){if(!Nc(e))throw e;n.Ea.add(1),yield dd(n),n.Ra.set("Offline"),t||(t=()=>mO(n.localStore)),n.asyncQueue.enqueueRetryable(()=>_(null,null,function*(){G(Ws,"Retrying IndexedDB access"),yield t(),n.Ea.delete(1),yield eg(n)}))})}function _O(n,e){return e().catch(t=>Om(n,t,e))}function tg(n){return _(this,null,function*(){let e=de(n),t=Fo(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Zb;for(;Vz(e);)try{let i=yield Rz(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,Uz(e,i)}catch(i){yield Om(e,i)}EO(e)&&wO(e)})}function Vz(n){return Qs(n)&&n.Ta.length<10}function Uz(n,e){n.Ta.push(e);let t=Fo(n);t.O_()&&t.X_&&t.ea(e.mutations)}function EO(n){return Qs(n)&&!Fo(n).x_()&&n.Ta.length>0}function wO(n){Fo(n).start()}function jz(n){return _(this,null,function*(){Fo(n).ra()})}function Bz(n){return _(this,null,function*(){let e=Fo(n);for(let t of n.Ta)e.ea(t.mutations)})}function $z(n,e,t){return _(this,null,function*(){let r=n.Ta.shift(),i=jI.from(r,e,t);yield _O(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield tg(n)})}function Hz(n,e){return _(this,null,function*(){e&&Fo(n).X_&&(yield(function(r,i){return _(this,null,function*(){if((function(s){return nz(s)&&s!==L.ABORTED})(i.code)){let o=r.Ta.shift();Fo(r).B_(),yield _O(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield tg(r)}})})(n,e)),EO(n)&&wO(n)})}function nx(n,e){return _(this,null,function*(){let t=de(n);t.asyncQueue.verifyOperationInProgress(),G(Ws,"RemoteStore received new credentials");let r=Qs(t);t.Ea.add(3),yield dd(t),r&&t.Ra.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),yield eg(t)})}function zz(n,e){return _(this,null,function*(){let t=de(n);e?(t.Ea.delete(2),yield eg(t)):e||(t.Ea.add(2),yield dd(t),t.Ra.set("Unknown"))})}function Pc(n){return n.ma||(n.ma=(function(t,r,i){let o=de(t);return o.sa(),new Tb(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:Oz.bind(null,n),t_:kz.bind(null,n),r_:Fz.bind(null,n),H_:Lz.bind(null,n)}),n.da.push(e=>_(null,null,function*(){e?(n.ma.B_(),d0(n)?u0(n):n.Ra.set("Unknown")):(yield n.ma.stop(),vO(n))}))),n.ma}function Fo(n){return n.fa||(n.fa=(function(t,r,i){let o=de(t);return o.sa(),new Db(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:jz.bind(null,n),r_:Hz.bind(null,n),ta:Bz.bind(null,n),na:$z.bind(null,n)}),n.da.push(e=>_(null,null,function*(){e?(n.fa.B_(),yield tg(n)):(yield n.fa.stop(),n.Ta.length>0&&(G(Ws,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}var Nb=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function h0(n,e){if(ki("AsyncQueue",`${e}: ${n}`),Nc(n))return new z(L.UNAVAILABLE,`${e}: ${n}`);throw n}var km=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||re.comparator(t.key,r.key):(t,r)=>re.comparator(t.key,r.key),this.keyedMap=zu(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Fm=class{constructor(){this.ga=new at(re.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):oe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},Dc=class n{constructor(e,t,r,i,o,s,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,km.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Pb=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},xb=class{constructor(){this.queries=rx(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=de(t),o=i.queries;i.queries=rx(),o.forEach((s,a)=>{for(let c of a.Sa)c.onError(r)})})(this,new z(L.ABORTED,"Firestore shutting down"))}};function rx(){return new Vi(n=>Wx(n),Jm)}function f0(n,e){return _(this,null,function*(){let t=de(n),r=3,i=e.query,o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new Pb,r=e.Da()?0:1);try{switch(r){case 0:o.wa=yield t.onListen(i,!0);break;case 1:o.wa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=h0(s,`Initialization of query '${lc(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&m0(t)})}function p0(n,e){return _(this,null,function*(){let t=de(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function qz(n,e){let t=de(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.Sa)a.Fa(i)&&(r=!0);s.wa=i}}r&&m0(t)}function Gz(n,e,t){let r=de(n),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(t);r.queries.delete(e)}function m0(n){n.Ca.forEach(e=>{e.next()})}var Ob,ix;(ix=Ob||(Ob={})).Ma="default",ix.Cache="cache";var od=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Dc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Dc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ob.Cache}};var Lm=class{constructor(e){this.key=e}},Vm=class{constructor(e){this.key=e}},kb=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Me(),this.mutatedKeys=Me(),this.eu=Kx(e),this.tu=new km(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new Fm,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=Zm(this.query,p)?p:null,I=!!m&&this.mutatedKeys.has(m.key),P=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),A=!1;m&&y?m.data.isEqual(y.data)?I!==P&&(r.track({type:3,doc:y}),A=!0):this.su(m,y)||(r.track({type:2,doc:y}),A=!0,(c&&this.eu(y,c)>0||u&&this.eu(y,u)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),A=!0):m&&!y&&(r.track({type:1,doc:m}),A=!0,(c||u)&&(a=!0)),A&&(y?(s=s.add(y),o=P?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:a,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((h,p)=>(function(y,I){let P=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe(20277,{Rt:A})}};return P(y)-P(I)})(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;let a=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,u=c!==this.Za;return this.Za=c,s.length!==0||u?{snapshot:new Dc(this.query,e.tu,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Fm,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=Me(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new Vm(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new Lm(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=Me();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Dc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},g0="SyncEngine",Fb=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Lb=class{constructor(e){this.key=e,this.hu=!1}},Vb=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Vi(a=>Wx(a),Jm),this.Iu=new Map,this.Eu=new Set,this.du=new at(re.comparator),this.Au=new Map,this.Ru=new id,this.Vu={},this.mu=new Map,this.fu=rd.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};function Wz(n,e,t=!0){return _(this,null,function*(){let r=SO(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=yield IO(r,e,t,!0),i})}function Kz(n,e){return _(this,null,function*(){let t=SO(n);yield IO(t,e,!0,!1)})}function IO(n,e,t,r){return _(this,null,function*(){let i=yield Nz(n.localStore,Jr(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Qz(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&gO(n.remoteStore,i),a})}function Qz(n,e,t,r,i){return _(this,null,function*(){n.pu=(p,m,y)=>(function(P,A,F,W){return _(this,null,function*(){let J=A.view.ru(F);J.Cs&&(J=yield XP(P.localStore,A.query,!1).then(({documents:C})=>A.view.ru(C,J)));let ie=W&&W.targetChanges.get(A.targetId),Ue=W&&W.targetMismatches.get(A.targetId)!=null,we=A.view.applyChanges(J,P.isPrimaryClient,ie,Ue);return sx(P,A.targetId,we.au),we.snapshot})})(n,p,m,y);let o=yield XP(n.localStore,e,!0),s=new kb(e,o.Qs),a=s.ru(o.documents),c=td.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,c);sx(n,t,u.au);let h=new Fb(e,t,s);return n.Tu.set(e,h),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),u.snapshot})}function Yz(n,e,t){return _(this,null,function*(){let r=de(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!Jm(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield vb(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&c0(r.remoteStore,i.targetId),Ub(r,i.targetId)}).catch(Rc))):(Ub(r,i.targetId),yield vb(r.localStore,i.targetId,!0))})}function Jz(n,e){return _(this,null,function*(){let t=de(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),c0(t.remoteStore,r.targetId))})}function Zz(n,e,t){return _(this,null,function*(){let r=o6(n);try{let i=yield(function(s,a){let c=de(s),u=St.now(),h=a.reduce((y,I)=>y.add(I.key),Me()),p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let I=Ui(),P=Me();return c.Ns.getEntries(y,h).next(A=>{I=A,I.forEach((F,W)=>{W.isValidDocument()||(P=P.add(F))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,I)).next(A=>{p=A;let F=[];for(let W of a){let J=tz(W,p.get(W.key).overlayedDocument);J!=null&&F.push(new ti(W.key,J,jx(J.value.mapValue),Zr.exists(!0)))}return c.mutationQueue.addMutationBatch(y,u,F,a)}).next(A=>{m=A;let F=A.applyToLocalDocumentSet(p,P);return c.documentOverlayCache.saveOverlays(y,A.batchId,F)})}).then(()=>({batchId:m.batchId,changes:Yx(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,c){let u=s.Vu[s.currentUser.toKey()];u||(u=new at(Ae)),u=u.insert(a,c),s.Vu[s.currentUser.toKey()]=u})(r,i.batchId,t),yield hd(r,i.changes),yield tg(r.remoteStore)}catch(i){let o=h0(i,"Failed to persist write");t.reject(o)}})}function bO(n,e){return _(this,null,function*(){let t=de(n);try{let r=yield Az(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&(Ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Ve(s.hu,14607):i.removedDocuments.size>0&&(Ve(s.hu,42227),s.hu=!1))}),yield hd(t,r,e)}catch(r){yield Rc(r)}})}function ox(n,e,t){let r=de(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let c=de(s);c.onlineState=a;let u=!1;c.queries.forEach((h,p)=>{for(let m of p.Sa)m.va(a)&&(u=!0)}),u&&m0(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Xz(n,e,t){return _(this,null,function*(){let r=de(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new at(re.comparator);s=s.insert(o,Sr.newNoDocument(o,fe.min()));let a=Me().add(o),c=new Im(fe.min(),new Map,new at(Ae),s,a);yield bO(r,c),r.du=r.du.remove(o),r.Au.delete(e),y0(r)}else yield vb(r.localStore,e,!1).then(()=>Ub(r,e,t)).catch(Rc)})}function e6(n,e){return _(this,null,function*(){let t=de(n),r=e.batch.batchId;try{let i=yield Sz(t.localStore,e);TO(t,r,null),CO(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield hd(t,i)}catch(i){yield Rc(i)}})}function t6(n,e,t){return _(this,null,function*(){let r=de(n);try{let i=yield(function(s,a){let c=de(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,a).next(p=>(Ve(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(u,p))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})})(r.localStore,e);TO(r,e,t),CO(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield hd(r,i)}catch(i){yield Rc(i)}})}function CO(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function TO(n,e,t){let r=de(n),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Ub(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||DO(n,r)})}function DO(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(c0(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),y0(n))}function sx(n,e,t){for(let r of t)r instanceof Lm?(n.Ru.addReference(r.key,e),n6(n,r)):r instanceof Vm?(G(g0,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||DO(n,r.key)):oe(19791,{wu:r})}function n6(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(G(g0,"New document in limbo: "+t),n.Eu.add(r),y0(n))}function y0(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new re(tt.fromString(e)),r=n.fu.next();n.Au.set(r,new Lb(t)),n.du=n.du.insert(t,r),gO(n.remoteStore,new nd(Jr(Ym(t.path)),r,"TargetPurposeLimboResolution",Jb.ce))}}function hd(n,e,t){return _(this,null,function*(){let r=de(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,c)=>{s.push(r.pu(c,e,t).then(u=>{if((u||t)&&r.isPrimaryClient){let h=u?!u.fromCache:t?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){i.push(u);let h=pb.As(c.targetId,u);o.push(h)}}))}),yield Promise.all(s),r.Pu.H_(i),yield(function(c,u){return _(this,null,function*(){let h=de(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>j.forEach(u,m=>j.forEach(m.Es,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>j.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Nc(p))throw p;G(a0,"Failed to update sequence numbers: "+p)}for(let p of u){let m=p.targetId;if(!p.fromCache){let y=h.Ms.get(m),I=y.snapshotVersion,P=y.withLastLimboFreeSnapshotVersion(I);h.Ms=h.Ms.insert(m,P)}}})})(r.localStore,o))})}function r6(n,e){return _(this,null,function*(){let t=de(n);if(!t.currentUser.isEqual(e)){G(g0,"User change. New user:",e.toKey());let r=yield pO(t.localStore,e);t.currentUser=e,(function(o,s){o.mu.forEach(a=>{a.forEach(c=>{c.reject(new z(L.CANCELLED,s))})}),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield hd(t,r.Ls)}})}function i6(n,e){let t=de(n),r=t.Au.get(e);if(r&&r.hu)return Me().add(r.key);{let i=Me(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let a=t.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function SO(n){let e=de(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=bO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=i6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Xz.bind(null,e),e.Pu.H_=qz.bind(null,e.eventManager),e.Pu.yu=Gz.bind(null,e.eventManager),e}function o6(n){let e=de(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=e6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=t6.bind(null,e),e}var AO=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return _(this,null,function*(){this.serializer=Xm(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),yield this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)})}Fu(t,r){return null}Mu(t,r){return null}vu(t){return Dz(this.persistence,new gb,t.initialUser,this.serializer)}Cu(t){return new Am(fb.mi,this.serializer)}Du(t){return new _b}terminate(){return _(this,null,function*(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),jb=class extends AO{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ve(this.persistence.referenceDelegate instanceof Mm,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new eb(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Xn.withCacheSize(this.cacheSizeBytes):Xn.DEFAULT;return new Am(r=>Mm.mi(r,t),this.serializer)}};var s6=(()=>{class n{initialize(t,r){return _(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ox(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=r6.bind(null,this.syncEngine),yield zz(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return(function(){return new xb})()}createDatastore(t){let r=Xm(t.databaseInfo.databaseId),i=(function(s){return new Cb(s)})(t.databaseInfo);return(function(s,a,c,u){return new Ab(s,a,c,u)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,c){return new Rb(i,o,s,a,c)})(this.localStore,this.datastore,t.asyncQueue,r=>ox(this.syncEngine,r,0),(function(){return Nm.v()?new Nm:new Eb})())}createSyncEngine(t,r){return(function(o,s,a,c,u,h,p){let m=new Vb(o,s,a,c,u,h);return p&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){yield(function(r){return _(this,null,function*(){let i=de(r);G(Ws,"RemoteStore shutting down."),i.Ea.add(5),yield dd(i),i.Aa.shutdown(),i.Ra.set("Unknown")})})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()})}}return n.provider={build:()=>new n},n})();var sd=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ki("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Lo="FirestoreClient",Bb=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Lt.UNAUTHENTICATED,this.clientId=Qu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>_(this,null,function*(){G(Lo,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(G(Lo,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=h0(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function hI(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),G(Lo,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>_(null,null,function*(){r.isEqual(i)||(yield pO(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function ax(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield a6(n);G(Lo,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>nx(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>nx(e.remoteStore,i)),n._onlineComponents=e})}function a6(n){return _(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){G(Lo,"Using user provided OfflineComponentProvider");try{yield hI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===L.FAILED_PRECONDITION||i.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;mc("Error using user provided cache. Falling back to memory cache: "+t),yield hI(n,new AO)}}else G(Lo,"Using default OfflineComponentProvider"),yield hI(n,new jb(void 0));return n._offlineComponents})}function MO(n){return _(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(G(Lo,"Using user provided OnlineComponentProvider"),yield ax(n,n._uninitializedComponentsProvider._online)):(G(Lo,"Using default OnlineComponentProvider"),yield ax(n,new s6))),n._onlineComponents})}function c6(n){return MO(n).then(e=>e.syncEngine)}function Um(n){return _(this,null,function*(){let e=yield MO(n),t=e.eventManager;return t.onListen=Wz.bind(null,e.syncEngine),t.onUnlisten=Yz.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Kz.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Jz.bind(null,e.syncEngine),t})}function l6(n,e,t={}){let r=new Dr;return n.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return(function(o,s,a,c,u){let h=new sd({next:m=>{h.Nu(),s.enqueueAndForget(()=>p0(o,p));let y=m.docs.has(a);!y&&m.fromCache?u.reject(new z(L.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?u.reject(new z(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new od(Ym(a.path),h,{includeMetadataChanges:!0,qa:!0});return f0(o,p)})(yield Um(n),n.asyncQueue,e,t,r)})),r.promise}function u6(n,e,t={}){let r=new Dr;return n.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return(function(o,s,a,c,u){let h=new sd({next:m=>{h.Nu(),s.enqueueAndForget(()=>p0(o,p)),m.fromCache&&c.source==="server"?u.reject(new z(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new od(a,h,{includeMetadataChanges:!0,qa:!0});return f0(o,p)})(yield Um(n),n.asyncQueue,e,t,r)})),r.promise}function RO(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var cx=new Map;var NO="firestore.googleapis.com",lx=!0,jm=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new z(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=NO,this.ssl=lx}else this.host=e.host,this.ssl=e.ssl??lx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=fO;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bz)throw new z(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_H("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RO(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new z(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new z(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new z(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Sc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new fI;switch(r.type){case"firstParty":return new yI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=cx.get(t);r&&(G("ComponentProvider","Removing Datastore"),cx.delete(t),r.terminate())})(this),Promise.resolve()}};function d6(n,e,t,r={}){n=Cn(n,Sc);let i=Do(e),o=n._getSettings(),s=Q(k({},o),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;i&&(Xp(`https://${a}`),em("Firestore",!0)),o.host!==NO&&o.host!==a&&mc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let c=Q(k({},o),{host:a,ssl:i,emulatorOptions:r});if(!Kr(c,s)&&(n._setSettings(c),r.mockUserToken)){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=Lt.MOCK_USER;else{u=ZN(r.mockUserToken,n._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new z(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Lt(p)}n._authCredentials=new pI(new pm(u,h))}}var Ks=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Rt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new No(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(ud(t,n._jsonSchema))return new n(e,r||null,new re(tt.fromString(t.referencePath)))}};Rt._jsonSchemaVersion="firestore/documentReference/1.0",Rt._jsonSchema={type:Dt("string",Rt._jsonSchemaVersion),referencePath:Dt("string")};var No=class n extends Ks{constructor(e,t,r){super(e,t,Ym(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Rt(this.firestore,null,new re(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function pn(n,e,...t){if(n=yt(n),gx("collection","path",e),n instanceof Sc){let r=tt.fromString(e,...t);return AP(r),new No(n,null,r)}{if(!(n instanceof Rt||n instanceof No))throw new z(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(tt.fromString(e,...t));return AP(r),new No(n.firestore,null,r)}}function Un(n,e,...t){if(n=yt(n),arguments.length===1&&(e=Qu.newId()),gx("doc","path",e),n instanceof Sc){let r=tt.fromString(e,...t);return SP(r),new Rt(n,null,new re(r))}{if(!(n instanceof Rt||n instanceof No))throw new z(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(tt.fromString(e,...t));return SP(r),new Rt(n.firestore,n instanceof No?n.converter:null,new re(r))}}var ux="AsyncQueue",Bm=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Pm(this,"async_queue_retry"),this._c=()=>{let r=dI();r&&G(ux,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=dI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=dI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new Dr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}lc(){return _(this,null,function*(){if(this.Xu.length!==0){try{yield this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Nc(e))throw e;G(ux,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}})}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,ki("INTERNAL UNHANDLED ERROR: ",dx(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=Nb.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&oe(47125,{Pc:dx(this.nc)})}verifyOperationInProgress(){}Tc(){return _(this,null,function*(){let e;do e=this.ac,yield e;while(e!==this.ac)})}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function dx(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function hx(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var Mr=class extends Sc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Bm,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Bm(e),this._firestoreClient=void 0,yield e}})}};function xc(n,e){let t=typeof n=="object"?n:im(),r=typeof n=="string"?n:e||_m,i=$u(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=JN("firestore");o&&d6(i,...o)}return i}function ng(n){if(n._terminated)throw new z(L.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||h6(n),n._firestoreClient}function h6(n){let e=n._freezeSettings(),t=(function(i,o,s,a){return new II(i,o,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,RO(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Bb(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(n._componentsProvider))}var Po=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(on.fromBase64String(e))}catch(t){throw new z(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(on.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ud(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Po._jsonSchemaVersion="firestore/bytes/1.0",Po._jsonSchema={type:Dt("string",Po._jsonSchemaVersion),bytes:Dt("string")};var Ac=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new z(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ad=class{constructor(e){this._methodName=e}};var xo=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new z(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new z(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(ud(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};xo._jsonSchemaVersion="firestore/geoPoint/1.0",xo._jsonSchema={type:Dt("string",xo._jsonSchemaVersion),latitude:Dt("number"),longitude:Dt("number")};var Oo=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ud(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new z(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Oo._jsonSchemaVersion="firestore/vectorValue/1.0",Oo._jsonSchema={type:Dt("string",Oo._jsonSchemaVersion),vectorValues:Dt("object")};var f6=/^__.*__$/,$b=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ti(e,this.data,this.fieldMask,t,this.fieldTransforms):new Gs(e,this.data,t,this.fieldTransforms)}},$m=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ti(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function PO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe(40011,{Ac:n})}}var Hb=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new n(k(k({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return zm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(PO(this.Ac)&&f6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},zb=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Xm(e)}Cc(e,t,r,i=!1){return new Hb({Ac:e,methodName:t,Dc:r,path:Vn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function rg(n){let e=n._freezeSettings(),t=Xm(n._databaseId);return new zb(n._databaseId,!!e.ignoreUndefinedProperties,t)}function xO(n,e,t,r,i,o={}){let s=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);v0("Data must be an object, but it was:",s,r);let a=OO(r,s),c,u;if(o.merge)c=new er(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=qb(e,p,t);if(!s.contains(m))throw new z(L.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);FO(h,m)||h.push(m)}c=new er(h),u=s.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,u=s.fieldTransforms;return new $b(new Ln(a),c,u)}var Hm=class n extends ad{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function p6(n,e,t,r){let i=n.Cc(1,e,t);v0("Data must be an object, but it was:",i,r);let o=[],s=Ln.empty();Vo(r,(c,u)=>{let h=_0(e,c,t);u=yt(u);let p=i.yc(h);if(u instanceof Hm)o.push(h);else{let m=fd(u,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new er(o);return new $m(s,a,i.fieldTransforms)}function m6(n,e,t,r,i,o){let s=n.Cc(1,e,t),a=[qb(e,r,t)],c=[i];if(o.length%2!=0)throw new z(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(qb(e,o[m])),c.push(o[m+1]);let u=[],h=Ln.empty();for(let m=a.length-1;m>=0;--m)if(!FO(u,a[m])){let y=a[m],I=c[m];I=yt(I);let P=s.yc(y);if(I instanceof Hm)u.push(y);else{let A=fd(I,P);A!=null&&(u.push(y),h.set(y,A))}}let p=new er(u);return new $m(h,p,s.fieldTransforms)}function g6(n,e,t,r=!1){return fd(t,n.Cc(r?4:3,e))}function fd(n,e){if(kO(n=yt(n)))return v0("Unsupported field value:",e,n),OO(n,e);if(n instanceof ad)return(function(r,i){if(!PO(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let c=fd(a,i.wc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=yt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YH(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=St.fromDate(r);return{timestampValue:Dm(i.serializer,o)}}if(r instanceof St){let o=new St(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Dm(i.serializer,o)}}if(r instanceof xo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Po)return{bytesValue:sO(i.serializer,r._byteString)};if(r instanceof Rt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:s0(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Oo)return(function(s,a){return{mapValue:{fields:{[e0]:{stringValue:t0},[yc]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return o0(a.serializer,u)})}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Wm(r)}`)})(n,e)}function OO(n,e){let t={};return Px(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vo(n,(r,i)=>{let o=fd(i,e.mc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function kO(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof St||n instanceof xo||n instanceof Po||n instanceof Rt||n instanceof ad||n instanceof Oo)}function v0(n,e,t){if(!kO(t)||!yx(t)){let r=Wm(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function qb(n,e,t){if((e=yt(e))instanceof Ac)return e._internalPath;if(typeof e=="string")return _0(n,e);throw zm("Field path arguments must be of type string or ",n,!1,void 0,t)}var y6=new RegExp("[~\\*/\\[\\]]");function _0(n,e,t){if(e.search(y6)>=0)throw zm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ac(...e.split("."))._internalPath}catch{throw zm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function zm(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new z(L.INVALID_ARGUMENT,a+n+c)}function FO(n,e){return n.some(t=>t.isEqual(e))}var qm=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Gb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(E0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Gb=class extends qm{data(){return super.data()}};function E0(n,e){return typeof e=="string"?_0(n,e):e instanceof Ac?e._internalPath:e._delegate._internalPath}function LO(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new z(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var cd=class{},Wb=class extends cd{};function ji(n,e,...t){let r=[];e instanceof cd&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(c=>c instanceof Kb).length,a=o.filter(c=>c instanceof Gm).length;if(s>1||s>0&&a>0)throw new z(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var Gm=class n extends Wb{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return VO(e._query,t),new Ks(e.firestore,e.converter,kI(e._query,t))}_parse(e){let t=rg(e.firestore);return(function(o,s,a,c,u,h,p){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new z(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){px(p,h);let I=[];for(let P of p)I.push(fx(c,o,P));m={arrayValue:{values:I}}}else m=fx(c,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||px(p,h),m=g6(a,s,p,h==="in"||h==="not-in");return Tt.create(u,h,m)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function Tn(n,e,t){let r=e,i=E0("where",n);return Gm._create(i,r,t)}var Kb=class n extends cd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ar.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)VO(s,c),s=kI(s,c)})(e._query,t),new Ks(e.firestore,e.converter,kI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function fx(n,e,t){if(typeof(t=yt(t))=="string"){if(t==="")throw new z(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gx(e)&&t.indexOf("/")!==-1)throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(tt.fromString(t));if(!re.isDocumentKey(r))throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kP(n,new re(r))}if(t instanceof Rt)return kP(n,t._key);throw new z(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wm(t)}.`)}function px(n,e){if(!Array.isArray(n)||n.length===0)throw new z(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function VO(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new z(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Qb=class{convertValue(e,t="none"){switch(ko(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Li(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw oe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Vo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[yc].arrayValue?.values?.map(r=>et(r.doubleValue));return new Oo(t)}convertGeoPoint(e){return new xo(et(e.latitude),et(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Qm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Zu(e));default:return null}}convertTimestamp(e){let t=Fi(e);return new St(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=tt.fromString(e);Ve(hO(r),9688,{name:e});let i=new Em(r.get(1),r.get(3)),o=new re(r.popFirst(5));return i.isEqual(t)||ki(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function UO(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Vs=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Us=class n extends qm{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new pc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(E0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new z(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Us._jsonSchemaVersion="firestore/documentSnapshot/1.0",Us._jsonSchema={type:Dt("string",Us._jsonSchemaVersion),bundleSource:Dt("string","DocumentSnapshot"),bundleName:Dt("string"),bundle:Dt("string")};var pc=class extends Us{data(e={}){return super.data(e)}},js=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Vs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new pc(this._firestore,this._userDataWriter,r.key,r,new Vs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new z(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new pc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Vs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new pc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Vs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,h=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:v6(a.type),doc:c,oldIndex:u,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new z(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Qu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function v6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe(61501,{type:n})}}function w0(n){n=Cn(n,Rt);let e=Cn(n.firestore,Mr);return l6(ng(e),n._key).then(t=>BO(e,n,t))}js._jsonSchemaVersion="firestore/querySnapshot/1.0",js._jsonSchema={type:Dt("string",js._jsonSchemaVersion),bundleSource:Dt("string","QuerySnapshot"),bundleName:Dt("string"),bundle:Dt("string")};var ld=class extends Qb{constructor(e){super(),this.firestore=e}convertBytes(e){return new Po(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,t)}};function Oc(n){n=Cn(n,Ks);let e=Cn(n.firestore,Mr),t=ng(e),r=new ld(e);return LO(n._query),u6(t,n._query).then(i=>new js(e,r,n,i))}function jO(n,e,t){n=Cn(n,Rt);let r=Cn(n.firestore,Mr),i=UO(n.converter,e,t);return og(r,[xO(rg(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Zr.none())])}function kc(n,e,t,...r){n=Cn(n,Rt);let i=Cn(n.firestore,Mr),o=rg(i),s;return s=typeof(e=yt(e))=="string"||e instanceof Ac?m6(o,"updateDoc",n._key,e,t,r):p6(o,"updateDoc",n._key,e),og(i,[s.toMutation(n._key,Zr.exists(!0))])}function ig(n){return og(Cn(n.firestore,Mr),[new ed(n._key,Zr.none())])}function pd(n,e){let t=Cn(n.firestore,Mr),r=Un(n),i=UO(n.converter,e);return og(t,[xO(rg(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Zr.exists(!1))]).then(()=>r)}function ni(n,...e){n=yt(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||hx(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(hx(e[r])){let c=e[r];e[r]=c.next?.bind(c),e[r+1]=c.error?.bind(c),e[r+2]=c.complete?.bind(c)}let o,s,a;if(n instanceof Rt)s=Cn(n.firestore,Mr),a=Ym(n._key.path),o={next:c=>{e[r]&&e[r](BO(s,n,c))},error:e[r+1],complete:e[r+2]};else{let c=Cn(n,Ks);s=Cn(c.firestore,Mr),a=c._query;let u=new ld(s);o={next:h=>{e[r]&&e[r](new js(s,u,c,h))},error:e[r+1],complete:e[r+2]},LO(n._query)}return(function(u,h,p,m){let y=new sd(m),I=new od(h,y,p);return u.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return f0(yield Um(u),I)})),()=>{y.Nu(),u.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return p0(yield Um(u),I)}))}})(ng(s),a,i,o)}function og(n,e){return(function(r,i){let o=new Dr;return r.asyncQueue.enqueueAndForget(()=>_(null,null,function*(){return Zz(yield c6(r),i,o)})),o.promise})(ng(n),e)}function BO(n,e,t){let r=t.docs.get(e._key),i=new ld(n);return new Us(n,i,e._key,r,new Vs(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Mc=i})(Ro),Mo(new Zn("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Mr(new mI(r.getProvider("auth-internal")),new vI(s,r.getProvider("app-check-internal")),(function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new z(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Em(u.options.projectId,h)})(s,i),s);return o=k({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Tr(CP,TP,e),Tr(CP,TP,"esm2020")})();var sn=class n{eventsSubject=new Ye([]);events$=this.eventsSubject.asObservable();firestore=xc();constructor(){this.loadEvents()}loadEvents(){let e=pn(this.firestore,"events");ni(e,t=>{let r=[];t.forEach(i=>{r.push(Q(k({},i.data()),{id:i.id}))}),console.log("[EventService] onSnapshot loaded events:",r.length),this.eventsSubject.next(r)},t=>{console.error("[EventService] onSnapshot error:",t),Oc(e).then(r=>{let i=[];r.forEach(o=>{i.push(Q(k({},o.data()),{id:o.id}))}),console.log("[EventService] getDocs fallback loaded events:",i.length),this.eventsSubject.next(i)}).catch(r=>{console.error("[EventService] getDocs fallback error:",r)})})}getEvents(){return this.events$}getEventById(e){return new le(t=>{let r=Un(this.firestore,"events",e);ni(r,i=>{i.exists()?t.next(Q(k({},i.data()),{id:i.id})):t.next(void 0)},i=>{console.error("[EventService] getEventById onSnapshot error:",i),t.error(i)})})}addEvent(e){return _(this,null,function*(){try{let t=pn(this.firestore,"events");yield pd(t,Q(k({},e),{createdAt:new Date}))}catch(t){console.error("Error adding event:",t)}})}updateEvent(e,t){return _(this,null,function*(){try{let r=Un(this.firestore,"events",e);yield kc(r,t)}catch(r){console.error("Error updating event:",r)}})}deleteEvent(e){return _(this,null,function*(){try{let t=Un(this.firestore,"events",e);yield ig(t)}catch(t){console.error("Error deleting event:",t)}})}getEventsByUserId(e){return new le(t=>{let r=ji(pn(this.firestore,"events"),Tn("createdBy","==",e));ni(r,i=>{let o=[];i.forEach(s=>{o.push(Q(k({},s.data()),{id:s.id}))}),t.next(o)},i=>{console.error("[EventService] getEventsByUserId onSnapshot error:",i),t.error(i)})})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};function r1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var i1=r1,o1=new Ni("auth","Firebase",r1());var dg=new So("@firebase/auth");function _6(n,...e){dg.logLevel<=De.WARN&&dg.warn(`Auth (${Ro}): ${n}`,...e)}function ag(n,...e){dg.logLevel<=De.ERROR&&dg.error(`Auth (${Ro}): ${n}`,...e)}function ii(n,...e){throw G0(n,...e)}function Js(n,...e){return G0(n,...e)}function s1(n,e,t){let r=Q(k({},i1()),{[e]:t});return new Ni("auth","Firebase",r).create(e,{appName:n.name})}function Hi(n){return s1(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function G0(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return o1.create(n,...e)}function se(n,e,...t){if(!n)throw G0(e,...t)}function Bi(n){let e="INTERNAL ASSERTION FAILED: "+n;throw ag(e),new Error(e)}function Bo(n,e){n||Bi(e)}function T0(){return typeof self<"u"&&self.location?.href||""}function E6(){return $O()==="http:"||$O()==="https:"}function $O(){return typeof self<"u"&&self.location?.protocol||null}function w6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(E6()||tP()||"connection"in navigator)?navigator.onLine:!0}function I6(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Zs=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Bo(t>e,"Short delay should be less than long delay!"),this.isMobile=XN()||nP()}get(){return w6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function W0(n,e){Bo(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var hg=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var b6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var C6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],T6=new Zs(3e4,6e4);function $o(n,e){return n.tenantId&&!e.tenantId?Q(k({},e),{tenantId:n.tenantId}):e}function Ho(o,s,a,c){return _(this,arguments,function*(n,e,t,r,i={}){return a1(n,i,()=>_(null,null,function*(){let u={},h={};r&&(e==="GET"?h=r:u={body:JSON.stringify(r)});let p=ju(k({key:n.config.apiKey},h)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let y=k({method:e,headers:m},u);return eP()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&Do(n.emulatorConfig.host)&&(y.credentials="include"),hg.fetch()(yield c1(n,n.config.apiHost,t,p),y)}))})}function a1(n,e,t){return _(this,null,function*(){n._canInitEmulator=!1;let r=k(k({},b6),e);try{let i=new D0(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw sg(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw sg(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw sg(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw sg(n,"user-disabled",s);let h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw s1(n,h,u);ii(n,h)}}catch(i){if(i instanceof Fn)throw i;ii(n,"network-request-failed",{message:String(i)})}})}function bd(o,s,a,c){return _(this,arguments,function*(n,e,t,r,i={}){let u=yield Ho(n,e,t,r,i);return"mfaPendingCredential"in u&&ii(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function c1(n,e,t,r){return _(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?W0(n.config,i):`${n.config.apiScheme}://${i}`;return C6.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function D6(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var D0=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Js(this.auth,"network-request-failed")),T6.get())})}};function sg(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Js(n,e,r);return i.customData._tokenResponse=t,i}function HO(n){return n!==void 0&&n.enterprise!==void 0}var S0=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return D6(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function S6(n,e){return _(this,null,function*(){return Ho(n,"GET","/v2/recaptchaConfig",$o(n,e))})}function A6(n,e){return _(this,null,function*(){return Ho(n,"POST","/v1/accounts:delete",e)})}function fg(n,e){return _(this,null,function*(){return Ho(n,"POST","/v1/accounts:lookup",e)})}function gd(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function l1(n,e=!1){return _(this,null,function*(){let t=yt(n),r=yield t.getIdToken(e),i=K0(r);se(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:gd(I0(i.auth_time)),issuedAtTime:gd(I0(i.iat)),expirationTime:gd(I0(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function I0(n){return Number(n)*1e3}function K0(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return ag("JWT malformed, contained fewer than 3 sections"),null;try{let i=Jp(t);return i?JSON.parse(i):(ag("Failed to decode base64 JWT payload"),null)}catch(i){return ag("Caught error parsing JWT payload as JSON",i?.toString()),null}}function zO(n){let e=K0(n);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function vd(n,e,t=!1){return _(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Fn&&M6(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function M6({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var A0=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),t)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var _d=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=gd(this.lastLoginAt),this.creationTime=gd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function pg(n){return _(this,null,function*(){let e=n.auth,t=yield n.getIdToken(),r=yield vd(n,fg(e,{idToken:t}));se(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let o=i.providerUserInfo?.length?d1(i.providerUserInfo):[],s=R6(n.providerData,o),a=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!s?.length,u=a?c:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new _d(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(n,h)})}function u1(n){return _(this,null,function*(){let e=yt(n);yield pg(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function R6(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function d1(n){return n.map(r=>{var i=r,{providerId:e}=i,t=sa(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}function N6(n,e){return _(this,null,function*(){let t=yield a1(n,{},()=>_(null,null,function*(){let r=ju({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield c1(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let c={method:"POST",headers:a,body:r};return n.emulatorConfig&&Do(n.emulatorConfig.host)&&(c.credentials="include"),hg.fetch()(s,c)}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function P6(n,e){return _(this,null,function*(){return Ho(n,"POST","/v2/accounts:revokeToken",$o(n,e))})}var yd=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zO(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){se(e.length!==0,"internal-error");let t=zO(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return _(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield N6(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(se(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(se(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(se(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Bi("not implemented")}};function Uo(n,e){se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var jo=class n{constructor(o){var s=o,{uid:e,auth:t,stsTokenManager:r}=s,i=sa(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new A0(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new _d(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let t=yield vd(this,this.stsTokenManager.getToken(this.auth,e));return se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return l1(this,e)}reload(){return u1(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>k({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Q(k({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield pg(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(bn(this.auth.app))return Promise.reject(Hi(this.auth));let e=yield this.getIdToken();return yield vd(this,A6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Q(k({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>k({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,s=t.photoURL??void 0,a=t.tenantId??void 0,c=t._redirectEventId??void 0,u=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:y,providerData:I,stsTokenManager:P}=t;se(p&&P,e,"internal-error");let A=yd.fromJSON(this.name,P);se(typeof p=="string",e,"internal-error"),Uo(r,e.name),Uo(i,e.name),se(typeof m=="boolean",e,"internal-error"),se(typeof y=="boolean",e,"internal-error"),Uo(o,e.name),Uo(s,e.name),Uo(a,e.name),Uo(c,e.name),Uo(u,e.name),Uo(h,e.name);let F=new n({uid:p,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:y,photoURL:s,phoneNumber:o,tenantId:a,stsTokenManager:A,createdAt:u,lastLoginAt:h});return I&&Array.isArray(I)&&(F.providerData=I.map(W=>k({},W))),c&&(F._redirectEventId=c),F}static _fromIdTokenResponse(e,t,r=!1){return _(this,null,function*(){let i=new yd;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield pg(o),o})}static _fromGetAccountInfoResponse(e,t,r){return _(this,null,function*(){let i=t.users[0];se(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?d1(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new yd;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new _d(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c})}};var qO=new Map;function $i(n){Bo(n instanceof Function,"Expected a class definition");let e=qO.get(n);return e?(Bo(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,qO.set(n,e),e)}var x6=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(t,r){return _(this,null,function*(){this.storage[t]=r})}_get(t){return _(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return _(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),M0=x6;function cg(n,e,t){return`firebase:${n}:${e}:${t}`}var mg=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=cg(this.userKey,i.apiKey,o),this.fullPersistenceKey=cg("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield fg(this.auth,{idToken:e}).catch(()=>{});return t?jo._fromGetAccountInfoResponse(this.auth,t,e):null}return jo._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return _(this,null,function*(){if(!t.length)return new n($i(M0),e,r);let i=(yield Promise.all(t.map(u=>_(null,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),o=i[0]||$i(M0),s=cg(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let h=yield u._get(s);if(h){let p;if(typeof h=="string"){let m=yield fg(e,{idToken:h}).catch(()=>{});if(!m)break;p=yield jo._fromGetAccountInfoResponse(e,m,h)}else p=jo._fromJSON(e,h);u!==o&&(a=p),o=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(u=>_(null,null,function*(){if(u!==o)try{yield u._remove(s)}catch{}}))),new n(o,e,r))})}};function GO(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(m1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(h1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(y1(e))return"Blackberry";if(v1(e))return"Webos";if(f1(e))return"Safari";if((e.includes("chrome/")||p1(e))&&!e.includes("edge/"))return"Chrome";if(g1(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function h1(n=Ft()){return/firefox\//i.test(n)}function f1(n=Ft()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function p1(n=Ft()){return/crios\//i.test(n)}function m1(n=Ft()){return/iemobile/i.test(n)}function g1(n=Ft()){return/android/i.test(n)}function y1(n=Ft()){return/blackberry/i.test(n)}function v1(n=Ft()){return/webos/i.test(n)}function Q0(n=Ft()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function O6(n=Ft()){return Q0(n)&&!!window.navigator?.standalone}function k6(){return rP()&&document.documentMode===10}function _1(n=Ft()){return Q0(n)||g1(n)||v1(n)||y1(n)||/windows phone/i.test(n)||m1(n)}function E1(n,e=[]){let t;switch(n){case"Browser":t=GO(Ft());break;case"Worker":t=`${GO(Ft())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ro}/${r}`}var R0=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function F6(t){return _(this,arguments,function*(n,e={}){return Ho(n,"GET","/v2/passwordPolicy",$o(n,e))})}var L6=6,N0=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??L6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var P0=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gg(this),this.idTokenSubscription=new gg(this),this.beforeStateQueue=new R0(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=o1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=$i(t)),this._initializationPromise=this.queue(()=>_(this,null,function*(){if(!this._deleted&&(this.persistenceManager=yield mg.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let t=yield fg(this,{idToken:e}),r=yield jo._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){if(bn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let t=yield this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,a=yield this.tryRedirectSignIn(e);(!o||o===s)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return _(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield pg(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=I6()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(bn(this.app))return Promise.reject(Hi(this));let t=e?yt(e):null;return t&&se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return _(this,null,function*(){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return bn(this.app)?Promise.reject(Hi(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return bn(this.app)?Promise.reject(Hi(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence($i(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield F6(this),t=new N0(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ni("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield P6(this,r)}})}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}_setRedirectUser(e,t){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&$i(e)||this._popupRedirectResolver;se(t,this,"argument-error"),this.redirectPersistenceManager=yield mg.create(this,[$i(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=E1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=yield this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return _(this,null,function*(){if(bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=yield this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&_6(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function ea(n){return yt(n)}var gg=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=aP(t=>this.observer=t)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var bg={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function V6(n){bg=n}function w1(n){return bg.loadJS(n)}function U6(){return bg.recaptchaEnterpriseScript}function j6(){return bg.gapiScript}function I1(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var x0=class{constructor(){this.enterprise=new O0}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},O0=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var B6="recaptcha-enterprise",b1="NO_RECAPTCHA",k0=class{constructor(e){this.type=B6,this.auth=ea(e)}verify(e="verify",t=!1){return _(this,null,function*(){function r(o){return _(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>_(null,null,function*(){S6(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let u=new S0(c);return o.tenantId==null?o._agentRecaptchaConfig=u:o._tenantRecaptchaConfigs[o.tenantId]=u,s(u.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;HO(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(u=>{s(u)}).catch(()=>{s(b1)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new x0().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&HO(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=U6();c.length!==0&&(c+=a),w1(c).then(()=>{i(a,o,s)}).catch(u=>{s(u)})}}).catch(a=>{s(a)})})})}};function md(n,e,t,r=!1,i=!1){return _(this,null,function*(){let o=new k0(n),s;if(i)s=b1;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=k({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function F0(n,e,t,r,i){return _(this,null,function*(){if(i==="EMAIL_PASSWORD_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield md(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(o=>_(null,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let s=yield md(n,e,t,t==="getOobCode");return r(n,s)}else return Promise.reject(o)}));else if(i==="PHONE_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){let o=yield md(n,e,t);return r(n,o).catch(s=>_(null,null,function*(){if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(s.code==="auth/missing-recaptcha-token"||s.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let a=yield md(n,e,t,!1,!0);return r(n,a)}return Promise.reject(s)}))}else{let o=yield md(n,e,t,!1,!0);return r(n,o)}else return Promise.reject(i+" provider is not supported.")})}function C1(n,e){let t=$u(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Kr(o,e??{}))return i;ii(i,"already-initialized")}return t.initialize({options:e})}function $6(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map($i);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function T1(n,e,t){let r=ea(n);se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=D1(e),{host:s,port:a}=H6(e),c=a===null?"":`:${a}`,u={url:`${o}//${s}${c}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){se(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),se(Kr(u,r.config.emulator)&&Kr(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Do(s)?(Xp(`${o}//${s}${c}`),em("Auth",!0)):i||z6()}function D1(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function H6(n){let e=D1(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:WO(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:WO(s)}}}function WO(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function z6(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Ed=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Bi("not implemented")}_getIdTokenResponse(e){return Bi("not implemented")}_linkToIdToken(e,t){return Bi("not implemented")}_getReauthenticationResolver(e){return Bi("not implemented")}};function q6(n,e){return _(this,null,function*(){return Ho(n,"POST","/v1/accounts:signUp",e)})}function G6(n,e){return _(this,null,function*(){return bd(n,"POST","/v1/accounts:signInWithPassword",$o(n,e))})}function W6(n,e){return _(this,null,function*(){return bd(n,"POST","/v1/accounts:signInWithEmailLink",$o(n,e))})}function K6(n,e){return _(this,null,function*(){return bd(n,"POST","/v1/accounts:signInWithEmailLink",$o(n,e))})}var wd=class n extends Ed{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return F0(e,t,"signInWithPassword",G6,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return W6(e,{email:this._email,oobCode:this._password});default:ii(e,"internal-error")}})}_linkToIdToken(e,t){return _(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return F0(e,r,"signUpPassword",q6,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return K6(e,{idToken:t,email:this._email,oobCode:this._password});default:ii(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function b0(n,e){return _(this,null,function*(){return bd(n,"POST","/v1/accounts:signInWithIdp",$o(n,e))})}function Q6(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Y6(n){let e=oc(sc(n)).link,t=e?oc(sc(e)).deep_link_id:null,r=oc(sc(n)).deep_link_id;return(r?oc(sc(r)).link:null)||r||t||e||n}var yg=class n{constructor(e){let t=oc(sc(e)),r=t.apiKey??null,i=t.oobCode??null,o=Q6(t.mode??null);se(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){let t=Y6(e);try{return new n(t)}catch{return null}}};var S1=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return wd._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=yg.parseLink(r);return se(i,"argument-error"),wd._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),vg=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var L0=class extends vg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function J6(n,e){return _(this,null,function*(){return bd(n,"POST","/v1/accounts:signUp",$o(n,e))})}var Fc=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return _(this,null,function*(){let o=yield jo._fromIdTokenResponse(e,r,i),s=KO(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=KO(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function KO(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var V0=class n extends Fn{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function A1(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?V0._fromErrorAndOperation(n,o,e,r):o})}function Z6(n,e,t=!1){return _(this,null,function*(){let r=yield vd(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Fc._forOperation(n,"link",r)})}function X6(n,e,t=!1){return _(this,null,function*(){let{auth:r}=n;if(bn(r.app))return Promise.reject(Hi(r));let i="reauthenticate";try{let o=yield vd(n,A1(r,i,e,n),t);se(o.idToken,r,"internal-error");let s=K0(o.idToken);se(s,r,"internal-error");let{sub:a}=s;return se(n.uid===a,r,"user-mismatch"),Fc._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&ii(r,"user-mismatch"),o}})}function M1(n,e,t=!1){return _(this,null,function*(){if(bn(n.app))return Promise.reject(Hi(n));let r="signIn",i=yield A1(n,r,e),o=yield Fc._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function R1(n,e){return _(this,null,function*(){return M1(ea(n),e)})}function N1(n){return _(this,null,function*(){let e=ea(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Y0(n,e,t){return _(this,null,function*(){if(bn(n.app))return Promise.reject(Hi(n));let r=ea(n),s=yield F0(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",J6,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&N1(n),c}),a=yield Fc._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function J0(n,e,t){return bn(n.app)?Promise.reject(Hi(n)):R1(yt(n),S1.credential(e,t)).catch(r=>_(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&N1(n),r}))}function P1(n,e,t,r){return yt(n).onIdTokenChanged(e,t,r)}function x1(n,e,t){return yt(n).beforeAuthStateChanged(e,t)}function Z0(n,e,t,r){return yt(n).onAuthStateChanged(e,t,r)}function X0(n){return yt(n).signOut()}var _g="__sak";var Eg=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_g,"1"),this.storage.removeItem(_g),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var eq=1e3,tq=10,nq=(()=>{class n extends Eg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_1(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);k6()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,tq):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},eq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return _(this,null,function*(){yield Zi(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return _(this,null,function*(){let r=yield Zi(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return _(this,null,function*(){yield Zi(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),O1=nq;var rq=(()=>{class n extends Eg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),eC=rq;function iq(n){return Promise.all(n.map(e=>_(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var oq=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return _(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(h=>_(this,null,function*(){return h(r.origin,s)})),u=yield iq(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:u})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function k1(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var U0=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let u=k1("",20);i.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(h),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function ri(){return window}function sq(n){ri().location.href=n}function F1(){return typeof ri().WorkerGlobalScope<"u"&&typeof ri().importScripts=="function"}function aq(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function cq(){return navigator?.serviceWorker?.controller||null}function lq(){return F1()?self:null}var L1="firebaseLocalStorageDb",uq=1,wg="firebaseLocalStorage",V1="fbase_key",Xs=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Cg(n,e){return n.transaction([wg],e?"readwrite":"readonly").objectStore(wg)}function dq(){let n=indexedDB.deleteDatabase(L1);return new Xs(n).toPromise()}function j0(){let n=indexedDB.open(L1,uq);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(wg,{keyPath:V1})}catch(i){t(i)}}),n.addEventListener("success",()=>_(null,null,function*(){let r=n.result;r.objectStoreNames.contains(wg)?e(r):(r.close(),yield dq(),e(yield j0()))}))})}function QO(n,e,t){return _(this,null,function*(){let r=Cg(n,!0).put({[V1]:e,value:t});return new Xs(r).toPromise()})}function hq(n,e){return _(this,null,function*(){let t=Cg(n,!1).get(e),r=yield new Xs(t).toPromise();return r===void 0?null:r.value})}function YO(n,e){let t=Cg(n,!0).delete(e);return new Xs(t).toPromise()}var fq=800,pq=3,mq=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield j0(),this.db)})}_withRetries(t){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>pq)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return F1()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=oq._getInstance(lq()),this.receiver._subscribe("keyChanged",(t,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){if(this.activeServiceWorker=yield aq(),!this.activeServiceWorker)return;this.sender=new U0(this.activeServiceWorker);let t=yield this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||cq()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let t=yield j0();return yield QO(t,_g,"1"),yield YO(t,_g),!0}catch{}return!1})}_withPendingWrite(t){return _(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>QO(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return _(this,null,function*(){let r=yield this._withRetries(i=>hq(i,t));return this.localCache[t]=r,r})}_remove(t){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>YO(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return _(this,null,function*(){let t=yield this._withRetries(o=>{let s=Cg(o,!1).getAll();return new Xs(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),fq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),U1=mq;var hce=I1("rcb"),fce=new Zs(3e4,6e4);function gq(n,e){return e?$i(e):(se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Id=class extends Ed{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return b0(e,this._buildIdpRequest())}_linkToIdToken(e,t){return b0(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return b0(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function yq(n){return M1(n.auth,new Id(n),n.bypassAuthState)}function vq(n){let{auth:e,user:t}=n;return se(t,e,"internal-error"),X6(t,new Id(n),n.bypassAuthState)}function _q(n){return _(this,null,function*(){let{auth:e,user:t}=n;return se(t,e,"internal-error"),Z6(t,new Id(n),n.bypassAuthState)})}var B0=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yq;case"linkViaPopup":case"linkViaRedirect":return _q;case"reauthViaPopup":case"reauthViaRedirect":return vq;default:ii(this.auth,"internal-error")}}resolve(e){Bo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Bo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var pce=new Zs(2e3,1e4);var Eq="pendingRedirect",lg=new Map,$0=class n extends B0{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=lg.get(this.auth._key());if(!e){try{let r=(yield wq(this.resolver,this.auth))?yield Zi(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}lg.set(this.auth._key(),e)}return this.bypassAuthState||lg.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return Zi(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Zi(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function wq(n,e){return _(this,null,function*(){let t=Cq(e),r=bq(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function Iq(n,e){lg.set(n._key(),e)}function bq(n){return $i(n._redirectPersistence)}function Cq(n){return cg(Eq,n.config.apiKey,n.name)}function Tq(n,e,t=!1){return _(this,null,function*(){if(bn(n.app))return Promise.reject(Hi(n));let r=ea(n),i=gq(r,e),s=yield new $0(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var Dq=600*1e3,H0=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Sq(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!j1(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Js(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Dq&&this.cachedEventUids.clear(),this.cachedEventUids.has(JO(e))}saveEventToCache(e){this.cachedEventUids.add(JO(e)),this.lastProcessedEventTime=Date.now()}};function JO(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function j1({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Sq(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return j1(n);default:return!1}}function Aq(t){return _(this,arguments,function*(n,e={}){return Ho(n,"GET","/v1/projects",e)})}var Mq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Rq=/^https?/;function Nq(n){return _(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield Aq(n);for(let t of e)try{if(Pq(t))return}catch{}ii(n,"unauthorized-domain")})}function Pq(n){let e=T0(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!Rq.test(t))return!1;if(Mq.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var xq=new Zs(3e4,6e4);function ZO(){let n=ri().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Oq(n){return new Promise((e,t)=>{function r(){ZO(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ZO(),t(Js(n,"network-request-failed"))},timeout:xq.get()})}if(ri().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ri().gapi?.load)r();else{let i=I1("iframefcb");return ri()[i]=()=>{gapi.load?r():t(Js(n,"network-request-failed"))},w1(`${j6()}?onload=${i}`).catch(o=>t(o))}}).catch(e=>{throw ug=null,e})}var ug=null;function kq(n){return ug=ug||Oq(n),ug}var Fq=new Zs(5e3,15e3),Lq="__/auth/iframe",Vq="emulator/auth/iframe",Uq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Bq(n){let e=n.config;se(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?W0(e,Vq):`https://${n.config.authDomain}/${Lq}`,r={apiKey:e.apiKey,appName:n.name,v:Ro},i=jq.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${ju(r).slice(1)}`}function $q(n){return _(this,null,function*(){let e=yield kq(n),t=ri().gapi;return se(t,n,"internal-error"),e.open({where:document.body,url:Bq(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Uq,dontclear:!0},r=>new Promise((i,o)=>_(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Js(n,"network-request-failed"),a=ri().setTimeout(()=>{o(s)},Fq.get());function c(){ri().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var Hq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zq=500,qq=600,Gq="_blank",Wq="http://localhost",Ig=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Kq(n,e,t,r=zq,i=qq){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Q(k({},Hq),{width:r.toString(),height:i.toString(),top:o,left:s}),u=Ft().toLowerCase();t&&(a=p1(u)?Gq:t),h1(u)&&(e=e||Wq,c.scrollbars="yes");let h=Object.entries(c).reduce((m,[y,I])=>`${m}${y}=${I},`,"");if(O6(u)&&a!=="_self")return Qq(e||"",a),new Ig(null);let p=window.open(e||"",a,h);se(p,n,"popup-blocked");try{p.focus()}catch{}return new Ig(p)}function Qq(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Yq="__/auth/handler",Jq="emulator/auth/handler",Zq=encodeURIComponent("fac");function XO(n,e,t,r,i,o){return _(this,null,function*(){se(n.config.authDomain,n,"auth-domain-config-required"),se(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ro,eventId:i};if(e instanceof vg){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",sP(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof L0){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=yield n._getAppCheckToken(),u=c?`#${Zq}=${encodeURIComponent(c)}`:"";return`${Xq(n)}?${ju(a).slice(1)}${u}`})}function Xq({config:n}){return n.emulator?W0(n,Jq):`https://${n.authDomain}/${Yq}`}var C0="webStorageSupport",z0=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eC,this._completeRedirectFn=Tq,this._overrideRedirectResult=Iq}_openPopup(e,t,r,i){return _(this,null,function*(){Bo(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let o=yield XO(e,t,r,T0(),i);return Kq(e,o,k1())})}_openRedirect(e,t,r,i){return _(this,null,function*(){yield this._originValidation(e);let o=yield XO(e,t,r,T0(),i);return sq(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Bo(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return _(this,null,function*(){let t=yield $q(e),r=new H0(e);return t.register("authEvent",i=>(se(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(C0,{type:C0},i=>{let o=i?.[0]?.[C0];o!==void 0&&t(!!o),ii(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Nq(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return _1()||f1()||Q0()}},B1=z0;var e1="@firebase/auth",t1="1.11.1";var q0=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function e5(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function t5(n){Mo(new Zn("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;se(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:E1(n)},u=new P0(r,i,o,c);return $6(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Mo(new Zn("auth-internal",e=>{let t=ea(e.getProvider("auth").getImmediate());return(r=>new q0(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tr(e1,t1,e5(n)),Tr(e1,t1,"esm2020")}var n5=300,r5=Uw("authIdTokenMaxAge")||n5,n1=null,i5=n=>e=>_(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>r5)return;let i=t?.token;n1!==i&&(n1=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function tC(n=im()){let e=$u(n,"auth");if(e.isInitialized())return e.getImmediate();let t=C1(n,{popupRedirectResolver:B1,persistence:[U1,O1,eC]}),r=Uw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=i5(o.toString());x1(t,s,()=>s(t.currentUser)),P1(t,a=>s(a))}}let i=Lw("auth");return i&&T1(t,`http://${i}`),t}function o5(){return document.getElementsByTagName("head")?.[0]??document}V6({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Js("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",o5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});t5("Browser");var Ut=class n{currentUserSubject=new Ye(null);currentUser$=this.currentUserSubject.asObservable();auth=tC();firestore=xc();constructor(){this.initializeAuthState()}initializeAuthState(){Z0(this.auth,e=>_(this,null,function*(){if(e){let t=yield w0(Un(this.firestore,"users",e.uid));t.exists()&&this.currentUserSubject.next(t.data())}else this.currentUserSubject.next(null)}))}login(e,t){return _(this,null,function*(){try{let r=yield J0(this.auth,e,t),i=yield w0(Un(this.firestore,"users",r.user.uid));return i.exists()&&this.currentUserSubject.next(i.data()),!0}catch(r){return console.error("Login error:",r),!1}})}register(e,t,r){return _(this,null,function*(){try{let i=yield Y0(this.auth,t,r),o={id:i.user.uid,name:e,email:t,isAdmin:!1};return yield jO(Un(this.firestore,"users",i.user.uid),o),this.currentUserSubject.next(o),!0}catch(i){return console.error("Register error:",i),!1}})}logout(){X0(this.auth).then(()=>{this.currentUserSubject.next(null)})}getCurrentUser(){return this.currentUser$}isLoggedIn(){return this.currentUserSubject.value!==null}isAdmin(){return this.currentUserSubject.value?.isAdmin||!1}static \u0275fac=function(t){return new(t||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};function s5(n,e){n&1&&(T(0,"a",10),N(1,"Admin"),b())}function a5(n,e){n&1&&(T(0,"div",11)(1,"a",12),N(2,"Login"),b(),T(3,"a",13),N(4,"Sign Up"),b()())}function c5(n,e){if(n&1){let t=ht();T(0,"div",17)(1,"a",18),N(2,"My RSVPs"),b(),T(3,"button",19),ye("click",function(){Ie(t);let i=X(2);return be(i.logout())}),N(4,"Logout"),b()()}}function l5(n,e){if(n&1){let t=ht();T(0,"div",14)(1,"button",15),ye("click",function(){Ie(t);let i=X();return be(i.toggleUserMenu())}),N(2),b(),Ce(3,c5,5,0,"div",16),b()}if(n&2){let t=X();O(2),xe(" ",t.currentUser.name," "),O(),Y("ngIf",t.showUserMenu)}}var an=class n{constructor(e){this.authService=e}currentUser=null;showUserMenu=!1;ngOnInit(){this.authService.getCurrentUser().subscribe(e=>{this.currentUser=e})}toggleUserMenu(){this.showUserMenu=!this.showUserMenu}logout(){this.authService.logout(),this.showUserMenu=!1}static \u0275fac=function(t){return new(t||n)(B(Ut))};static \u0275cmp=Ke({type:n,selectors:[["app-header"]],decls:14,vars:3,consts:[[1,"header"],[1,"header-container"],[1,"logo"],[1,"nav-menu"],["routerLink","/events","routerLinkActive","active"],["routerLink","/calendar","routerLinkActive","active"],["routerLink","/admin","routerLinkActive","active",4,"ngIf"],[1,"auth-section"],["class","auth-buttons",4,"ngIf"],["class","user-menu",4,"ngIf"],["routerLink","/admin","routerLinkActive","active"],[1,"auth-buttons"],["routerLink","/login",1,"btn","btn-secondary"],["routerLink","/register",1,"btn","btn-primary"],[1,"user-menu"],[1,"user-button",3,"click"],["class","dropdown",4,"ngIf"],[1,"dropdown"],["routerLink","/profile"],[3,"click"]],template:function(t,r){t&1&&(T(0,"header",0)(1,"div",1)(2,"div",2)(3,"h1"),N(4,"Community Events"),b()(),T(5,"nav",3)(6,"a",4),N(7,"Events"),b(),T(8,"a",5),N(9,"Calendar"),b(),Ce(10,s5,2,0,"a",6),b(),T(11,"div",7),Ce(12,a5,5,0,"div",8)(13,l5,4,2,"div",9),b()()()),t&2&&(O(10),Y("ngIf",r.currentUser==null?null:r.currentUser.isAdmin),O(2),Y("ngIf",!r.currentUser),O(),Y("ngIf",r.currentUser))},dependencies:[st,pt,gt,Xe,tw],styles:[".header[_ngcontent-%COMP%]{background-color:var(--header-bg, #1a1a2e);border-bottom:2px solid var(--header-border, #0f3460);position:sticky;top:0;z-index:100}.header-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:1rem 2rem;display:flex;justify-content:space-between;align-items:center;gap:1rem}.logo[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;color:var(--primary, #00d4ff);font-size:1.5rem}.nav-menu[_ngcontent-%COMP%]{display:flex;gap:1.5rem;flex:1;justify-content:center;align-items:center}.nav-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#e0e0e0;text-decoration:none;font-weight:500;transition:color .18s,background-color .18s;padding:.35rem .6rem;border-radius:6px}.nav-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .nav-menu[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:var(--primary, #00d4ff);background-color:#00d4ff14}.auth-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.auth-buttons[_ngcontent-%COMP%]{display:flex;gap:.5rem}.user-menu[_ngcontent-%COMP%]{position:relative}.user-button[_ngcontent-%COMP%]{background-color:transparent;color:var(--primary, #00d4ff);border:1px solid var(--primary, #00d4ff);padding:.45rem .9rem;border-radius:6px;cursor:pointer;font-weight:600;transition:all .18s}.user-button[_ngcontent-%COMP%]:hover{background-color:var(--primary, #00d4ff);color:var(--header-bg, #1a1a2e);border-color:var(--primary, #00d4ff)}.dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;background-color:var(--accent, #0f3460);border:1px solid var(--primary, #00d4ff);border-radius:6px;margin-top:.5rem;min-width:150px}.dropdown[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;width:100%;padding:.75rem 1rem;background:none;border:none;color:#e0e0e0;text-align:left;cursor:pointer;transition:background-color .18s;text-decoration:none}.dropdown[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--header-bg, #1a1a2e);color:var(--primary, #00d4ff)}@media (max-width: 768px){.header-container[_ngcontent-%COMP%]{flex-wrap:wrap;gap:1rem}.nav-menu[_ngcontent-%COMP%]{flex-basis:100%;gap:1rem;order:3;justify-content:flex-start}}"]})};var Y1=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(B(qn),B(Xt))};static \u0275dir=Ze({type:n})}return n})(),xg=(()=>{class n extends Y1{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ei(n)))(i||n)}})();static \u0275dir=Ze({type:n,features:[Wn]})}return n})(),Rd=new q("");var u5={provide:Rd,useExisting:ar(()=>tr),multi:!0};function d5(){let n=Qn()?Qn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var h5=new q(""),tr=(()=>{class n extends Y1{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!d5())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(B(qn),B(Xt),B(h5,8))};static \u0275dir=Ze({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ye("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[yo([u5]),Wn]})}return n})();var J1=new q(""),Z1=new q("");function X1(n){return n!=null}function ek(n){return go(n)?We(n):n}function tk(n){let e={};return n.forEach(t=>{e=t!=null?k(k({},e),t):e}),Object.keys(e).length===0?null:e}function nk(n,e){return e.map(t=>t(n))}function f5(n){return!n.validate}function rk(n){return n.map(e=>f5(e)?e:t=>e.validate(t))}function p5(n){if(!n)return null;let e=n.filter(X1);return e.length==0?null:function(t){return tk(nk(t,e))}}function iC(n){return n!=null?p5(rk(n)):null}function m5(n){if(!n)return null;let e=n.filter(X1);return e.length==0?null:function(t){let r=nk(t,e).map(ek);return Ry(r).pipe(me(tk))}}function oC(n){return n!=null?m5(rk(n)):null}function $1(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function g5(n){return n._rawValidators}function y5(n){return n._rawAsyncValidators}function nC(n){return n?Array.isArray(n)?n:[n]:[]}function Dg(n,e){return Array.isArray(n)?n.includes(e):n===e}function H1(n,e){let t=nC(e);return nC(n).forEach(i=>{Dg(t,i)||t.push(i)}),t}function z1(n,e){return nC(e).filter(t=>!Dg(n,t))}var Sg=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=iC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=oC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Uc=class extends Sg{name;get formDirective(){return null}get path(){return null}},Md=class extends Sg{_parent=null;name=null;valueAccessor=null},Ag=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},v5={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},uue=Q(k({},v5),{"[class.ng-submitted]":"isSubmitted"}),oi=(()=>{class n extends Ag{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(B(Md,2))};static \u0275dir=Ze({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&en("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Wn]})}return n})(),Go=(()=>{class n extends Ag{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(B(Uc,10))};static \u0275dir=Ze({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&en("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Wn]})}return n})();var Cd="VALID",Tg="INVALID",Lc="PENDING",Td="DISABLED",qo=class{},Mg=class extends qo{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Sd=class extends qo{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Ad=class extends qo{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Vc=class extends qo{status;source;constructor(e,t){super(),this.status=e,this.source=t}},rC=class extends qo{source;constructor(e){super(),this.source=e}},Rg=class extends qo{source;constructor(e){super(),this.source=e}};function ik(n){return(Og(n)?n.validators:n)||null}function _5(n){return Array.isArray(n)?iC(n):n||null}function ok(n,e){return(Og(e)?e.asyncValidators:n)||null}function E5(n){return Array.isArray(n)?oC(n):n||null}function Og(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function w5(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new U(1e3,"");if(!r[t])throw new U(1001,"")}function I5(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new U(1002,"")})}var Ng=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return kt(this.statusReactive)}set status(e){kt(()=>this.statusReactive.set(e))}_status=La(()=>this.statusReactive());statusReactive=hr(void 0);get valid(){return this.status===Cd}get invalid(){return this.status===Tg}get pending(){return this.status==Lc}get disabled(){return this.status===Td}get enabled(){return this.status!==Td}errors;get pristine(){return kt(this.pristineReactive)}set pristine(e){kt(()=>this.pristineReactive.set(e))}_pristine=La(()=>this.pristineReactive());pristineReactive=hr(!0);get dirty(){return!this.pristine}get touched(){return kt(this.touchedReactive)}set touched(e){kt(()=>this.touchedReactive.set(e))}_touched=La(()=>this.touchedReactive());touchedReactive=hr(!1);get untouched(){return!this.touched}_events=new ct;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(H1(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(H1(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(z1(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(z1(e,this._rawAsyncValidators))}hasValidator(e){return Dg(this._rawValidators,e)}hasAsyncValidator(e){return Dg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Q(k({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ad(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ad(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Q(k({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Sd(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Sd(!0,r))}markAsPending(e={}){this.status=Lc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Vc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Q(k({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Td,this.errors=null,this._forEachChild(i=>{i.disable(Q(k({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Mg(this.value,r)),this._events.next(new Vc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Q(k({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Cd,this._forEachChild(r=>{r.enable(Q(k({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Q(k({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Cd||this.status===Lc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Mg(this.value,t)),this._events.next(new Vc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Q(k({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Td:Cd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Lc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=ek(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Vc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new dt,this.statusChanges=new dt}_calculateStatus(){return this._allControlsDisabled()?Td:this.errors?Tg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Lc)?Lc:this._anyControlsHaveStatus(Tg)?Tg:Cd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Sd(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ad(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Og(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=_5(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=E5(this._rawAsyncValidators)}},Pg=class extends Ng{constructor(e,t,r){super(ik(t),ok(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){I5(this,!0,e),Object.keys(e).forEach(r=>{w5(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Rg(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var sC=new q("",{providedIn:"root",factory:()=>aC}),aC="always";function b5(n,e){return[...e.path,n]}function sk(n,e,t=aC){ak(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),T5(n,e),S5(n,e),D5(n,e),C5(n,e)}function q1(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function C5(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function ak(n,e){let t=g5(n);e.validator!==null?n.setValidators($1(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=y5(n);e.asyncValidator!==null?n.setAsyncValidators($1(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();q1(e._rawValidators,i),q1(e._rawAsyncValidators,i)}function T5(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&ck(n,e)})}function D5(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&ck(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function ck(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function S5(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function A5(n,e){n==null,ak(n,e)}function M5(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function R5(n){return Object.getPrototypeOf(n.constructor)===xg}function N5(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function P5(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===tr?t=o:R5(o)?r=o:i=o}),i||r||t||null}var x5={provide:Uc,useExisting:ar(()=>zi)},Dd=Promise.resolve(),zi=(()=>{class n extends Uc{callSetDisabledState;get submitted(){return kt(this.submittedReactive)}_submitted=La(()=>this.submittedReactive());submittedReactive=hr(!1);_directives=new Set;form;ngSubmit=new dt;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Pg({},iC(t),oC(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Dd.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),sk(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Dd.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Dd.then(()=>{let r=this._findContainer(t.path),i=new Pg({});A5(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Dd.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Dd.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),N5(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new rC(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(B(J1,10),B(Z1,10),B(sC,8))};static \u0275dir=Ze({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&ye("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[yo([x5]),Wn]})}return n})();function G1(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function W1(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var O5=class extends Ng{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(ik(t),ok(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Og(t)&&(t.nonNullable||t.initialValueIsDefault)&&(W1(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Rg(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){G1(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){G1(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){W1(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var k5={provide:Md,useExisting:ar(()=>Rr)},K1=Promise.resolve(),Rr=(()=>{class n extends Md{_changeDetectorRef;callSetDisabledState;control=new O5;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new dt;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=P5(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),M5(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){sk(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){K1.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Is(r);K1.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?b5(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(B(Uc,9),B(J1,10),B(Z1,10),B(Rd,10),B(Ti,8),B(sC,8))};static \u0275dir=Ze({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[yo([k5]),Wn,_i]})}return n})();var Wo=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ze({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),F5={provide:Rd,useExisting:ar(()=>Nd),multi:!0},Nd=(()=>{class n extends xg{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ei(n)))(i||n)}})();static \u0275dir=Ze({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&ye("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[yo([F5]),Wn]})}return n})();var L5={provide:Rd,useExisting:ar(()=>jc),multi:!0};function lk(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function V5(n){return n.split(":")[0]}var jc=(()=>{class n extends xg{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=V(bi).injector;destroyRef=V(dr);cdr=V(Ti);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Hl({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=lk(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=V5(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ei(n)))(i||n)}})();static \u0275dir=Ze({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&ye("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[yo([L5]),Wn]})}return n})(),kg=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(lk(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(B(Xt),B(qn),B(jc,9))};static \u0275dir=Ze({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),U5={provide:Rd,useExisting:ar(()=>uk),multi:!0};function Q1(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function j5(n){return n.split(":")[0]}var uk=(()=>{class n extends xg{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],u=this._getOptionValue(c.value);i.push(u)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=j5(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Ei(n)))(i||n)}})();static \u0275dir=Ze({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&ye("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[yo([U5]),Wn]})}return n})(),Fg=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(Q1(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Q1(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(B(Xt),B(qn),B(uk,9))};static \u0275dir=Ze({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();var B5=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Gn({type:n});static \u0275inj=Rn({})}return n})();var jt=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:sC,useValue:t.callSetDisabledState??aC}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Gn({type:n});static \u0275inj=Rn({imports:[B5]})}return n})();var $5=n=>["/events",n];function H5(n,e){if(n&1){let t=ht();T(0,"button",10),ye("click",function(){let i=Ie(t).$implicit,o=X();return be(o.selectCategory(i))}),N(1),b()}if(n&2){let t=e.$implicit,r=X();en("active",r.selectedCategory===(t==="All"?"":t)),O(),xe(" ",t," ")}}function z5(n,e){n&1&&(T(0,"div",11)(1,"p"),N(2,"No events found. Try adjusting your filters."),b()())}function q5(n,e){if(n&1){let t=ht();T(0,"div",12)(1,"div",13)(2,"img",14),ye("error",function(i){return Ie(t),be(i.target.src="https://via.placeholder.com/400x300?text=Event+Image")}),b()(),T(3,"div",15)(4,"div",16)(5,"h3"),N(6),b(),T(7,"span",17),N(8),b()(),T(9,"p",18),N(10),Kn(11,"slice"),b(),T(12,"div",19)(13,"span",20),N(14),Kn(15,"date"),b(),T(16,"span",20),N(17),b(),T(18,"span",20),N(19),b(),T(20,"span",20),N(21),b()(),T(22,"a",21),N(23,"View Details"),b()()()}if(n&2){let t=e.$implicit;O(2),Y("src",t.imageUrl,po)("alt",t.title),O(4),Te(t.title),O(2),Te(t.category),O(2),xe("",X_(11,10,t.description,0,100),"..."),O(4),xe("\u{1F4C5} ",pr(15,14,t.date,"MMM dd, yyyy")),O(3),xe("\u{1F550} ",t.time),O(2),xe("\u{1F4CD} ",t.location),O(2),xe("\u{1F465} ",t.attendees," attending"),O(),Y("routerLink",Ci(17,$5,t.id))}}var Lg=class n{constructor(e){this.eventService=e}events=[];filteredEvents=[];searchQuery="";selectedCategory="";categories=["All","Community","Technology","Markets","Health","Education"];ngOnInit(){console.log("[EventsList] subscribing to events observable"),this.eventService.getEvents().subscribe({next:e=>{console.log("[EventsList] received events:",e.length,e.map(t=>({id:t.id,title:t.title}))),this.events=e.map((t,r)=>Q(k({},t),{imageUrl:this.getEventImage(t,r)})),this.applyFilters()},error:e=>{console.error("[EventsList] getEvents error:",e)}})}getEventImage(e,t){if(e.imageUrl&&e.imageUrl.trim()!=="")return e.imageUrl;let i={Community:"community-gathering",Technology:"technology-conference",Markets:"marketplace",Health:"health-wellness",Education:"education-learning"}[e.category]||"event";return`https://images.unsplash.com/photo-${1540575461063+((e.id?.charCodeAt(0)||0)+t)}?w=400&h=300&fit=crop&q=80&auto=format`}applyFilters(){this.filteredEvents=this.events.filter(e=>{let t=e.title.toLowerCase().includes(this.searchQuery.toLowerCase())||e.description.toLowerCase().includes(this.searchQuery.toLowerCase()),r=!this.selectedCategory||this.selectedCategory==="All"||e.category===this.selectedCategory;return t&&r})}onSearchChange(){this.applyFilters()}selectCategory(e){this.selectedCategory=e==="All"?"":e,this.applyFilters()}static \u0275fac=function(t){return new(t||n)(B(sn))};static \u0275cmp=Ke({type:n,selectors:[["app-events-list"]],decls:15,vars:4,consts:[[1,"events-container"],[1,"hero"],[1,"filters-section"],[1,"search-box"],["type","text","placeholder","Search events...",3,"ngModelChange","input","ngModel"],[1,"category-filters"],["class","filter-btn",3,"active","click",4,"ngFor","ngForOf"],[1,"events-grid"],["class","no-events",4,"ngIf"],["class","event-card",4,"ngFor","ngForOf"],[1,"filter-btn",3,"click"],[1,"no-events"],[1,"event-card"],[1,"event-image"],["loading","lazy",3,"error","src","alt"],[1,"event-content"],[1,"event-header"],[1,"category-badge"],[1,"description"],[1,"event-details"],[1,"detail"],[1,"btn","btn-primary",3,"routerLink"]],template:function(t,r){t&1&&(ot(0,"app-header"),T(1,"main",0)(2,"section",1)(3,"h2"),N(4,"Community Events"),b(),T(5,"p"),N(6,"Discover and join local events in your community"),b()(),T(7,"div",2)(8,"div",3)(9,"input",4),Le("ngModelChange",function(o){return Be(r.searchQuery,o)||(r.searchQuery=o),o}),ye("input",function(){return r.onSearchChange()}),b()(),T(10,"div",5),Ce(11,H5,2,3,"button",6),b()(),T(12,"div",7),Ce(13,z5,3,0,"div",8)(14,q5,24,19,"div",9),b()()),t&2&&(O(9),Fe("ngModel",r.searchQuery),O(2),Y("ngForOf",r.categories),O(2),Y("ngIf",r.filteredEvents.length===0),O(),Y("ngForOf",r.filteredEvents))},dependencies:[an,st,En,pt,jt,tr,oi,Rr,gt,Xe,mE,_r],styles:[".events-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem}.hero[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem;color:#e0e0e0}.hero[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:.5rem;color:#00d4ff}.hero[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;color:#b0b0b0}.filters-section[_ngcontent-%COMP%]{margin-bottom:3rem;display:flex;flex-direction:column;gap:1.5rem}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem 1rem;border:1px solid #0f3460;background-color:#16213e;color:#e0e0e0;border-radius:4px;font-size:1rem}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#00d4ff;box-shadow:0 0 0 3px #00d4ff1a}.category-filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem}.filter-btn[_ngcontent-%COMP%]{padding:.5rem 1.5rem;background-color:#16213e;color:#b0b0b0;border:1px solid #0f3460;border-radius:20px;cursor:pointer;transition:all .3s;font-weight:500}.filter-btn[_ngcontent-%COMP%]:hover{border-color:#00d4ff;color:#00d4ff}.filter-btn.active[_ngcontent-%COMP%]{background-color:#00d4ff;color:#1a1a2e;border-color:#00d4ff}.events-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:2rem}.no-events[_ngcontent-%COMP%]{grid-column:1 / -1;text-align:center;padding:3rem;color:#b0b0b0}.event-card[_ngcontent-%COMP%]{background-color:#16213e;border:1px solid #0f3460;border-radius:8px;overflow:hidden;transition:all .3s;display:flex;flex-direction:column}.event-card[_ngcontent-%COMP%]:hover{border-color:#00d4ff;box-shadow:0 4px 12px #00d4ff33;transform:translateY(-4px)}.event-image[_ngcontent-%COMP%]{width:100%;height:200px;overflow:hidden;background-color:#0f3460}.event-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.event-content[_ngcontent-%COMP%]{padding:1.5rem;display:flex;flex-direction:column;flex-grow:1}.event-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:start;gap:1rem;margin-bottom:.5rem}.event-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#00d4ff;font-size:1.25rem;flex:1}.category-badge[_ngcontent-%COMP%]{background-color:#0f3460;color:#00d4ff;padding:.25rem .75rem;border-radius:20px;font-size:.75rem;font-weight:600;white-space:nowrap}.description[_ngcontent-%COMP%]{color:#b0b0b0;margin:.5rem 0 1rem;line-height:1.5}.event-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;margin-bottom:1rem;color:#90b0cc;font-size:.9rem}.detail[_ngcontent-%COMP%]{display:flex;align-items:center}.btn[_ngcontent-%COMP%]{padding:.5rem 1.5rem;border:none;border-radius:4px;text-decoration:none;cursor:pointer;font-weight:600;transition:all .3s;text-align:center;margin-top:auto}.btn-primary[_ngcontent-%COMP%]{background-color:#00d4ff;color:#1a1a2e}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#00a8cc}@media (max-width: 768px){.events-container[_ngcontent-%COMP%]{padding:1rem}.hero[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.75rem}.events-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};var Bc=class n{rsvpsSubject=new Ye([]);remindersSubject=new Ye([]);rsvps$=this.rsvpsSubject.asObservable();reminders$=this.remindersSubject.asObservable();firestore=xc();constructor(){this.loadRsvps(),this.loadReminders()}loadRsvps(){let e=pn(this.firestore,"rsvps");ni(e,t=>{let r=[];t.forEach(i=>{r.push(Q(k({},i.data()),{id:i.id}))}),this.rsvpsSubject.next(r)})}loadReminders(){let e=pn(this.firestore,"reminders");ni(e,t=>{let r=[];t.forEach(i=>{r.push(Q(k({},i.data()),{id:i.id}))}),this.remindersSubject.next(r)})}getRsvps(){return this.rsvps$}addRsvp(e,t,r){return _(this,null,function*(){try{let i=ji(pn(this.firestore,"rsvps"),Tn("userId","==",e),Tn("eventId","==",t)),o=yield Oc(i);if(o.empty){let s=pn(this.firestore,"rsvps");yield pd(s,{userId:e,eventId:t,status:r,registeredAt:new Date().toISOString().split("T")[0]})}else{let s=o.docs[0].id;yield kc(Un(this.firestore,"rsvps",s),{status:r})}}catch(i){console.error("Error adding RSVP:",i)}})}updateRsvp(e,t){return _(this,null,function*(){try{let r=Un(this.firestore,"rsvps",e);yield kc(r,{status:t})}catch(r){console.error("Error updating RSVP:",r)}})}removeRsvp(e,t){return _(this,null,function*(){try{let r=ji(pn(this.firestore,"rsvps"),Tn("userId","==",e),Tn("eventId","==",t));(yield Oc(r)).forEach(o=>{ig(o.ref)})}catch(r){console.error("Error removing RSVP:",r)}})}getUserRsvps(e){return new le(t=>{let r=ji(pn(this.firestore,"rsvps"),Tn("userId","==",e));ni(r,i=>{let o=[];i.forEach(s=>{o.push(Q(k({},s.data()),{id:s.id}))}),t.next(o)})})}getRsvpStatus(e,t){return new le(r=>{let i=ji(pn(this.firestore,"rsvps"),Tn("userId","==",e),Tn("eventId","==",t));ni(i,o=>{o.empty?r.next(null):r.next(o.docs[0].data().status)})})}toggleReminder(e,t){return _(this,null,function*(){try{let r=ji(pn(this.firestore,"reminders"),Tn("userId","==",e),Tn("eventId","==",t)),i=yield Oc(r);if(i.empty){let o=pn(this.firestore,"reminders");yield pd(o,{userId:e,eventId:t,enabled:!0})}else{let o=i.docs[0].id,s=i.docs[0].data().enabled;yield kc(Un(this.firestore,"reminders",o),{enabled:!s})}}catch(r){console.error("Error toggling reminder:",r)}})}isReminderEnabled(e,t){return new le(r=>{let i=ji(pn(this.firestore,"reminders"),Tn("userId","==",e),Tn("eventId","==",t));ni(i,o=>{o.empty?r.next(!1):r.next(o.docs[0].data().enabled)})})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};function G5(n,e){if(n&1){let t=ht();T(0,"div",22)(1,"button",23),ye("click",function(){Ie(t);let i=X(2);return be(i.toggleReminder())}),N(2),b(),T(3,"button",24),ye("click",function(){Ie(t);let i=X(2);return be(i.cancelRsvp())}),N(4," Cancel RSVP "),b()()}if(n&2){let t=X(2);O(),en("active",t.reminderEnabled),O(),xe(" ",t.reminderEnabled?"\u{1F514} Reminder On":"\u{1F515} Reminder Off"," ")}}function W5(n,e){if(n&1){let t=ht();T(0,"main",2)(1,"div",3)(2,"a",4),N(3,"\u2190 Back to Events"),b()(),T(4,"div",5)(5,"div",6),ot(6,"img",7),b(),T(7,"div",8)(8,"div",9)(9,"div")(10,"span",10),N(11),b(),T(12,"h1"),N(13),b()()(),T(14,"div",11)(15,"div",12)(16,"span",13),N(17,"Date:"),b(),T(18,"span",14),N(19),Kn(20,"date"),b()(),T(21,"div",12)(22,"span",13),N(23,"Time:"),b(),T(24,"span",14),N(25),b()(),T(26,"div",12)(27,"span",13),N(28,"Location:"),b(),T(29,"span",14),N(30),b()(),T(31,"div",12)(32,"span",13),N(33,"Attendees:"),b(),T(34,"span",14),N(35),b()()(),T(36,"div",15)(37,"h3"),N(38,"About this event"),b(),T(39,"p"),N(40),b()(),T(41,"div",16)(42,"h3"),N(43,"Will you attend?"),b(),T(44,"div",17)(45,"button",18),ye("click",function(){Ie(t);let i=X();return be(i.rsvp("going"))}),N(46," \u2713 Going "),b(),T(47,"button",19),ye("click",function(){Ie(t);let i=X();return be(i.rsvp("maybe"))}),N(48," ? Maybe "),b(),T(49,"button",20),ye("click",function(){Ie(t);let i=X();return be(i.rsvp("not-going"))}),N(50," \u2717 Not Going "),b()(),Ce(51,G5,5,3,"div",21),b()()()()}if(n&2){let t=X();O(6),Y("src",t.event.imageUrl,po)("alt",t.event.title),O(5),Te(t.event.category),O(2),Te(t.event.title),O(6),Te(pr(20,16,t.event.date,"EEEE, MMMM d, yyyy")),O(6),Te(t.event.time),O(5),Te(t.event.location),O(5),xe("",t.event.attendees," people attending"),O(5),Te(t.event.description),O(5),en("active",t.rsvpStatus==="going"),O(2),en("active",t.rsvpStatus==="maybe"),O(2),en("active",t.rsvpStatus==="not-going"),O(2),Y("ngIf",t.rsvpStatus)}}function K5(n,e){n&1&&(T(0,"div",25)(1,"p"),N(2,"Event not found"),b()())}var Vg=class n{constructor(e,t,r,i){this.route=e;this.eventService=t;this.rsvpService=r;this.authService=i}event=null;currentUser=null;rsvpStatus=null;reminderEnabled=!1;ngOnInit(){this.authService.getCurrentUser().subscribe(e=>{this.currentUser=e}),this.route.params.subscribe(e=>{let t=e.id;this.eventService.getEventById(t).subscribe(r=>{this.event=r||null,this.currentUser&&(this.rsvpService.getRsvpStatus(this.currentUser.id,t).subscribe(i=>{this.rsvpStatus=i}),this.rsvpService.isReminderEnabled(this.currentUser.id,t).subscribe(i=>{this.reminderEnabled=i}))})})}updateRsvpStatus(){this.currentUser&&this.event&&(this.rsvpService.getRsvpStatus(this.currentUser.id,this.event.id).subscribe(e=>{this.rsvpStatus=e}),this.rsvpService.isReminderEnabled(this.currentUser.id,this.event.id).subscribe(e=>{this.reminderEnabled=e}))}rsvp(e){if(!this.currentUser){alert("Please login to RSVP to events");return}this.event&&(this.rsvpService.addRsvp(this.currentUser.id,this.event.id,e),this.updateRsvpStatus())}toggleReminder(){if(!this.currentUser||!this.event){alert("Please login to set reminders");return}this.rsvpService.toggleReminder(this.currentUser.id,this.event.id),this.updateRsvpStatus()}cancelRsvp(){this.currentUser&&this.event&&(this.rsvpService.removeRsvp(this.currentUser.id,this.event.id),this.updateRsvpStatus())}static \u0275fac=function(t){return new(t||n)(B(nn),B(sn),B(Bc),B(Ut))};static \u0275cmp=Ke({type:n,selectors:[["app-event-details"]],decls:3,vars:2,consts:[["class","event-details-container",4,"ngIf"],["class","loading",4,"ngIf"],[1,"event-details-container"],[1,"back-button"],["routerLink","/events"],[1,"event-details-content"],[1,"event-image-section"],[3,"src","alt"],[1,"event-info"],[1,"event-header"],[1,"category-badge"],[1,"event-meta"],[1,"meta-item"],[1,"label"],[1,"value"],[1,"description"],[1,"rsvp-section"],[1,"rsvp-buttons"],[1,"btn","btn-going",3,"click"],[1,"btn","btn-maybe",3,"click"],[1,"btn","btn-not-going",3,"click"],["class","rsvp-actions",4,"ngIf"],[1,"rsvp-actions"],[1,"btn","btn-reminder",3,"click"],[1,"btn","btn-cancel",3,"click"],[1,"loading"]],template:function(t,r){t&1&&(ot(0,"app-header"),Ce(1,W5,52,19,"main",0)(2,K5,3,0,"div",1)),t&2&&(O(),Y("ngIf",r.event),O(),Y("ngIf",!r.event))},dependencies:[an,st,pt,jt,gt,Xe,_r],styles:[".event-details-container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding:2rem}.back-button[_ngcontent-%COMP%]{margin-bottom:2rem}.back-button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00d4ff;text-decoration:none;font-weight:600;transition:color .3s}.back-button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#00a8cc}.event-details-content[_ngcontent-%COMP%]{background-color:#16213e;border:1px solid #0f3460;border-radius:8px;overflow:hidden;display:grid;grid-template-columns:1fr 1fr;gap:2rem}.event-image-section[_ngcontent-%COMP%]{width:100%;height:400px;overflow:hidden;background-color:#0f3460}.event-image-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.event-info[_ngcontent-%COMP%]{padding:2rem;display:flex;flex-direction:column;justify-content:space-between}.event-header[_ngcontent-%COMP%]{margin-bottom:1rem}.category-badge[_ngcontent-%COMP%]{display:inline-block;background-color:#0f3460;color:#00d4ff;padding:.25rem .75rem;border-radius:20px;font-size:.75rem;font-weight:600;margin-bottom:.5rem}.event-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:.5rem 0 0;color:#00d4ff;font-size:2rem}.event-meta[_ngcontent-%COMP%]{display:grid;gap:1rem;margin-bottom:2rem;padding-bottom:2rem;border-bottom:1px solid #0f3460}.meta-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:100px 1fr}.meta-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#b0b0b0;font-weight:600}.meta-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#e0e0e0}.description[_ngcontent-%COMP%]{margin-bottom:2rem}.description[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#00d4ff;margin-top:0;margin-bottom:1rem}.description[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#b0b0b0;line-height:1.6;margin:0}.rsvp-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#00d4ff;margin-top:0}.rsvp-buttons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem;margin-bottom:1rem}.btn[_ngcontent-%COMP%]{padding:.75rem 1rem;border:2px solid #0f3460;border-radius:4px;background-color:transparent;color:#b0b0b0;cursor:pointer;font-weight:600;transition:all .3s}.btn[_ngcontent-%COMP%]:hover{border-color:#00d4ff;color:#00d4ff}.btn.active[_ngcontent-%COMP%]{background-color:#00d4ff;color:#1a1a2e;border-color:#00d4ff}.btn-going[_ngcontent-%COMP%]:hover{border-color:#4caf50;color:#4caf50}.btn-going.active[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.btn-maybe[_ngcontent-%COMP%]:hover{border-color:#ff9800;color:#ff9800}.btn-maybe.active[_ngcontent-%COMP%]{background-color:#ff9800;color:#fff}.btn-not-going[_ngcontent-%COMP%]:hover{border-color:#f44336;color:#f44336}.btn-not-going.active[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.rsvp-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-top:1rem}.btn-reminder[_ngcontent-%COMP%], .btn-cancel[_ngcontent-%COMP%]{padding:.75rem 1rem}.btn-cancel[_ngcontent-%COMP%]{background-color:#f44336;color:#fff;border:none}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#d32f2f}.loading[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#b0b0b0}@media (max-width: 768px){.event-details-content[_ngcontent-%COMP%]{grid-template-columns:1fr}.event-image-section[_ngcontent-%COMP%]{height:250px}.rsvp-buttons[_ngcontent-%COMP%], .rsvp-actions[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};function Q5(n,e){if(n&1&&(T(0,"div",14),N(1),b()),n&2){let t=X();O(),xe(" ",t.errorMessage," ")}}var Ug=class n{constructor(e,t){this.authService=e;this.router=t}email="";password="";errorMessage="";onSubmit(){return _(this,null,function*(){this.email&&this.password&&((yield this.authService.login(this.email,this.password))?this.router.navigate(["/profile"]):this.errorMessage="Invalid credentials")})}static \u0275fac=function(t){return new(t||n)(B(Ut),B(mt))};static \u0275cmp=Ke({type:n,selectors:[["app-login"]],decls:33,vars:3,consts:[[1,"auth-container"],[1,"auth-form"],[1,"subtitle"],["class","error-message",4,"ngIf"],[3,"ngSubmit"],[1,"form-group"],["for","email"],["id","email","type","email","name","email","placeholder","you@example.com",3,"ngModelChange","ngModel"],["for","password"],["id","password","type","password","name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary"],[1,"form-footer"],["routerLink","/register"],[1,"demo-info"],[1,"error-message"]],template:function(t,r){t&1&&(T(0,"div",0)(1,"div",1)(2,"h2"),N(3,"Login"),b(),T(4,"p",2),N(5,"Sign in to your account to RSVP to events"),b(),Ce(6,Q5,2,1,"div",3),T(7,"form",4),ye("ngSubmit",function(){return r.onSubmit()}),T(8,"div",5)(9,"label",6),N(10,"Email"),b(),T(11,"input",7),Le("ngModelChange",function(o){return Be(r.email,o)||(r.email=o),o}),b()(),T(12,"div",5)(13,"label",8),N(14,"Password"),b(),T(15,"input",9),Le("ngModelChange",function(o){return Be(r.password,o)||(r.password=o),o}),b()(),T(16,"button",10),N(17,"Login"),b()(),T(18,"p",11),N(19," Don't have an account? "),T(20,"a",12),N(21,"Sign up"),b()(),T(22,"div",13)(23,"p"),N(24,"Demo Credentials:"),b(),T(25,"p")(26,"strong"),N(27,"Admin:"),b(),N(28," admin@example.com / admin123"),b(),T(29,"p")(30,"strong"),N(31,"User:"),b(),N(32," john@example.com / user123"),b()()()()),t&2&&(O(6),Y("ngIf",r.errorMessage),O(5),Fe("ngModel",r.email),O(4),Fe("ngModel",r.password))},dependencies:[st,pt,jt,Wo,tr,oi,Go,Rr,zi,gt,Xe],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;background:linear-gradient(135deg,#0f3460,#1a1a2e);padding:2rem}.auth-form[_ngcontent-%COMP%]{background-color:#16213e;border:1px solid #0f3460;border-radius:8px;padding:3rem 2rem;max-width:400px;width:100%;box-shadow:0 10px 40px #00000080}.auth-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#00d4ff;text-align:center}.subtitle[_ngcontent-%COMP%]{text-align:center;color:#b0b0b0;margin-bottom:2rem}.error-message[_ngcontent-%COMP%]{background-color:#f44336;color:#fff;padding:1rem;border-radius:4px;margin-bottom:1.5rem;text-align:center}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#e0e0e0;font-weight:600;margin-bottom:.5rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #0f3460;background-color:#1a1a2e;color:#e0e0e0;border-radius:4px;font-size:1rem;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#00d4ff;box-shadow:0 0 0 3px #00d4ff1a}.btn[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:none;border-radius:4px;font-weight:600;cursor:pointer;transition:all .3s;font-size:1rem}.btn-primary[_ngcontent-%COMP%]{background-color:#00d4ff;color:#1a1a2e}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#00a8cc}.form-footer[_ngcontent-%COMP%]{text-align:center;color:#b0b0b0;margin-top:1.5rem}.form-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00d4ff;text-decoration:none;font-weight:600}.form-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.demo-info[_ngcontent-%COMP%]{margin-top:2rem;padding-top:2rem;border-top:1px solid #0f3460;background-color:#0f3460;padding:1rem;border-radius:4px;color:#b0b0b0;font-size:.85rem}.demo-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.25rem 0}@media (max-width: 480px){.auth-form[_ngcontent-%COMP%]{padding:2rem 1.5rem}.auth-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}}"]})};function Y5(n,e){if(n&1&&(T(0,"div",8),N(1),b()),n&2){let t=X();O(),xe(" ",t.errorMessage," ")}}function J5(n,e){if(n&1&&(T(0,"div",9),N(1),b()),n&2){let t=X();O(),xe(" ",t.successMessage," ")}}function Z5(n,e){if(n&1){let t=ht();T(0,"form",10),ye("ngSubmit",function(){Ie(t);let i=X();return be(i.onSubmit())}),T(1,"div",11)(2,"label",12),N(3,"Full Name"),b(),T(4,"input",13),Le("ngModelChange",function(i){Ie(t);let o=X();return Be(o.name,i)||(o.name=i),be(i)}),b()(),T(5,"div",11)(6,"label",14),N(7,"Email"),b(),T(8,"input",15),Le("ngModelChange",function(i){Ie(t);let o=X();return Be(o.email,i)||(o.email=i),be(i)}),b()(),T(9,"div",11)(10,"label",16),N(11,"Password"),b(),T(12,"input",17),Le("ngModelChange",function(i){Ie(t);let o=X();return Be(o.password,i)||(o.password=i),be(i)}),b()(),T(13,"div",11)(14,"label",18),N(15,"Confirm Password"),b(),T(16,"input",19),Le("ngModelChange",function(i){Ie(t);let o=X();return Be(o.confirmPassword,i)||(o.confirmPassword=i),be(i)}),b()(),T(17,"button",20),N(18,"Create Account"),b()()}if(n&2){let t=X();O(4),Fe("ngModel",t.name),O(4),Fe("ngModel",t.email),O(4),Fe("ngModel",t.password),O(4),Fe("ngModel",t.confirmPassword)}}var jg=class n{constructor(e,t){this.authService=e;this.router=t}name="";email="";password="";confirmPassword="";errorMessage="";successMessage="";onSubmit(){return _(this,null,function*(){if(this.password!==this.confirmPassword){this.errorMessage="Passwords do not match";return}this.name&&this.email&&this.password&&((yield this.authService.register(this.name,this.email,this.password))?(this.successMessage="Registration successful! Redirecting to login...",setTimeout(()=>this.router.navigate(["/login"]),2e3)):this.errorMessage="Email already exists")})}static \u0275fac=function(t){return new(t||n)(B(Ut),B(mt))};static \u0275cmp=Ke({type:n,selectors:[["app-register"]],decls:13,vars:3,consts:[[1,"auth-container"],[1,"auth-form"],[1,"subtitle"],["class","error-message",4,"ngIf"],["class","success-message",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],[1,"form-footer"],["routerLink","/login"],[1,"error-message"],[1,"success-message"],[3,"ngSubmit"],[1,"form-group"],["for","name"],["id","name","type","text","name","name","placeholder","John Doe",3,"ngModelChange","ngModel"],["for","email"],["id","email","type","email","name","email","placeholder","you@example.com",3,"ngModelChange","ngModel"],["for","password"],["id","password","type","password","name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",3,"ngModelChange","ngModel"],["for","confirmPassword"],["id","confirmPassword","type","password","name","confirmPassword","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary"]],template:function(t,r){t&1&&(T(0,"div",0)(1,"div",1)(2,"h2"),N(3,"Create Account"),b(),T(4,"p",2),N(5,"Join our community and discover local events"),b(),Ce(6,Y5,2,1,"div",3)(7,J5,2,1,"div",4)(8,Z5,19,4,"form",5),T(9,"p",6),N(10," Already have an account? "),T(11,"a",7),N(12,"Login"),b()()()()),t&2&&(O(6),Y("ngIf",r.errorMessage),O(),Y("ngIf",r.successMessage),O(),Y("ngIf",!r.successMessage))},dependencies:[st,pt,jt,Wo,tr,oi,Go,Rr,zi,gt,Xe],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:100vh;background:linear-gradient(135deg,#0f3460,#1a1a2e);padding:2rem}.auth-form[_ngcontent-%COMP%]{background-color:#16213e;border:1px solid #0f3460;border-radius:8px;padding:3rem 2rem;max-width:400px;width:100%;box-shadow:0 10px 40px #00000080}.auth-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#00d4ff;text-align:center}.subtitle[_ngcontent-%COMP%]{text-align:center;color:#b0b0b0;margin-bottom:2rem}.error-message[_ngcontent-%COMP%]{background-color:#f44336;color:#fff;padding:1rem;border-radius:4px;margin-bottom:1.5rem;text-align:center}.success-message[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;padding:1rem;border-radius:4px;margin-bottom:1.5rem;text-align:center}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#e0e0e0;font-weight:600;margin-bottom:.5rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #0f3460;background-color:#1a1a2e;color:#e0e0e0;border-radius:4px;font-size:1rem;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#00d4ff;box-shadow:0 0 0 3px #00d4ff1a}.btn[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:none;border-radius:4px;font-weight:600;cursor:pointer;transition:all .3s;font-size:1rem}.btn-primary[_ngcontent-%COMP%]{background-color:#00d4ff;color:#1a1a2e}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#00a8cc}.form-footer[_ngcontent-%COMP%]{text-align:center;color:#b0b0b0;margin-top:1.5rem}.form-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00d4ff;text-decoration:none;font-weight:600}.form-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 480px){.auth-form[_ngcontent-%COMP%]{padding:2rem 1.5rem}.auth-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}}"]})};var X5=n=>["/admin/events",n,"edit"];function eG(n,e){n&1&&(T(0,"div",12)(1,"p"),N(2,"You haven't created any events yet."),b(),T(3,"a",9),N(4,"Create Your First Event"),b()())}function tG(n,e){if(n&1){let t=ht();T(0,"button",19),ye("click",function(){Ie(t);let i=X(4);return be(i.cancelDelete())}),N(1," Cancel "),b()}}function nG(n,e){if(n&1){let t=ht();T(0,"tr")(1,"td"),N(2),b(),T(3,"td"),N(4),Kn(5,"date"),b(),T(6,"td"),N(7),b(),T(8,"td"),N(9),b(),T(10,"td",15)(11,"a",16),N(12,"Edit"),b(),T(13,"button",17),ye("click",function(){let i=Ie(t).$implicit,o=X(3);return be(o.deleteEvent(i.id))}),N(14),b(),Ce(15,tG,2,0,"button",18),b()()}if(n&2){let t=e.$implicit,r=X(3);O(2),Te(t.title),O(2),Te(pr(5,9,t.date,"MMM dd, yyyy")),O(3),Te(t.location),O(2),Te(t.attendees),O(2),Y("routerLink",Ci(12,X5,t.id)),O(2),en("confirm",r.deleteConfirmId===t.id),O(),xe(" ",r.deleteConfirmId===t.id?"Confirm Delete":"Delete"," "),O(),Y("ngIf",r.deleteConfirmId===t.id)}}function rG(n,e){if(n&1&&(T(0,"table",13)(1,"thead")(2,"tr")(3,"th"),N(4,"Title"),b(),T(5,"th"),N(6,"Date"),b(),T(7,"th"),N(8,"Location"),b(),T(9,"th"),N(10,"Attendees"),b(),T(11,"th"),N(12,"Actions"),b()()(),T(13,"tbody"),Ce(14,nG,16,14,"tr",14),b()()),n&2){let t=X(2);O(14),Y("ngForOf",t.userEvents)}}function iG(n,e){if(n&1&&(T(0,"div")(1,"h1"),N(2,"Admin Dashboard"),b(),T(3,"div",3)(4,"div",4)(5,"div",5),N(6),b(),T(7,"div",6),N(8,"Events Created"),b()(),T(9,"div",4)(10,"div",5),N(11),b(),T(12,"div",6),N(13,"Total Community Events"),b()(),T(14,"div",4)(15,"div",5),N(16),b(),T(17,"div",6),N(18,"Total Attendees"),b()()(),T(19,"div",7)(20,"div",8)(21,"h2"),N(22,"Your Events"),b(),T(23,"a",9),N(24,"+ Create New Event"),b()(),Ce(25,eG,5,0,"div",10)(26,rG,15,1,"table",11),b()()),n&2){let t=X();O(6),Te(t.userEvents.length),O(5),Te(t.totalEvents),O(5),Te(t.totalAttendees),O(9),Y("ngIf",t.userEvents.length===0),O(),Y("ngIf",t.userEvents.length>0)}}function oG(n,e){n&1&&(T(0,"div",20)(1,"p"),N(2,"You don't have permission to access this page."),b(),T(3,"a",21),N(4,"Back to Events"),b()())}var Bg=class n{constructor(e,t){this.eventService=e;this.authService=t}events=[];userEvents=[];deleteConfirmId=null;currentUser=null;totalEvents=0;totalAttendees=0;ngOnInit(){this.authService.getCurrentUser().subscribe(e=>{this.currentUser=e,e&&e.isAdmin,this.loadEventsForCurrentUser()}),this.eventService.getEvents().subscribe(e=>{this.totalEvents=e.length,this.totalAttendees=e.reduce((t,r)=>t+r.attendees,0)})}loadEventsForCurrentUser(){this.eventService.getEvents().subscribe(e=>{this.events=e,this.currentUser?.isAdmin?this.userEvents=e:this.currentUser?this.userEvents=e.filter(t=>t.createdBy===this.currentUser.id):this.userEvents=[]})}deleteEvent(e){this.eventService.deleteEvent(e),this.deleteConfirmId=null}cancelDelete(){this.deleteConfirmId=null}static \u0275fac=function(t){return new(t||n)(B(sn),B(Ut))};static \u0275cmp=Ke({type:n,selectors:[["app-admin-dashboard"]],decls:4,vars:2,consts:[[1,"admin-container"],[4,"ngIf"],["class","access-denied",4,"ngIf"],[1,"stats-grid"],[1,"stat-card"],[1,"stat-number"],[1,"stat-label"],[1,"dashboard-section"],[1,"section-header"],["routerLink","/admin/events/new",1,"btn","btn-primary"],["class","no-events",4,"ngIf"],["class","events-table",4,"ngIf"],[1,"no-events"],[1,"events-table"],[4,"ngFor","ngForOf"],[1,"actions"],[1,"btn","btn-small","btn-secondary",3,"routerLink"],[1,"btn","btn-small","btn-danger",3,"click"],["class","btn btn-small btn-secondary",3,"click",4,"ngIf"],[1,"btn","btn-small","btn-secondary",3,"click"],[1,"access-denied"],["routerLink","/events"]],template:function(t,r){t&1&&(ot(0,"app-header"),T(1,"div",0),Ce(2,iG,27,5,"div",1)(3,oG,5,0,"div",2),b()),t&2&&(O(2),Y("ngIf",r.currentUser==null?null:r.currentUser.isAdmin),O(),Y("ngIf",!(r.currentUser!=null&&r.currentUser.isAdmin)))},dependencies:[an,st,En,pt,jt,gt,Xe,_r],styles:[".admin-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem}.admin-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#00d4ff;margin-bottom:2rem}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1.5rem;margin-bottom:3rem}.stat-card[_ngcontent-%COMP%]{background-color:#16213e;border:1px solid #0f3460;border-radius:8px;padding:2rem;text-align:center}.stat-number[_ngcontent-%COMP%]{font-size:2.5rem;color:#00d4ff;font-weight:700;margin-bottom:.5rem}.stat-label[_ngcontent-%COMP%]{color:#b0b0b0}.dashboard-section[_ngcontent-%COMP%]{background-color:#16213e;border:1px solid #0f3460;border-radius:8px;padding:2rem}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#00d4ff}.btn[_ngcontent-%COMP%]{padding:.5rem 1.5rem;border:none;border-radius:4px;text-decoration:none;cursor:pointer;font-weight:600;transition:all .3s;display:inline-block}.btn-primary[_ngcontent-%COMP%]{background-color:#00d4ff;color:#1a1a2e}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#00a8cc}.btn-secondary[_ngcontent-%COMP%]{background-color:transparent;color:#00d4ff;border:1px solid #00d4ff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#00d4ff;color:#1a1a2e}.btn-small[_ngcontent-%COMP%]{padding:.35rem 1rem;font-size:.85rem}.btn-danger[_ngcontent-%COMP%]{background-color:#f44336;color:#fff;border:none}.btn-danger[_ngcontent-%COMP%]:hover{background-color:#d32f2f}.btn-danger.confirm[_ngcontent-%COMP%]{background-color:#ff9800}.no-events[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#b0b0b0}.events-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;color:#e0e0e0}.events-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#0f3460}.events-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1rem;text-align:left;color:#00d4ff;font-weight:600}.events-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid #0f3460}.events-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#1a1a2e}.actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap}.access-denied[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#b0b0b0}.access-denied[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00d4ff;text-decoration:none;font-weight:600;margin-top:1rem;display:inline-block}@media (max-width: 768px){.section-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.section-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%}.events-table[_ngcontent-%COMP%]{font-size:.9rem}.events-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .events-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem .5rem}}"]})};function sG(n,e){if(n&1&&(T(0,"div",26),N(1),b()),n&2){let t=X();O(),xe(" ",t.errorMessage," ")}}function aG(n,e){if(n&1&&(T(0,"option",27),N(1),b()),n&2){let t=e.$implicit;Y("value",t),O(),Te(t)}}var $g=class n{constructor(e,t,r){this.eventService=e;this.authService=t;this.router=r;this.authService.getCurrentUser().subscribe(i=>{this.currentUser=i,i?.isAdmin||this.router.navigate(["/events"])})}currentUser=null;errorMessage="";categories=["Community","Technology","Markets","Health","Education","Sports","Arts"];event={title:"",description:"",date:"",time:"",location:"",category:"Community",imageUrl:"/placeholder.svg?key=5l3mq",attendees:0};createEvent(){return _(this,null,function*(){this.validateForm()&&(this.currentUser?(console.log("Creating event with user:",this.currentUser),console.log("Event data:",{title:this.event.title,description:this.event.description,date:this.event.date,time:this.event.time,location:this.event.location,category:this.event.category,imageUrl:this.event.imageUrl,attendees:this.event.attendees,createdBy:this.currentUser.id,isApproved:!0}),yield this.eventService.addEvent({title:this.event.title,description:this.event.description,date:this.event.date,time:this.event.time,location:this.event.location,category:this.event.category,imageUrl:this.event.imageUrl,attendees:this.event.attendees,createdBy:this.currentUser.id,isApproved:!0}),console.log("Event created successfully"),this.router.navigate(["/admin"])):console.log("No current user"))})}validateForm(){return!this.event.title||!this.event.description||!this.event.date||!this.event.time||!this.event.location?(this.errorMessage="Please fill in all required fields",!1):!0}static \u0275fac=function(t){return new(t||n)(B(sn),B(Ut),B(mt))};static \u0275cmp=Ke({type:n,selectors:[["app-add-event"]],decls:47,vars:10,consts:[[1,"form-container"],[1,"form-card"],["class","error-message",4,"ngIf"],[3,"ngSubmit"],[1,"form-group"],["for","title"],["id","title","type","text","name","title","placeholder","Enter event title",3,"ngModelChange","ngModel"],["for","description"],["id","description","name","description","placeholder","Describe your event","rows","5",3,"ngModelChange","ngModel"],[1,"form-row"],["for","date"],["id","date","type","date","name","date",3,"ngModelChange","ngModel"],["for","time"],["id","time","type","time","name","time",3,"ngModelChange","ngModel"],["for","location"],["id","location","type","text","name","location","placeholder","Enter event location",3,"ngModelChange","ngModel"],["for","category"],["name","category","id","category",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","attendees"],["id","attendees","type","number","name","attendees","placeholder","0",3,"ngModelChange","ngModel"],["for","imageUrl"],["id","imageUrl","type","text","name","imageUrl","placeholder","https://example.com/image.jpg",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","submit",1,"btn","btn-primary"],["routerLink","/admin",1,"btn","btn-secondary"],[1,"error-message"],[3,"value"]],template:function(t,r){t&1&&(ot(0,"app-header"),T(1,"div",0)(2,"div",1)(3,"h2"),N(4,"Create New Event"),b(),Ce(5,sG,2,1,"div",2),T(6,"form",3),ye("ngSubmit",function(){return r.createEvent()}),T(7,"div",4)(8,"label",5),N(9,"Event Title *"),b(),T(10,"input",6),Le("ngModelChange",function(o){return Be(r.event.title,o)||(r.event.title=o),o}),b()(),T(11,"div",4)(12,"label",7),N(13,"Description *"),b(),T(14,"textarea",8),Le("ngModelChange",function(o){return Be(r.event.description,o)||(r.event.description=o),o}),b()(),T(15,"div",9)(16,"div",4)(17,"label",10),N(18,"Date *"),b(),T(19,"input",11),Le("ngModelChange",function(o){return Be(r.event.date,o)||(r.event.date=o),o}),b()(),T(20,"div",4)(21,"label",12),N(22,"Time *"),b(),T(23,"input",13),Le("ngModelChange",function(o){return Be(r.event.time,o)||(r.event.time=o),o}),b()()(),T(24,"div",4)(25,"label",14),N(26,"Location *"),b(),T(27,"input",15),Le("ngModelChange",function(o){return Be(r.event.location,o)||(r.event.location=o),o}),b()(),T(28,"div",9)(29,"div",4)(30,"label",16),N(31,"Category"),b(),T(32,"select",17),Le("ngModelChange",function(o){return Be(r.event.category,o)||(r.event.category=o),o}),Ce(33,aG,2,2,"option",18),b()(),T(34,"div",4)(35,"label",19),N(36,"Expected Attendees"),b(),T(37,"input",20),Le("ngModelChange",function(o){return Be(r.event.attendees,o)||(r.event.attendees=o),o}),b()()(),T(38,"div",4)(39,"label",21),N(40,"Image URL"),b(),T(41,"input",22),Le("ngModelChange",function(o){return Be(r.event.imageUrl,o)||(r.event.imageUrl=o),o}),b()(),T(42,"div",23)(43,"button",24),N(44,"Create Event"),b(),T(45,"a",25),N(46,"Cancel"),b()()()()()),t&2&&(O(5),Y("ngIf",r.errorMessage),O(5),Fe("ngModel",r.event.title),O(4),Fe("ngModel",r.event.description),O(5),Fe("ngModel",r.event.date),O(4),Fe("ngModel",r.event.time),O(4),Fe("ngModel",r.event.location),O(5),Fe("ngModel",r.event.category),O(),Y("ngForOf",r.categories),O(4),Fe("ngModel",r.event.attendees),O(4),Fe("ngModel",r.event.imageUrl))},dependencies:[an,st,En,pt,jt,Wo,kg,Fg,tr,Nd,jc,oi,Go,Rr,zi,gt,Xe],styles:[".form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:2rem}.form-card[_ngcontent-%COMP%]{background-color:#16213e;border:1px solid #0f3460;border-radius:8px;padding:2rem}.form-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;color:#00d4ff}.error-message[_ngcontent-%COMP%]{background-color:#f44336;color:#fff;padding:1rem;border-radius:4px;margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#e0e0e0;font-weight:600;margin-bottom:.5rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #0f3460;background-color:#1a1a2e;color:#e0e0e0;border-radius:4px;font-size:1rem;font-family:inherit;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#00d4ff;box-shadow:0 0 0 3px #00d4ff1a}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:2rem}.btn[_ngcontent-%COMP%]{flex:1;padding:.75rem;border:none;border-radius:4px;font-weight:600;cursor:pointer;transition:all .3s;text-decoration:none;text-align:center}.btn-primary[_ngcontent-%COMP%]{background-color:#00d4ff;color:#1a1a2e}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#00a8cc}.btn-secondary[_ngcontent-%COMP%]{background-color:transparent;color:#00d4ff;border:1px solid #00d4ff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#00d4ff;color:#1a1a2e}@media (max-width: 600px){.form-container[_ngcontent-%COMP%]{padding:1rem}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.btn[_ngcontent-%COMP%]{width:100%}}"]})};function cG(n,e){if(n&1&&(T(0,"div",27),N(1),b()),n&2){let t=X(2);O(),xe(" ",t.errorMessage," ")}}function lG(n,e){if(n&1&&(T(0,"option",28),N(1),b()),n&2){let t=e.$implicit;Y("value",t),O(),Te(t)}}function uG(n,e){if(n&1){let t=ht();T(0,"div",1)(1,"div",2)(2,"h2"),N(3,"Edit Event"),b(),Ce(4,cG,2,1,"div",3),T(5,"form",4),ye("ngSubmit",function(){Ie(t);let i=X();return be(i.updateEvent())}),T(6,"div",5)(7,"label",6),N(8,"Event Title *"),b(),T(9,"input",7),Le("ngModelChange",function(i){Ie(t);let o=X();return Be(o.event.title,i)||(o.event.title=i),be(i)}),b()(),T(10,"div",5)(11,"label",8),N(12,"Description *"),b(),T(13,"textarea",9),Le("ngModelChange",function(i){Ie(t);let o=X();return Be(o.event.description,i)||(o.event.description=i),be(i)}),b()(),T(14,"div",10)(15,"div",5)(16,"label",11),N(17,"Date *"),b(),T(18,"input",12),Le("ngModelChange",function(i){Ie(t);let o=X();return Be(o.event.date,i)||(o.event.date=i),be(i)}),b()(),T(19,"div",5)(20,"label",13),N(21,"Time *"),b(),T(22,"input",14),Le("ngModelChange",function(i){Ie(t);let o=X();return Be(o.event.time,i)||(o.event.time=i),be(i)}),b()()(),T(23,"div",5)(24,"label",15),N(25,"Location *"),b(),T(26,"input",16),Le("ngModelChange",function(i){Ie(t);let o=X();return Be(o.event.location,i)||(o.event.location=i),be(i)}),b()(),T(27,"div",10)(28,"div",5)(29,"label",17),N(30,"Category"),b(),T(31,"select",18),Le("ngModelChange",function(i){Ie(t);let o=X();return Be(o.event.category,i)||(o.event.category=i),be(i)}),Ce(32,lG,2,2,"option",19),b()(),T(33,"div",5)(34,"label",20),N(35,"Expected Attendees"),b(),T(36,"input",21),Le("ngModelChange",function(i){Ie(t);let o=X();return Be(o.event.attendees,i)||(o.event.attendees=i),be(i)}),b()()(),T(37,"div",5)(38,"label",22),N(39,"Image URL"),b(),T(40,"input",23),Le("ngModelChange",function(i){Ie(t);let o=X();return Be(o.event.imageUrl,i)||(o.event.imageUrl=i),be(i)}),b()(),T(41,"div",24)(42,"button",25),N(43,"Update Event"),b(),T(44,"a",26),N(45,"Cancel"),b()()()()()}if(n&2){let t=X();O(4),Y("ngIf",t.errorMessage),O(5),Fe("ngModel",t.event.title),O(4),Fe("ngModel",t.event.description),O(5),Fe("ngModel",t.event.date),O(4),Fe("ngModel",t.event.time),O(4),Fe("ngModel",t.event.location),O(5),Fe("ngModel",t.event.category),O(),Y("ngForOf",t.categories),O(4),Fe("ngModel",t.event.attendees),O(4),Fe("ngModel",t.event.imageUrl)}}function dG(n,e){n&1&&(T(0,"div",1)(1,"p"),N(2,"Event not found"),b()())}var Hg=class n{constructor(e,t,r,i){this.eventService=e;this.authService=t;this.route=r;this.router=i;this.authService.getCurrentUser().subscribe(o=>{this.currentUser=o,o?.isAdmin||this.router.navigate(["/events"])})}currentUser=null;event=null;errorMessage="";categories=["Community","Technology","Markets","Health","Education","Sports","Arts"];ngOnInit(){this.route.params.subscribe(e=>{let t=e.id;this.eventService.getEventById(t).subscribe(r=>{r&&(this.event=r)})})}updateEvent(){this.validateForm()&&this.event&&(this.eventService.updateEvent(this.event.id,this.event),this.router.navigate(["/admin"]))}validateForm(){return!this.event||!this.event.title||!this.event.description||!this.event.date||!this.event.time||!this.event.location?(this.errorMessage="Please fill in all required fields",!1):!0}static \u0275fac=function(t){return new(t||n)(B(sn),B(Ut),B(nn),B(mt))};static \u0275cmp=Ke({type:n,selectors:[["app-edit-event"]],decls:3,vars:2,consts:[["class","form-container",4,"ngIf"],[1,"form-container"],[1,"form-card"],["class","error-message",4,"ngIf"],[3,"ngSubmit"],[1,"form-group"],["for","title"],["id","title","type","text","name","title","placeholder","Enter event title",3,"ngModelChange","ngModel"],["for","description"],["id","description","name","description","placeholder","Describe your event","rows","5",3,"ngModelChange","ngModel"],[1,"form-row"],["for","date"],["id","date","type","date","name","date",3,"ngModelChange","ngModel"],["for","time"],["id","time","type","time","name","time",3,"ngModelChange","ngModel"],["for","location"],["id","location","type","text","name","location","placeholder","Enter event location",3,"ngModelChange","ngModel"],["for","category"],["name","category","id","category",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","attendees"],["id","attendees","type","number","name","attendees","placeholder","0",3,"ngModelChange","ngModel"],["for","imageUrl"],["id","imageUrl","type","text","name","imageUrl","placeholder","https://example.com/image.jpg",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","submit",1,"btn","btn-primary"],["routerLink","/admin",1,"btn","btn-secondary"],[1,"error-message"],[3,"value"]],template:function(t,r){t&1&&(ot(0,"app-header"),Ce(1,uG,46,10,"div",0)(2,dG,3,0,"div",0)),t&2&&(O(),Y("ngIf",r.event),O(),Y("ngIf",!r.event))},dependencies:[an,st,En,pt,jt,Wo,kg,Fg,tr,Nd,jc,oi,Go,Rr,zi,gt,Xe],styles:[".form-container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:2rem}.form-card[_ngcontent-%COMP%]{background-color:#16213e;border:1px solid #0f3460;border-radius:8px;padding:2rem}.form-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;color:#00d4ff}.error-message[_ngcontent-%COMP%]{background-color:#f44336;color:#fff;padding:1rem;border-radius:4px;margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#e0e0e0;font-weight:600;margin-bottom:.5rem}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #0f3460;background-color:#1a1a2e;color:#e0e0e0;border-radius:4px;font-size:1rem;font-family:inherit;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#00d4ff;box-shadow:0 0 0 3px #00d4ff1a}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:2rem}.btn[_ngcontent-%COMP%]{flex:1;padding:.75rem;border:none;border-radius:4px;font-weight:600;cursor:pointer;transition:all .3s;text-decoration:none;text-align:center}.btn-primary[_ngcontent-%COMP%]{background-color:#00d4ff;color:#1a1a2e}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#00a8cc}.btn-secondary[_ngcontent-%COMP%]{background-color:transparent;color:#00d4ff;border:1px solid #00d4ff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#00d4ff;color:#1a1a2e}@media (max-width: 600px){.form-container[_ngcontent-%COMP%]{padding:1rem}.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.btn[_ngcontent-%COMP%]{width:100%}}"]})};var hG=n=>["/events",n];function fG(n,e){if(n&1&&(T(0,"div",13),N(1),b()),n&2){let t=e.$implicit;O(),Te(t)}}function pG(n,e){if(n&1&&(T(0,"span",17),N(1),b()),n&2){let t=X().$implicit;O(),Te(t)}}function mG(n,e){n&1&&(T(0,"span",18),N(1,"\u25CF"),b())}function gG(n,e){if(n&1){let t=ht();T(0,"button",14),ye("click",function(){let i=Ie(t).$implicit,o=X();return be(o.selectDate(i))}),Ce(1,pG,2,1,"span",15)(2,mG,2,0,"span",16),b()}if(n&2){let t=e.$implicit,r=X();en("empty",t===null)("has-events",r.hasEventsOnDate(t))("today",r.isToday(t))("selected",r.isSelected(t)),O(),Y("ngIf",t),O(),Y("ngIf",r.hasEventsOnDate(t))}}function yG(n,e){n&1&&(T(0,"div",19)(1,"p"),N(2,"Click on a date to see events"),b()())}function vG(n,e){n&1&&(T(0,"div",20)(1,"p"),N(2,"No events on this date"),b()())}function _G(n,e){if(n&1&&(T(0,"div",21)(1,"div",22),N(2),b(),T(3,"div",23)(4,"h4"),N(5),b(),T(6,"p",24),N(7),b(),T(8,"p",25),N(9),b()(),T(10,"a",26),N(11,"View \u2192"),b()()),n&2){let t=e.$implicit;O(2),Te(t.time),O(3),Te(t.title),O(2),xe("\u{1F4CD} ",t.location),O(2),Te(t.category),O(),Y("routerLink",Ci(5,hG,t.id))}}var zg=class n{constructor(e){this.eventService=e}allEvents=[];currentDate=new Date;selectedDate=null;eventsOnSelectedDate=[];daysInMonth=[];monthYear="";weekDays=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];ngOnInit(){this.eventService.getEvents().subscribe(e=>{this.allEvents=e,this.generateCalendar()})}generateCalendar(){let e=this.currentDate.getFullYear(),t=this.currentDate.getMonth();this.monthYear=new Date(e,t).toLocaleDateString("en-US",{month:"long",year:"numeric"});let r=new Date(e,t,1).getDay(),i=new Date(e,t+1,0).getDate();this.daysInMonth=[];for(let o=0;o<r;o++)this.daysInMonth.push(null);for(let o=1;o<=i;o++)this.daysInMonth.push(o)}formatDateString(e){let t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${t}-${r}-${i}`}selectDate(e){if(e===null)return;let t=this.currentDate.getFullYear(),r=this.currentDate.getMonth();this.selectedDate=new Date(t,r,e);let i=this.formatDateString(this.selectedDate);this.eventsOnSelectedDate=this.allEvents.filter(o=>o.date===i)}previousMonth(){this.currentDate.setMonth(this.currentDate.getMonth()-1),this.currentDate=new Date(this.currentDate),this.generateCalendar(),this.selectedDate=null,this.eventsOnSelectedDate=[]}nextMonth(){this.currentDate.setMonth(this.currentDate.getMonth()+1),this.currentDate=new Date(this.currentDate),this.generateCalendar(),this.selectedDate=null,this.eventsOnSelectedDate=[]}hasEventsOnDate(e){if(e===null)return!1;let t=this.currentDate.getFullYear(),r=this.currentDate.getMonth(),i=new Date(t,r,e),o=this.formatDateString(i);return this.allEvents.some(s=>s.date===o)}isToday(e){if(e===null)return!1;let t=new Date;return e===t.getDate()&&this.currentDate.getMonth()===t.getMonth()&&this.currentDate.getFullYear()===t.getFullYear()}isSelected(e){return e===null||!this.selectedDate?!1:e===this.selectedDate.getDate()&&this.currentDate.getMonth()===this.selectedDate.getMonth()&&this.currentDate.getFullYear()===this.selectedDate.getFullYear()}static \u0275fac=function(t){return new(t||n)(B(sn))};static \u0275cmp=Ke({type:n,selectors:[["app-calendar"]],decls:22,vars:10,consts:[[1,"calendar-container"],[1,"calendar-wrapper"],[1,"calendar-section"],[1,"calendar-header"],[1,"nav-button",3,"click"],[1,"weekdays"],["class","weekday",4,"ngFor","ngForOf"],[1,"calendar-grid"],["class","calendar-day",3,"empty","has-events","today","selected","click",4,"ngFor","ngForOf"],[1,"events-section"],["class","no-selection",4,"ngIf"],["class","no-events",4,"ngIf"],["class","event-item",4,"ngFor","ngForOf"],[1,"weekday"],[1,"calendar-day",3,"click"],["class","day-number",4,"ngIf"],["class","event-indicator",4,"ngIf"],[1,"day-number"],[1,"event-indicator"],[1,"no-selection"],[1,"no-events"],[1,"event-item"],[1,"event-time"],[1,"event-details"],[1,"event-location"],[1,"event-category"],[1,"view-link",3,"routerLink"]],template:function(t,r){t&1&&(ot(0,"app-header"),T(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"button",4),ye("click",function(){return r.previousMonth()}),N(6,"\u2190 Previous"),b(),T(7,"h2"),N(8),b(),T(9,"button",4),ye("click",function(){return r.nextMonth()}),N(10,"Next \u2192"),b()(),T(11,"div",5),Ce(12,fG,2,1,"div",6),b(),T(13,"div",7),Ce(14,gG,3,10,"button",8),b()(),T(15,"div",9)(16,"h3"),N(17),Kn(18,"date"),b(),Ce(19,yG,3,0,"div",10)(20,vG,3,0,"div",11)(21,_G,12,7,"div",12),b()()()),t&2&&(O(8),Te(r.monthYear),O(4),Y("ngForOf",r.weekDays),O(2),Y("ngForOf",r.daysInMonth),O(3),xe(" ",r.selectedDate?pr(18,7,r.selectedDate,"MMMM d, yyyy"):"Select a date"," "),O(2),Y("ngIf",!r.selectedDate),O(),Y("ngIf",r.selectedDate&&r.eventsOnSelectedDate.length===0),O(),Y("ngForOf",r.eventsOnSelectedDate))},dependencies:[an,st,En,pt,jt,gt,Xe,_r],styles:[".calendar-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:2rem}.calendar-wrapper[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:2rem}.calendar-section[_ngcontent-%COMP%], .events-section[_ngcontent-%COMP%]{background-color:#16213e;border:1px solid #0f3460;border-radius:8px;padding:2rem}.calendar-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.calendar-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#00d4ff;min-width:200px;text-align:center}.nav-button[_ngcontent-%COMP%]{background-color:#0f3460;color:#00d4ff;border:1px solid #00d4ff;padding:.5rem 1rem;border-radius:4px;cursor:pointer;font-weight:600;transition:all .3s}.nav-button[_ngcontent-%COMP%]:hover{background-color:#00d4ff;color:#1a1a2e}.weekdays[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:.5rem;margin-bottom:1rem}.weekday[_ngcontent-%COMP%]{text-align:center;color:#00d4ff;font-weight:600;padding:.5rem;font-size:.9rem}.calendar-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(7,1fr);gap:.5rem}.calendar-day[_ngcontent-%COMP%]{aspect-ratio:1;background-color:#1a1a2e;border:1px solid #0f3460;border-radius:4px;color:#e0e0e0;cursor:pointer;transition:all .3s;display:flex;align-items:center;justify-content:center;position:relative;font-weight:600;font-size:.9rem}.calendar-day[_ngcontent-%COMP%]:hover:not(.empty){border-color:#00d4ff;color:#00d4ff}.calendar-day.empty[_ngcontent-%COMP%]{background-color:transparent;border:none;cursor:default}.calendar-day.today[_ngcontent-%COMP%]{background-color:#00d4ff;color:#1a1a2e;border-color:#00d4ff}.calendar-day.selected[_ngcontent-%COMP%]{background-color:#0f3460;border:2px solid #00d4ff}.calendar-day.has-events[_ngcontent-%COMP%]   .event-indicator[_ngcontent-%COMP%]{position:absolute;bottom:2px;font-size:.6rem;color:#ff9800}.events-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:#00d4ff;border-bottom:1px solid #0f3460;padding-bottom:1rem}.no-selection[_ngcontent-%COMP%], .no-events[_ngcontent-%COMP%]{text-align:center;padding:2rem 1rem;color:#b0b0b0}.event-item[_ngcontent-%COMP%]{background-color:#1a1a2e;border:1px solid #0f3460;border-radius:4px;padding:1rem;margin-bottom:1rem;display:flex;gap:1rem;align-items:flex-start}.event-time[_ngcontent-%COMP%]{background-color:#0f3460;color:#00d4ff;padding:.5rem .75rem;border-radius:4px;font-weight:600;font-size:.9rem;min-width:80px;text-align:center}.event-details[_ngcontent-%COMP%]{flex:1}.event-details[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#00d4ff}.event-location[_ngcontent-%COMP%], .event-category[_ngcontent-%COMP%]{margin:.25rem 0;color:#b0b0b0;font-size:.9rem}.view-link[_ngcontent-%COMP%]{color:#00d4ff;text-decoration:none;font-weight:600;transition:color .3s}.view-link[_ngcontent-%COMP%]:hover{color:#00a8cc}@media (max-width: 900px){.calendar-wrapper[_ngcontent-%COMP%]{grid-template-columns:1fr}.calendar-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(7,1fr)}.calendar-day[_ngcontent-%COMP%]{font-size:.8rem;aspect-ratio:auto;padding:.75rem .5rem;min-height:60px}}@media (max-width: 600px){.calendar-container[_ngcontent-%COMP%], .calendar-section[_ngcontent-%COMP%], .events-section[_ngcontent-%COMP%]{padding:1rem}.calendar-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.calendar-day[_ngcontent-%COMP%]{font-size:.7rem;min-height:50px}.event-item[_ngcontent-%COMP%]{flex-direction:column}.event-time[_ngcontent-%COMP%]{width:100%}}"]})};var EG=n=>["/events",n];function wG(n,e){n&1&&(T(0,"div",9)(1,"p"),N(2,"You haven't RSVP'd to any events yet."),b(),T(3,"a",10),N(4,"Browse Events"),b()())}function IG(n,e){if(n&1){let t=ht();T(0,"div",13)(1,"div",14),ot(2,"img",15),T(3,"span",16),N(4),b()(),T(5,"div",17)(6,"h3"),N(7),b(),T(8,"p",18),N(9),b(),T(10,"div",19)(11,"span",20),N(12),Kn(13,"date"),b(),T(14,"span",20),N(15),b()(),T(16,"p",21),N(17),b(),T(18,"div",22)(19,"a",23),N(20,"View Event"),b(),T(21,"button",24),ye("click",function(){let i=Ie(t).$implicit,o=X(3);return be(o.cancelRsvp(i.id))}),N(22,"Cancel RSVP"),b()()()()}if(n&2){let t=e.$implicit,r=X(3);O(2),Y("src",t.imageUrl,po)("alt",t.title),O(),Y("ngClass",r.getRsvpBadgeClass(t.id)),O(),Te(r.getRsvpStatus(t.id)),O(3),Te(t.title),O(2),Te(t.category),O(3),xe("\u{1F4C5} ",pr(13,10,t.date,"MMM dd, yyyy")),O(3),xe("\u{1F550} ",t.time),O(2),xe("\u{1F4CD} ",t.location),O(2),Y("routerLink",Ci(13,EG,t.id))}}function bG(n,e){if(n&1&&(T(0,"div",11),Ce(1,IG,23,15,"div",12),b()),n&2){let t=X(2);O(),Y("ngForOf",t.rsvpEvents)}}function CG(n,e){if(n&1&&(T(0,"div")(1,"div",3)(2,"h1"),N(3,"My Profile"),b(),T(4,"p",4),N(5),b(),T(6,"p",5),N(7),b()(),T(8,"div",6)(9,"h2"),N(10,"My RSVPs"),b(),Ce(11,wG,5,0,"div",7)(12,bG,2,1,"div",8),b()()),n&2){let t=X();O(5),Te(t.currentUser.name),O(2),Te(t.currentUser.email),O(4),Y("ngIf",t.rsvpEvents.length===0),O(),Y("ngIf",t.rsvpEvents.length>0)}}function TG(n,e){n&1&&(T(0,"div",25)(1,"p"),N(2,"Please log in to view your RSVPs"),b(),T(3,"a",26),N(4,"Login"),b()())}var qg=class n{constructor(e,t,r,i,o){this.authService=e;this.rsvpService=t;this.eventService=r;this.router=i;this.route=o}currentUser=null;userRsvps=[];allEvents=[];rsvpEvents=[];ngOnInit(){this.authService.getCurrentUser().subscribe(e=>{this.currentUser=e;let t=this.route.snapshot.paramMap.get("id");if(t&&e&&t!==e.id&&!e.isAdmin){this.router.navigate(["/events"]);return}e&&this.loadUserRsvps()}),this.eventService.getEvents().subscribe(e=>{this.allEvents=e,this.updateRsvpEvents()})}loadUserRsvps(){this.currentUser&&this.rsvpService.getUserRsvps(this.currentUser.id).subscribe(e=>{this.userRsvps=e,this.updateRsvpEvents()})}updateRsvpEvents(){this.rsvpEvents=this.userRsvps.map(e=>this.allEvents.find(t=>t.id===e.eventId)).filter(e=>e!==void 0)}cancelRsvp(e){this.currentUser&&(this.rsvpService.removeRsvp(this.currentUser.id,e),this.loadUserRsvps())}getRsvpStatus(e){let t=this.userRsvps.find(r=>r.eventId===e);if(!t)return"Not Attending";switch(t.status){case"going":return"Going";case"maybe":return"Maybe";case"not-going":return"Not Going";default:return"Unknown"}}getRsvpBadgeClass(e){return`badge badge-${this.userRsvps.find(r=>r.eventId===e)?.status||"unknown"}`}static \u0275fac=function(t){return new(t||n)(B(Ut),B(Bc),B(sn),B(mt),B(nn))};static \u0275cmp=Ke({type:n,selectors:[["app-profile"]],decls:4,vars:2,consts:[[1,"profile-container"],[4,"ngIf"],["class","not-logged-in",4,"ngIf"],[1,"profile-header"],[1,"username"],[1,"email"],[1,"profile-section"],["class","no-rsvps",4,"ngIf"],["class","rsvp-grid",4,"ngIf"],[1,"no-rsvps"],["routerLink","/events",1,"btn","btn-primary"],[1,"rsvp-grid"],["class","rsvp-card",4,"ngFor","ngForOf"],[1,"rsvp-card"],[1,"rsvp-card-image"],[3,"src","alt"],[3,"ngClass"],[1,"rsvp-card-content"],[1,"category"],[1,"event-meta"],[1,"meta-item"],[1,"location"],[1,"card-actions"],[1,"btn","btn-small","btn-secondary",3,"routerLink"],[1,"btn","btn-small","btn-cancel",3,"click"],[1,"not-logged-in"],["routerLink","/login",1,"btn","btn-primary"]],template:function(t,r){t&1&&(ot(0,"app-header"),T(1,"div",0),Ce(2,CG,13,4,"div",1)(3,TG,5,0,"div",2),b()),t&2&&(O(2),Y("ngIf",r.currentUser),O(),Y("ngIf",!r.currentUser))},dependencies:[an,st,pE,En,pt,jt,gt,Xe,_r],styles:[".profile-container[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto;padding:2rem}.profile-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#0f3460,#1a1a2e);border-radius:8px;padding:2rem;margin-bottom:2rem;text-align:center}.profile-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 1rem;color:#00d4ff}.username[_ngcontent-%COMP%]{font-size:1.5rem;color:#e0e0e0;margin:.5rem 0;font-weight:600}.email[_ngcontent-%COMP%]{color:#b0b0b0;margin:.5rem 0 0}.profile-section[_ngcontent-%COMP%]{background-color:#16213e;border:1px solid #0f3460;border-radius:8px;padding:2rem}.profile-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#00d4ff;margin-top:0;margin-bottom:2rem}.no-rsvps[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#b0b0b0}.no-rsvps[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:1rem}.rsvp-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:2rem}.rsvp-card[_ngcontent-%COMP%]{background-color:#1a1a2e;border:1px solid #0f3460;border-radius:8px;overflow:hidden;transition:all .3s}.rsvp-card[_ngcontent-%COMP%]:hover{border-color:#00d4ff;box-shadow:0 4px 12px #00d4ff33;transform:translateY(-4px)}.rsvp-card-image[_ngcontent-%COMP%]{position:relative;width:100%;height:180px;overflow:hidden;background-color:#0f3460}.rsvp-card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.badge[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;padding:.5rem 1rem;border-radius:20px;font-weight:600;font-size:.8rem}.badge-going[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.badge-maybe[_ngcontent-%COMP%]{background-color:#ff9800;color:#fff}.badge-not-going[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.rsvp-card-content[_ngcontent-%COMP%]{padding:1.5rem}.rsvp-card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#00d4ff}.category[_ngcontent-%COMP%]{color:#00d4ff;font-size:.85rem;margin:.25rem 0 1rem;font-weight:600}.event-meta[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;margin-bottom:1rem;font-size:.9rem;color:#b0b0b0}.location[_ngcontent-%COMP%]{color:#b0b0b0;margin:1rem 0;font-size:.9rem}.card-actions[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-top:1rem}.btn[_ngcontent-%COMP%]{flex:1;padding:.5rem 1rem;border:none;border-radius:4px;text-decoration:none;cursor:pointer;font-weight:600;transition:all .3s;text-align:center;font-size:.9rem}.btn-primary[_ngcontent-%COMP%]{background-color:#00d4ff;color:#1a1a2e}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#00a8cc}.btn-secondary[_ngcontent-%COMP%]{background-color:transparent;color:#00d4ff;border:1px solid #00d4ff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#00d4ff;color:#1a1a2e}.btn-small[_ngcontent-%COMP%]{padding:.4rem .8rem;font-size:.8rem}.btn-cancel[_ngcontent-%COMP%]{background-color:#f44336;color:#fff;border:none}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#d32f2f}.not-logged-in[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:#b0b0b0}.not-logged-in[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:1rem;max-width:150px;margin-left:auto;margin-right:auto}@media (max-width: 768px){.profile-container[_ngcontent-%COMP%]{padding:1rem}.rsvp-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.card-actions[_ngcontent-%COMP%]{flex-direction:column}}"]})};var hk=[{path:"",redirectTo:"/events",pathMatch:"full"},{path:"events",component:Lg},{path:"events/:id",component:Vg},{path:"calendar",component:zg},{path:"login",component:Ug},{path:"register",component:jg},{path:"profile",component:qg},{path:"admin",component:Bg},{path:"admin/events/new",component:$g},{path:"admin/events/:id/edit",component:Hg},{path:"**",redirectTo:"/events"}];var fk={apiKey:"AIzaSyDCU6erUsfncb3DjyEoUUfB0Qm3uGTre5w",authDomain:"event-management-app-266d4.firebaseapp.com",projectId:"event-management-app-266d4",storageBucket:"event-management-app-266d4.firebasestorage.app",messagingSenderId:"840251112414",appId:"1:840251112414:web:5ffbdea2b7f96df1303b4f"};tI(fk);CE(om,{providers:[nw(hk),zN(),SE()]}).catch(n=>console.error(n));
